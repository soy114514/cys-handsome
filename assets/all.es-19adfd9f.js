import{S as je,b as Qn,C as Te,r as vr,h as ti,T as ei,D as ri,c as ai,G as Gt,A as Ga,R as dr,a as ni,d as ii,e as si,L as Ye,B as wt,M as Br,f as oi}from"./index-9f69993e.js";var et;(function(i){i[i.Region=0]="Region",i[i.BoundingBox=1]="BoundingBox",i[i.Mesh=2]="Mesh",i[i.LinkedMesh=3]="LinkedMesh",i[i.Path=4]="Path",i[i.Point=5]="Point",i[i.Clipping=6]="Clipping"})(et||(et={}));var ze=function(){function i(t,e,r,a){e===void 0&&(e=new Array),r===void 0&&(r=0),a===void 0&&(a=new DataView(t.buffer)),this.strings=e,this.index=r,this.buffer=a}return i.prototype.readByte=function(){return this.buffer.getInt8(this.index++)},i.prototype.readUnsignedByte=function(){return this.buffer.getUint8(this.index++)},i.prototype.readShort=function(){var t=this.buffer.getInt16(this.index);return this.index+=2,t},i.prototype.readInt32=function(){var t=this.buffer.getInt32(this.index);return this.index+=4,t},i.prototype.readInt=function(t){var e=this.readByte(),r=e&127;return e&128&&(e=this.readByte(),r|=(e&127)<<7,e&128&&(e=this.readByte(),r|=(e&127)<<14,e&128&&(e=this.readByte(),r|=(e&127)<<21,e&128&&(e=this.readByte(),r|=(e&127)<<28)))),t?r:r>>>1^-(r&1)},i.prototype.readStringRef=function(){var t=this.readInt(!0);return t==0?null:this.strings[t-1]},i.prototype.readString=function(){var t=this.readInt(!0);switch(t){case 0:return null;case 1:return""}t--;for(var e="",r=0;r<t;){var a=this.readUnsignedByte();switch(a>>4){case 12:case 13:e+=String.fromCharCode((a&31)<<6|this.readByte()&63),r+=2;break;case 14:e+=String.fromCharCode((a&15)<<12|(this.readByte()&63)<<6|this.readByte()&63),r+=3;break;default:e+=String.fromCharCode(a),r++}}return e},i.prototype.readFloat=function(){var t=this.buffer.getFloat32(this.index);return this.index+=4,t},i.prototype.readBoolean=function(){return this.readByte()!=0},i}(),b;(function(i){i[i.setup=0]="setup",i[i.first=1]="first",i[i.replace=2]="replace",i[i.add=3]="add"})(b||(b={}));var rt;(function(i){i[i.mixIn=0]="mixIn",i[i.mixOut=1]="mixOut"})(rt||(rt={}));var vt;(function(i){i[i.Fixed=0]="Fixed",i[i.Percent=1]="Percent"})(vt||(vt={}));var gt;(function(i){i[i.Tangent=0]="Tangent",i[i.Chain=1]="Chain",i[i.ChainScale=2]="ChainScale"})(gt||(gt={}));var Q;(function(i){i[i.Normal=0]="Normal",i[i.OnlyTranslation=1]="OnlyTranslation",i[i.NoRotationOrReflection=2]="NoRotationOrReflection",i[i.NoScale=3]="NoScale",i[i.NoScaleOrReflection=4]="NoScaleOrReflection"})(Q||(Q={}));/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var wr=function(i,t){return wr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])},wr(i,t)};function Ie(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");wr(i,t);function e(){this.constructor=i}i.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}function Na(i){switch(i.toLowerCase()){case"nearest":return Lt.Nearest;case"linear":return Lt.Linear;case"mipmap":return Lt.MipMap;case"mipmapnearestnearest":return Lt.MipMapNearestNearest;case"mipmaplinearnearest":return Lt.MipMapLinearNearest;case"mipmapnearestlinear":return Lt.MipMapNearestLinear;case"mipmaplinearlinear":return Lt.MipMapLinearLinear;default:throw new Error("Unknown texture filter "+i)}}function gs(i){switch(i.toLowerCase()){case"mirroredtepeat":return Kt.MirroredRepeat;case"clamptoedge":return Kt.ClampToEdge;case"repeat":return Kt.Repeat;default:throw new Error("Unknown texture wrap "+i)}}var Lt;(function(i){i[i.Nearest=9728]="Nearest",i[i.Linear=9729]="Linear",i[i.MipMap=9987]="MipMap",i[i.MipMapNearestNearest=9984]="MipMapNearestNearest",i[i.MipMapLinearNearest=9985]="MipMapLinearNearest",i[i.MipMapNearestLinear=9986]="MipMapNearestLinear",i[i.MipMapLinearLinear=9987]="MipMapLinearLinear"})(Lt||(Lt={}));var Kt;(function(i){i[i.MirroredRepeat=33648]="MirroredRepeat",i[i.ClampToEdge=33071]="ClampToEdge",i[i.Repeat=10497]="Repeat"})(Kt||(Kt={}));var xr=function(){function i(){this.size=null,this.names=null,this.values=null,this.renderObject=null}return Object.defineProperty(i.prototype,"width",{get:function(){var t=this.texture;return t.trim?t.trim.width:t.orig.width},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"height",{get:function(){var t=this.texture;return t.trim?t.trim.height:t.orig.height},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"u",{get:function(){return this.texture._uvs.x0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"v",{get:function(){return this.texture._uvs.y0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"u2",{get:function(){return this.texture._uvs.x2},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"v2",{get:function(){return this.texture._uvs.y2},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"offsetX",{get:function(){var t=this.texture;return t.trim?t.trim.x:0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"offsetY",{get:function(){return this.spineOffsetY},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"pixiOffsetY",{get:function(){var t=this.texture;return t.trim?t.trim.y:0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"spineOffsetY",{get:function(){var t=this.texture;return this.originalHeight-this.height-(t.trim?t.trim.y:0)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"originalWidth",{get:function(){return this.texture.orig.width},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"originalHeight",{get:function(){return this.texture.orig.height},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"x",{get:function(){return this.texture.frame.x},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"y",{get:function(){return this.texture.frame.y},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rotate",{get:function(){return this.texture.rotate!==0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"degrees",{get:function(){return(360-this.texture.rotate*45)%360},enumerable:!1,configurable:!0}),i}(),hi=function(){function i(){this.x=0,this.y=0,this.width=0,this.height=0,this.offsetX=0,this.offsetY=0,this.originalWidth=0,this.originalHeight=0,this.rotate=0,this.index=0}return i}(),li=function(){function i(t,e,r){this.pages=new Array,this.regions=new Array,t&&this.addSpineAtlas(t,e,r)}return i.prototype.addTexture=function(t,e){for(var r=this.pages,a=null,n=0;n<r.length;n++)if(r[n].baseTexture===e.baseTexture){a=r[n];break}if(a===null){a=new Oa,a.name="texturePage";var h=e.baseTexture;a.width=h.realWidth,a.height=h.realHeight,a.baseTexture=h,a.minFilter=a.magFilter=Lt.Nearest,a.uWrap=Kt.ClampToEdge,a.vWrap=Kt.ClampToEdge,r.push(a)}var f=new Da;return f.name=t,f.page=a,f.texture=e,f.index=-1,this.regions.push(f),f},i.prototype.addTextureHash=function(t,e){for(var r in t)t.hasOwnProperty(r)&&this.addTexture(e&&r.indexOf(".")!==-1?r.substr(0,r.lastIndexOf(".")):r,t[r])},i.prototype.addSpineAtlas=function(t,e,r){return this.load(t,e,r)},i.prototype.load=function(t,e,r){var a=this;if(e==null)throw new Error("textureLoader cannot be null.");var n=new fi(t),h=new Array(4),f=null,c={},o=null;c.size=function(){f.width=parseInt(h[1]),f.height=parseInt(h[2])},c.format=function(){},c.filter=function(){f.minFilter=Na(h[1]),f.magFilter=Na(h[2])},c.repeat=function(){h[1].indexOf("x")!=-1&&(f.uWrap=Kt.Repeat),h[1].indexOf("y")!=-1&&(f.vWrap=Kt.Repeat)},c.pma=function(){f.pma=h[1]=="true"};var s={};s.xy=function(){o.x=parseInt(h[1]),o.y=parseInt(h[2])},s.size=function(){o.width=parseInt(h[1]),o.height=parseInt(h[2])},s.bounds=function(){o.x=parseInt(h[1]),o.y=parseInt(h[2]),o.width=parseInt(h[3]),o.height=parseInt(h[4])},s.offset=function(){o.offsetX=parseInt(h[1]),o.offsetY=parseInt(h[2])},s.orig=function(){o.originalWidth=parseInt(h[1]),o.originalHeight=parseInt(h[2])},s.offsets=function(){o.offsetX=parseInt(h[1]),o.offsetY=parseInt(h[2]),o.originalWidth=parseInt(h[3]),o.originalHeight=parseInt(h[4])},s.rotate=function(){var d=h[1],v=0;d.toLocaleLowerCase()=="true"?v=6:d.toLocaleLowerCase()=="false"?v=0:v=(720-parseFloat(d))%360/45,o.rotate=v},s.index=function(){o.index=parseInt(h[1])};for(var l=n.readLine();l!=null&&l.trim().length==0;)l=n.readLine();for(;!(l==null||l.trim().length==0||n.readEntry(h,l)==0);)l=n.readLine();var u=function(){for(;;){if(l==null)return r&&r(a);if(l.trim().length==0)f=null,l=n.readLine();else if(f===null){for(f=new Oa,f.name=l.trim();n.readEntry(h,l=n.readLine())!=0;){var d=c[h[0]];d&&d()}a.pages.push(f),e(f.name,function(C){if(C===null)return a.pages.splice(a.pages.indexOf(f),1),r&&r(null);f.baseTexture=C,f.pma&&(C.alphaMode=Ga.PMA),C.valid||C.setSize(f.width,f.height),f.setFilters(),(!f.width||!f.height)&&(f.width=C.realWidth,f.height=C.realHeight,(!f.width||!f.height)&&console.log("ERROR spine atlas page "+f.name+": meshes wont work if you dont specify size in atlas (http://www.html5gamedevs.com/topic/18888-pixi-spines-and-meshes/?p=107121)")),u()});break}else{o=new hi;var v=new Da;v.name=l,v.page=f;for(var p=null,y=null;;){var g=n.readEntry(h,l=n.readLine());if(g==0)break;var d=s[h[0]];if(d)d();else{p==null&&(p=[],y=[]),p.push(h[0]);for(var m=[],w=0;w<g;w++)m.push(parseInt(h[w+1]));y.push(m)}}o.originalWidth==0&&o.originalHeight==0&&(o.originalWidth=o.width,o.originalHeight=o.height);var x=f.baseTexture.resolution;o.x/=x,o.y/=x,o.width/=x,o.height/=x,o.originalWidth/=x,o.originalHeight/=x,o.offsetX/=x,o.offsetY/=x;var E=o.rotate%4!==0,S=new dr(o.x,o.y,E?o.height:o.width,E?o.width:o.height),A=new dr(0,0,o.originalWidth,o.originalHeight),T=new dr(o.offsetX,o.originalHeight-o.height-o.offsetY,o.width,o.height);v.texture=new ni(v.page.baseTexture,S,A,T,o.rotate),v.index=o.index,v.texture.updateUvs(),a.regions.push(v)}}};u()},i.prototype.findRegion=function(t){for(var e=0;e<this.regions.length;e++)if(this.regions[e].name==t)return this.regions[e];return null},i.prototype.dispose=function(){for(var t=0;t<this.pages.length;t++)this.pages[t].baseTexture.dispose()},i}(),fi=function(){function i(t){this.index=0,this.lines=t.split(/\r\n|\r|\n/)}return i.prototype.readLine=function(){return this.index>=this.lines.length?null:this.lines[this.index++]},i.prototype.readEntry=function(t,e){if(e==null||(e=e.trim(),e.length==0))return 0;var r=e.indexOf(":");if(r==-1)return 0;t[0]=e.substr(0,r).trim();for(var a=1,n=r+1;;a++){var h=e.indexOf(",",n);if(h==-1)return t[a]=e.substr(n).trim(),a;if(t[a]=e.substr(n,h-n).trim(),n=h+1,a==4)return 4}},i}(),Oa=function(){function i(){this.minFilter=Lt.Nearest,this.magFilter=Lt.Nearest,this.uWrap=Kt.ClampToEdge,this.vWrap=Kt.ClampToEdge}return i.prototype.setFilters=function(){var t=this.baseTexture,e=this.minFilter;e==Lt.Linear?t.scaleMode=je.LINEAR:this.minFilter==Lt.Nearest?t.scaleMode=je.NEAREST:(t.mipmap=Qn.POW2,e==Lt.MipMapNearestNearest?t.scaleMode=je.NEAREST:t.scaleMode=je.LINEAR)},i}(),Da=function(i){Ie(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}return t}(xr),ui=function(i){return function(t){return i[0]=t,i[0]}}(new Float32Array(1)),ci=Math.fround||ui,ja=function(){function i(){this.array=new Array}return i.prototype.add=function(t){var e=this.contains(t);return this.array[t|0]=t|0,!e},i.prototype.contains=function(t){return this.array[t|0]!=null},i.prototype.remove=function(t){this.array[t|0]=void 0},i.prototype.clear=function(){this.array.length=0},i}(),za=function(){function i(){this.entries={},this.size=0}return i.prototype.add=function(t){var e=this.entries[t];return this.entries[t]=!0,e?!1:(this.size++,!0)},i.prototype.addAll=function(t){for(var e=this.size,r=0,a=t.length;r<a;r++)this.add(t[r]);return e!=this.size},i.prototype.contains=function(t){return this.entries[t]},i.prototype.clear=function(){this.entries={},this.size=0},i}(),G=function(){function i(t,e,r,a){t===void 0&&(t=0),e===void 0&&(e=0),r===void 0&&(r=0),a===void 0&&(a=0),this.r=t,this.g=e,this.b=r,this.a=a}return i.prototype.set=function(t,e,r,a){return this.r=t,this.g=e,this.b=r,this.a=a,this.clamp()},i.prototype.setFromColor=function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this.a=t.a,this},i.prototype.setFromString=function(t){return t=t.charAt(0)=="#"?t.substr(1):t,this.r=parseInt(t.substr(0,2),16)/255,this.g=parseInt(t.substr(2,2),16)/255,this.b=parseInt(t.substr(4,2),16)/255,this.a=t.length!=8?1:parseInt(t.substr(6,2),16)/255,this},i.prototype.add=function(t,e,r,a){return this.r+=t,this.g+=e,this.b+=r,this.a+=a,this.clamp()},i.prototype.clamp=function(){return this.r<0?this.r=0:this.r>1&&(this.r=1),this.g<0?this.g=0:this.g>1&&(this.g=1),this.b<0?this.b=0:this.b>1&&(this.b=1),this.a<0?this.a=0:this.a>1&&(this.a=1),this},i.rgba8888ToColor=function(t,e){t.r=((e&4278190080)>>>24)/255,t.g=((e&16711680)>>>16)/255,t.b=((e&65280)>>>8)/255,t.a=(e&255)/255},i.rgb888ToColor=function(t,e){t.r=((e&16711680)>>>16)/255,t.g=((e&65280)>>>8)/255,t.b=(e&255)/255},i.fromString=function(t){return new i().setFromString(t)},i.WHITE=new i(1,1,1,1),i.RED=new i(1,0,0,1),i.GREEN=new i(0,1,0,1),i.BLUE=new i(0,0,1,1),i.MAGENTA=new i(1,0,1,1),i}(),M=function(){function i(){}return i.clamp=function(t,e,r){return t<e?e:t>r?r:t},i.cosDeg=function(t){return Math.cos(t*i.degRad)},i.sinDeg=function(t){return Math.sin(t*i.degRad)},i.signum=function(t){return t>0?1:t<0?-1:0},i.toInt=function(t){return t>0?Math.floor(t):Math.ceil(t)},i.cbrt=function(t){var e=Math.pow(Math.abs(t),.3333333333333333);return t<0?-e:e},i.randomTriangular=function(t,e){return i.randomTriangularWith(t,e,(t+e)*.5)},i.randomTriangularWith=function(t,e,r){var a=Math.random(),n=e-t;return a<=(r-t)/n?t+Math.sqrt(a*n*(r-t)):e-Math.sqrt((1-a)*n*(e-r))},i.isPowerOfTwo=function(t){return t&&(t&t-1)===0},i.PI=3.1415927,i.PI2=i.PI*2,i.radiansToDegrees=180/i.PI,i.radDeg=i.radiansToDegrees,i.degreesToRadians=i.PI/180,i.degRad=i.degreesToRadians,i}(),vi=function(){function i(){}return i.prototype.apply=function(t,e,r){return t+(e-t)*this.applyInternal(r)},i}(),di=function(i){Ie(t,i);function t(e){var r=i.call(this)||this;return r.power=2,r.power=e,r}return t.prototype.applyInternal=function(e){return e<=.5?Math.pow(e*2,this.power)/2:Math.pow((e-1)*2,this.power)/(this.power%2==0?-2:2)+1},t}(vi),Za=function(i){Ie(t,i);function t(e){return i.call(this,e)||this}return t.prototype.applyInternal=function(e){return Math.pow(e-1,this.power)*(this.power%2==0?-1:1)+1},t}(di),Y=function(){function i(){}return i.arrayCopy=function(t,e,r,a,n){for(var h=e,f=a;h<e+n;h++,f++)r[f]=t[h]},i.arrayFill=function(t,e,r,a){for(var n=e;n<r;n++)t[n]=a},i.setArraySize=function(t,e,r){r===void 0&&(r=0);var a=t.length;if(a==e)return t;if(t.length=e,a<e)for(var n=a;n<e;n++)t[n]=r;return t},i.ensureArrayCapacity=function(t,e,r){return r===void 0&&(r=0),t.length>=e?t:i.setArraySize(t,e,r)},i.newArray=function(t,e){for(var r=new Array(t),a=0;a<t;a++)r[a]=e;return r},i.newFloatArray=function(t){if(i.SUPPORTS_TYPED_ARRAYS)return new Float32Array(t);for(var e=new Array(t),r=0;r<e.length;r++)e[r]=0;return e},i.newShortArray=function(t){if(i.SUPPORTS_TYPED_ARRAYS)return new Int16Array(t);for(var e=new Array(t),r=0;r<e.length;r++)e[r]=0;return e},i.toFloatArray=function(t){return i.SUPPORTS_TYPED_ARRAYS?new Float32Array(t):t},i.toSinglePrecision=function(t){return i.SUPPORTS_TYPED_ARRAYS?ci(t):t},i.webkit602BugfixHelper=function(t,e){},i.contains=function(t,e,r){for(var a=0;a<t.length;a++)if(t[a]==e)return!0;return!1},i.enumValue=function(t,e){return t[e[0].toUpperCase()+e.slice(1)]},i.SUPPORTS_TYPED_ARRAYS=typeof Float32Array<"u",i}(),ms=function(){function i(){}return i.logBones=function(t){for(var e=0;e<t.bones.length;e++){var r=t.bones[e],a=r.matrix;console.log(r.data.name+", "+a.a+", "+a.b+", "+a.c+", "+a.d+", "+a.tx+", "+a.ty)}},i}(),rr=function(){function i(t){this.items=new Array,this.instantiator=t}return i.prototype.obtain=function(){return this.items.length>0?this.items.pop():this.instantiator()},i.prototype.free=function(t){t.reset&&t.reset(),this.items.push(t)},i.prototype.freeAll=function(t){for(var e=0;e<t.length;e++)this.free(t[e])},i.prototype.clear=function(){this.items.length=0},i}(),Be=function(){function i(t,e){t===void 0&&(t=0),e===void 0&&(e=0),this.x=t,this.y=e}return i.prototype.set=function(t,e){return this.x=t,this.y=e,this},i.prototype.length=function(){var t=this.x,e=this.y;return Math.sqrt(t*t+e*e)},i.prototype.normalize=function(){var t=this.length();return t!=0&&(this.x/=t,this.y/=t),this},i}(),ys=function(){function i(){this.maxDelta=.064,this.framesPerSecond=0,this.delta=0,this.totalTime=0,this.lastTime=Date.now()/1e3,this.frameCount=0,this.frameTime=0}return i.prototype.update=function(){var t=Date.now()/1e3;this.delta=t-this.lastTime,this.frameTime+=this.delta,this.totalTime+=this.delta,this.delta>this.maxDelta&&(this.delta=this.maxDelta),this.lastTime=t,this.frameCount++,this.frameTime>1&&(this.framesPerSecond=this.frameCount/this.frameTime,this.frameTime=0,this.frameCount=0)},i}(),ws=function(){function i(t){t===void 0&&(t=32),this.addedValues=0,this.lastValue=0,this.mean=0,this.dirty=!0,this.values=new Array(t)}return i.prototype.hasEnoughData=function(){return this.addedValues>=this.values.length},i.prototype.addValue=function(t){this.addedValues<this.values.length&&this.addedValues++,this.values[this.lastValue++]=t,this.lastValue>this.values.length-1&&(this.lastValue=0),this.dirty=!0},i.prototype.getMean=function(){if(this.hasEnoughData()){if(this.dirty){for(var t=0,e=0;e<this.values.length;e++)t+=this.values[e];this.mean=t/this.values.length,this.dirty=!1}return this.mean}return 0},i}(),ar=function(){function i(){this.minX=0,this.minY=0,this.maxX=0,this.maxY=0,this.boundingBoxes=new Array,this.polygons=new Array,this.polygonPool=new rr(function(){return Y.newFloatArray(16)})}return i.prototype.update=function(t,e){if(!t)throw new Error("skeleton cannot be null.");var r=this.boundingBoxes,a=this.polygons,n=this.polygonPool,h=t.slots,f=h.length;r.length=0,n.freeAll(a),a.length=0;for(var c=0;c<f;c++){var o=h[c];if(o.bone.active){var s=o.getAttachment();if(s!=null&&s.type===et.BoundingBox){var l=s;r.push(l);var u=n.obtain();u.length!=l.worldVerticesLength&&(u=Y.newFloatArray(l.worldVerticesLength)),a.push(u),l.computeWorldVertices(o,0,l.worldVerticesLength,u,0,2)}}}e?this.aabbCompute():(this.minX=Number.POSITIVE_INFINITY,this.minY=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.maxY=Number.NEGATIVE_INFINITY)},i.prototype.aabbCompute=function(){for(var t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY,a=Number.NEGATIVE_INFINITY,n=this.polygons,h=0,f=n.length;h<f;h++)for(var c=n[h],o=c,s=0,l=c.length;s<l;s+=2){var u=o[s],d=o[s+1];t=Math.min(t,u),e=Math.min(e,d),r=Math.max(r,u),a=Math.max(a,d)}this.minX=t,this.minY=e,this.maxX=r,this.maxY=a},i.prototype.aabbContainsPoint=function(t,e){return t>=this.minX&&t<=this.maxX&&e>=this.minY&&e<=this.maxY},i.prototype.aabbIntersectsSegment=function(t,e,r,a){var n=this.minX,h=this.minY,f=this.maxX,c=this.maxY;if(t<=n&&r<=n||e<=h&&a<=h||t>=f&&r>=f||e>=c&&a>=c)return!1;var o=(a-e)/(r-t),s=o*(n-t)+e;if(s>h&&s<c||(s=o*(f-t)+e,s>h&&s<c))return!0;var l=(h-e)/o+t;return l>n&&l<f||(l=(c-e)/o+t,l>n&&l<f)},i.prototype.aabbIntersectsSkeleton=function(t){return this.minX<t.maxX&&this.maxX>t.minX&&this.minY<t.maxY&&this.maxY>t.minY},i.prototype.containsPoint=function(t,e){for(var r=this.polygons,a=0,n=r.length;a<n;a++)if(this.containsPointPolygon(r[a],t,e))return this.boundingBoxes[a];return null},i.prototype.containsPointPolygon=function(t,e,r){for(var a=t,n=t.length,h=n-2,f=!1,c=0;c<n;c+=2){var o=a[c+1],s=a[h+1];if(o<r&&s>=r||s<r&&o>=r){var l=a[c];l+(r-o)/(s-o)*(a[h]-l)<e&&(f=!f)}h=c}return f},i.prototype.intersectsSegment=function(t,e,r,a){for(var n=this.polygons,h=0,f=n.length;h<f;h++)if(this.intersectsSegmentPolygon(n[h],t,e,r,a))return this.boundingBoxes[h];return null},i.prototype.intersectsSegmentPolygon=function(t,e,r,a,n){for(var h=t,f=t.length,c=e-a,o=r-n,s=e*n-r*a,l=h[f-2],u=h[f-1],d=0;d<f;d+=2){var v=h[d],p=h[d+1],y=l*p-u*v,g=l-v,m=u-p,w=c*m-o*g,x=(s*g-c*y)/w;if((x>=l&&x<=v||x>=v&&x<=l)&&(x>=e&&x<=a||x>=a&&x<=e)){var E=(s*m-o*y)/w;if((E>=u&&E<=p||E>=p&&E<=u)&&(E>=r&&E<=n||E>=n&&E<=r))return!0}l=v,u=p}return!1},i.prototype.getPolygon=function(t){if(!t)throw new Error("boundingBox cannot be null.");var e=this.boundingBoxes.indexOf(t);return e==-1?null:this.polygons[e]},i.prototype.getWidth=function(){return this.maxX-this.minX},i.prototype.getHeight=function(){return this.maxY-this.minY},i}(),Ht={yDown:!0,FAIL_ON_NON_EXISTING_SKIN:!1,GLOBAL_AUTO_UPDATE:!0,GLOBAL_DELAY_LIMIT:0},ve=[0,0,0],pi=function(i){Ie(t,i);function t(){var e=i!==null&&i.apply(this,arguments)||this;return e.region=null,e.attachment=null,e}return t}(ii),gi=function(i){Ie(t,i);function t(e,r,a,n,h){var f=i.call(this,e,r,a,n,h)||this;return f.region=null,f.attachment=null,f}return t}(si),$e=function(i){Ie(t,i);function t(e){var r=i.call(this)||this;if(!e)throw new Error("The spineData param is required.");if(typeof e=="string")throw new Error('spineData param cant be string. Please use spine.Spine.fromAtlas("YOUR_RESOURCE_NAME") from now on.');r.spineData=e,r.createSkeleton(e),r.slotContainers=[],r.tempClipContainers=[];for(var a=0,n=r.skeleton.slots.length;a<n;a++){var h=r.skeleton.slots[a],f=h.getAttachment(),c=r.newContainer();if(r.slotContainers.push(c),r.addChild(c),r.tempClipContainers.push(null),!!f)if(f.type===et.Region){var o=f.name,s=r.createSprite(h,f,o);h.currentSprite=s,h.currentSpriteName=o,c.addChild(s)}else if(f.type===et.Mesh){var l=r.createMesh(h,f);h.currentMesh=l,h.currentMeshId=f.id,h.currentMeshName=f.name,c.addChild(l)}else f.type===et.Clipping&&(r.createGraphics(h,f),c.addChild(h.clippingContainer),c.addChild(h.currentGraphics))}return r.tintRgb=new Float32Array([1,1,1]),r.autoUpdate=!0,r.visible=!0,r}return Object.defineProperty(t.prototype,"debug",{get:function(){return this._debug},set:function(e){var r;e!=this._debug&&((r=this._debug)===null||r===void 0||r.unregisterSpine(this),e==null||e.registerSpine(this),this._debug=e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(e){e!==this._autoUpdate&&(this._autoUpdate=e,this.updateTransform=e?t.prototype.autoUpdateTransform:Te.prototype.updateTransform)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tint",{get:function(){return vr(this.tintRgb)},set:function(e){this.tintRgb=ti(e,this.tintRgb)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"delayLimit",{get:function(){var e=typeof this.localDelayLimit<"u"?this.localDelayLimit:Ht.GLOBAL_DELAY_LIMIT;return e||Number.MAX_VALUE},enumerable:!1,configurable:!0}),t.prototype.update=function(e){var r,a=this.delayLimit;if(e>a&&(e=a),this.state.update(e),this.state.apply(this.skeleton),!!this.skeleton){this.skeleton.updateWorldTransform();var n=this.skeleton.slots,h=this.color,f=null,c=null;h?(f=h.light,c=h.dark):f=this.tintRgb;for(var o=0,s=n.length;o<s;o++){var l=n[o],u=l.getAttachment(),d=this.slotContainers[o];if(!u){d.visible=!1;continue}var v=null;u.sequence&&u.sequence.apply(l,u);var p=u.region,y=u.color;switch(u!=null&&u.type){case et.Region:var g=d.transform;if(g.setFromMatrix(l.bone.matrix),p=u.region,l.currentMesh&&(l.currentMesh.visible=!1,l.currentMesh=null,l.currentMeshId=void 0,l.currentMeshName=void 0),!p){l.currentSprite&&(l.currentSprite.renderable=!1);break}if(!l.currentSpriteName||l.currentSpriteName!==u.name){var m=u.name;if(l.currentSprite&&(l.currentSprite.visible=!1),l.sprites=l.sprites||{},l.sprites[m]!==void 0)l.sprites[m].visible=!0;else{var w=this.createSprite(l,u,m);d.addChild(w)}l.currentSprite=l.sprites[m],l.currentSpriteName=m}l.currentSprite.renderable=!0,l.hackRegion||this.setSpriteRegion(u,l.currentSprite,p),l.currentSprite.color?v=l.currentSprite.color:(ve[0]=f[0]*l.color.r*y.r,ve[1]=f[1]*l.color.g*y.g,ve[2]=f[2]*l.color.b*y.b,l.currentSprite.tint=vr(ve)),l.currentSprite.blendMode=l.blendMode;break;case et.Mesh:if(l.currentSprite){l.currentSprite.visible=!1,l.currentSprite=null,l.currentSpriteName=void 0;var x=new ei;x._parentID=-1,x._worldID=d.transform._worldID,d.transform=x}if(!p){l.currentMesh&&(l.currentMesh.renderable=!1);break}var E=u.id;if(l.currentMeshId===void 0||l.currentMeshId!==E){var S=E;if(l.currentMesh&&(l.currentMesh.visible=!1),l.meshes=l.meshes||{},l.meshes[S]!==void 0)l.meshes[S].visible=!0;else{var A=this.createMesh(l,u);d.addChild(A)}l.currentMesh=l.meshes[S],l.currentMeshName=u.name,l.currentMeshId=S}l.currentMesh.renderable=!0,u.computeWorldVerticesOld(l,l.currentMesh.vertices),l.currentMesh.color?v=l.currentMesh.color:(ve[0]=f[0]*l.color.r*y.r,ve[1]=f[1]*l.color.g*y.g,ve[2]=f[2]*l.color.b*y.b,l.currentMesh.tint=vr(ve)),l.currentMesh.blendMode=l.blendMode,l.hackRegion||this.setMeshRegion(u,l.currentMesh,p);break;case et.Clipping:l.currentGraphics||(this.createGraphics(l,u),d.addChild(l.clippingContainer),d.addChild(l.currentGraphics)),this.updateGraphics(l,u),d.alpha=1,d.visible=!0;continue;default:d.visible=!1;continue}if(d.visible=!0,v){var T=l.color.r*y.r,C=l.color.g*y.g,I=l.color.b*y.b;v.setLight(f[0]*T+c[0]*(1-T),f[1]*C+c[1]*(1-C),f[2]*I+c[2]*(1-I)),l.darkColor?(T=l.darkColor.r,C=l.darkColor.g,I=l.darkColor.b):(T=0,C=0,I=0),v.setDark(f[0]*T+c[0]*(1-T),f[1]*C+c[1]*(1-C),f[2]*I+c[2]*(1-I))}d.alpha=l.color.a}for(var P=this.skeleton.drawOrder,R=null,V=null,o=0,s=P.length;o<s;o++){var l=n[P[o].data.index],d=this.slotContainers[P[o].data.index];if(V||d.parent!==null&&d.parent!==this&&(d.parent.removeChild(d),d.parent=this),l.currentGraphics&&l.getAttachment())V=l.clippingContainer,R=l.getAttachment(),V.children.length=0,this.children[o]=d,R.endSlot===l.data&&(R.endSlot=null);else if(V){var k=this.tempClipContainers[o];k||(k=this.tempClipContainers[o]=this.newContainer(),k.visible=!1),this.children[o]=k,d.parent=null,V.addChild(d),R.endSlot==l.data&&(V.renderable=!0,V=null,R=null)}else this.children[o]=d}(r=this._debug)===null||r===void 0||r.renderDebug(this)}},t.prototype.setSpriteRegion=function(e,r,a){r.attachment===e&&r.region===a||(r.region=a,r.attachment=e,r.texture=a.texture,r.rotation=e.rotation*M.degRad,r.position.x=e.x,r.position.y=e.y,r.alpha=e.color.a,a.size?(r.scale.x=a.size.width/a.originalWidth,r.scale.y=-a.size.height/a.originalHeight):(r.scale.x=e.scaleX*e.width/a.originalWidth,r.scale.y=-e.scaleY*e.height/a.originalHeight))},t.prototype.setMeshRegion=function(e,r,a){r.attachment===e&&r.region===a||(r.region=a,r.attachment=e,r.texture=a.texture,a.texture.updateUvs(),r.uvBuffer.update(e.regionUVs))},t.prototype.autoUpdateTransform=function(){if(Ht.GLOBAL_AUTO_UPDATE){this.lastTime=this.lastTime||Date.now();var e=(Date.now()-this.lastTime)*.001;this.lastTime=Date.now(),this.update(e)}else this.lastTime=0;Te.prototype.updateTransform.call(this)},t.prototype.createSprite=function(e,r,a){var n=r.region;e.hackAttachment===r&&(n=e.hackRegion);var h=n?n.texture:null,f=this.newSprite(h);return f.anchor.set(.5),n&&this.setSpriteRegion(r,f,r.region),e.sprites=e.sprites||{},e.sprites[a]=f,f},t.prototype.createMesh=function(e,r){var a=r.region;e.hackAttachment===r&&(a=e.hackRegion,e.hackAttachment=null,e.hackRegion=null);var n=this.newMesh(a?a.texture:null,new Float32Array(r.regionUVs.length),r.regionUVs,new Uint16Array(r.triangles),ri.TRIANGLES);return typeof n._canvasPadding<"u"&&(n._canvasPadding=1.5),n.alpha=r.color.a,n.region=r.region,a&&this.setMeshRegion(r,n,a),e.meshes=e.meshes||{},e.meshes[r.id]=n,n},t.prototype.createGraphics=function(e,r){var a=this.newGraphics(),n=new ai([]);return a.clear(),a.beginFill(16777215,1),a.drawPolygon(n),a.renderable=!1,e.currentGraphics=a,e.clippingContainer=this.newContainer(),e.clippingContainer.mask=e.currentGraphics,a},t.prototype.updateGraphics=function(e,r){var a=e.currentGraphics.geometry,n=a.graphicsData[0].shape.points,h=r.worldVerticesLength;n.length=h,r.computeWorldVertices(e,0,h,n,0,2),a.invalidate()},t.prototype.hackTextureBySlotIndex=function(e,r,a){r===void 0&&(r=null),a===void 0&&(a=null);var n=this.skeleton.slots[e];if(!n)return!1;var h=n.getAttachment(),f=h.region;return r?(f=new xr,f.texture=r,f.size=a,n.hackRegion=f,n.hackAttachment=h):(n.hackRegion=null,n.hackAttachment=null),n.currentSprite?this.setSpriteRegion(h,n.currentSprite,f):n.currentMesh&&this.setMeshRegion(h,n.currentMesh,f),!0},t.prototype.hackTextureBySlotName=function(e,r,a){r===void 0&&(r=null),a===void 0&&(a=null);var n=this.skeleton.findSlotIndex(e);return n==-1?!1:this.hackTextureBySlotIndex(n,r,a)},t.prototype.hackTextureAttachment=function(e,r,a,n){n===void 0&&(n=null);var h=this.skeleton.findSlotIndex(e),f=this.skeleton.getAttachmentByName(e,r);f.region.texture=a;var c=this.skeleton.slots[h];if(!c)return!1;var o=c.getAttachment();if(r===o.name){var s=f.region;return a?(s=new xr,s.texture=a,s.size=n,c.hackRegion=s,c.hackAttachment=o):(c.hackRegion=null,c.hackAttachment=null),c.currentSprite&&c.currentSprite.region!=s?(this.setSpriteRegion(o,c.currentSprite,s),c.currentSprite.region=s):c.currentMesh&&c.currentMesh.region!=s&&this.setMeshRegion(o,c.currentMesh,s),!0}return!1},t.prototype.newContainer=function(){return new Te},t.prototype.newSprite=function(e){return new pi(e)},t.prototype.newGraphics=function(){return new Gt},t.prototype.newMesh=function(e,r,a,n,h){return new gi(e,r,a,n,h)},t.prototype.transformHack=function(){return 1},t.prototype.hackAttachmentGroups=function(e,r,a){if(e){for(var n=[],h=[],f=0,c=this.skeleton.slots.length;f<c;f++){var o=this.skeleton.slots[f],s=o.currentSpriteName||o.currentMeshName||"",l=o.currentSprite||o.currentMesh;s.endsWith(e)?(l.parentGroup=r,h.push(l)):a&&l&&(l.parentGroup=a,n.push(l))}return[n,h]}},t.prototype.destroy=function(e){this.debug=null;for(var r=0,a=this.skeleton.slots.length;r<a;r++){var n=this.skeleton.slots[r];for(var h in n.meshes)n.meshes[h].destroy(e);n.meshes=null;for(var f in n.sprites)n.sprites[f].destroy(e);n.sprites=null}for(var r=0,a=this.slotContainers.length;r<a;r++)this.slotContainers[r].destroy(e);this.spineData=null,this.skeleton=null,this.slotContainers=null,this.stateData=null,this.state=null,this.tempClipContainers=null,i.prototype.destroy.call(this,e)},t.clippingPolygon=[],t}(Te);Object.defineProperty($e.prototype,"visible",{get:function(){return this._visible},set:function(i){i!==this._visible&&(this._visible=i,i&&(this.lastTime=0))}});var xs=function(){function i(){this.registeredSpines=new Map,this.drawDebug=!0,this.drawMeshHull=!0,this.drawMeshTriangles=!0,this.drawBones=!0,this.drawPaths=!0,this.drawBoundingBoxes=!0,this.drawClipping=!0,this.drawRegionAttachments=!0,this.lineWidth=1,this.regionAttachmentsColor=30975,this.meshHullColor=30975,this.meshTrianglesColor=16763904,this.clippingPolygonColor=16711935,this.boundingBoxesRectColor=65280,this.boundingBoxesPolygonColor=65280,this.boundingBoxesCircleColor=65280,this.pathsCurveColor=16711680,this.pathsLineColor=16711935,this.skeletonXYColor=16711680,this.bonesColor=61132}return i.prototype.registerSpine=function(t){this.registeredSpines.has(t)&&console.warn("SpineDebugRenderer.registerSpine() - this spine is already registered!",t);var e={parentDebugContainer:new Te,bones:new Te,skeletonXY:new Gt,regionAttachmentsShape:new Gt,meshTrianglesLine:new Gt,meshHullLine:new Gt,clippingPolygon:new Gt,boundingBoxesRect:new Gt,boundingBoxesCircle:new Gt,boundingBoxesPolygon:new Gt,pathsCurve:new Gt,pathsLine:new Gt};e.parentDebugContainer.addChild(e.bones),e.parentDebugContainer.addChild(e.skeletonXY),e.parentDebugContainer.addChild(e.regionAttachmentsShape),e.parentDebugContainer.addChild(e.meshTrianglesLine),e.parentDebugContainer.addChild(e.meshHullLine),e.parentDebugContainer.addChild(e.clippingPolygon),e.parentDebugContainer.addChild(e.boundingBoxesRect),e.parentDebugContainer.addChild(e.boundingBoxesCircle),e.parentDebugContainer.addChild(e.boundingBoxesPolygon),e.parentDebugContainer.addChild(e.pathsCurve),e.parentDebugContainer.addChild(e.pathsLine),t.addChild(e.parentDebugContainer),this.registeredSpines.set(t,e)},i.prototype.renderDebug=function(t){this.registeredSpines.has(t)||this.registerSpine(t);var e=this.registeredSpines.get(t);e.skeletonXY.clear(),e.regionAttachmentsShape.clear(),e.meshTrianglesLine.clear(),e.meshHullLine.clear(),e.clippingPolygon.clear(),e.boundingBoxesRect.clear(),e.boundingBoxesCircle.clear(),e.boundingBoxesPolygon.clear(),e.pathsCurve.clear(),e.pathsLine.clear();for(var r=e.bones.children.length;r>0;r--)e.bones.children[r-1].destroy({children:!0,texture:!0,baseTexture:!0});var a=t.scale.x||t.scale.y||1,n=this.lineWidth/a;this.drawBones&&this.drawBonesFunc(t,e,n,a),this.drawPaths&&this.drawPathsFunc(t,e,n),this.drawBoundingBoxes&&this.drawBoundingBoxesFunc(t,e,n),this.drawClipping&&this.drawClippingFunc(t,e,n),(this.drawMeshHull||this.drawMeshTriangles)&&this.drawMeshHullAndMeshTriangles(t,e,n),this.drawRegionAttachments&&this.drawRegionAttachmentsFunc(t,e,n)},i.prototype.drawBonesFunc=function(t,e,r,a){var n=t.skeleton,h=n.x,f=n.y,c=n.bones;e.skeletonXY.lineStyle(r,this.skeletonXYColor,1);for(var o=0,s=c.length;o<s;o++){var l=c[o],u=l.data.length,d=h+l.matrix.tx,v=f+l.matrix.ty,p=h+u*l.matrix.a+l.matrix.tx,y=f+u*l.matrix.b+l.matrix.ty;if(!(l.data.name==="root"||l.data.parent===null)){var g=Math.abs(d-p),m=Math.abs(v-y),w=Math.pow(g,2),x=m,E=Math.pow(m,2),S=Math.sqrt(w+E),A=Math.pow(S,2),T=Math.PI/180,C=Math.acos((A+E-w)/(2*x*S))||0;if(S!==0){var I=new Gt;e.bones.addChild(I);var P=S/50/a;I.beginFill(this.bonesColor,1),I.drawPolygon(0,0,0-P,S-P*3,0,S-P,0+P,S-P*3),I.endFill(),I.x=d,I.y=v,I.pivot.y=S;var R=0;d<p&&v<y?R=-C+180*T:d>p&&v<y?R=180*T+C:d>p&&v>y?R=-C:d<p&&v>y?R=C:v===y&&d<p?R=90*T:v===y&&d>p?R=-90*T:d===p&&v<y?R=180*T:d===p&&v>y&&(R=0),I.rotation=R,I.lineStyle(r+P/2.4,this.bonesColor,1),I.beginFill(0,.6),I.drawCircle(0,S,P*1.2),I.endFill()}}}var V=r*3;e.skeletonXY.moveTo(h-V,f-V),e.skeletonXY.lineTo(h+V,f+V),e.skeletonXY.moveTo(h+V,f-V),e.skeletonXY.lineTo(h-V,f+V)},i.prototype.drawRegionAttachmentsFunc=function(t,e,r){var a=t.skeleton,n=a.slots;e.regionAttachmentsShape.lineStyle(r,this.regionAttachmentsColor,1);for(var h=0,f=n.length;h<f;h++){var c=n[h],o=c.getAttachment();if(!(o==null||o.type!==et.Region)){var s=o,l=new Float32Array(8);s==null||s.updateOffset(),s.computeWorldVertices(c,l,0,2),e.regionAttachmentsShape.drawPolygon(Array.from(l.slice(0,8)))}}},i.prototype.drawMeshHullAndMeshTriangles=function(t,e,r){var a=t.skeleton,n=a.slots;e.meshHullLine.lineStyle(r,this.meshHullColor,1),e.meshTrianglesLine.lineStyle(r,this.meshTrianglesColor,1);for(var h=0,f=n.length;h<f;h++){var c=n[h];if(c.bone.active){var o=c.getAttachment();if(!(o==null||o.type!==et.Mesh)){var s=o,l=new Float32Array(s.worldVerticesLength),u=s.triangles,d=s.hullLength;if(s.computeWorldVertices(c,0,s.worldVerticesLength,l,0,2),this.drawMeshTriangles)for(var v=0,p=u.length;v<p;v+=3){var y=u[v]*2,g=u[v+1]*2,m=u[v+2]*2;e.meshTrianglesLine.moveTo(l[y],l[y+1]),e.meshTrianglesLine.lineTo(l[g],l[g+1]),e.meshTrianglesLine.lineTo(l[m],l[m+1])}if(this.drawMeshHull&&d>0){d=(d>>1)*2;for(var w=l[d-2],x=l[d-1],E=0,S=d;E<S;E+=2){var A=l[E],T=l[E+1];e.meshHullLine.moveTo(A,T),e.meshHullLine.lineTo(w,x),w=A,x=T}}}}}},i.prototype.drawClippingFunc=function(t,e,r){var a=t.skeleton,n=a.slots;e.clippingPolygon.lineStyle(r,this.clippingPolygonColor,1);for(var h=0,f=n.length;h<f;h++){var c=n[h];if(c.bone.active){var o=c.getAttachment();if(!(o==null||o.type!==et.Clipping)){var s=o,l=s.worldVerticesLength,u=new Float32Array(l);s.computeWorldVertices(c,0,l,u,0,2),e.clippingPolygon.drawPolygon(Array.from(u))}}}},i.prototype.drawBoundingBoxesFunc=function(t,e,r){var a=this;e.boundingBoxesRect.lineStyle(r,this.boundingBoxesRectColor,5);var n=new ar;n.update(t.skeleton,!0),e.boundingBoxesRect.drawRect(n.minX,n.minY,n.getWidth(),n.getHeight());for(var h=n.polygons,f=function(l,u,d){if(e.boundingBoxesPolygon.lineStyle(r,a.boundingBoxesPolygonColor,1),e.boundingBoxesPolygon.beginFill(a.boundingBoxesPolygonColor,.1),d<3)throw new Error("Polygon must contain at least 3 vertices");for(var v=[],p=r*2,y=0,g=l.length;y<g;y+=2){var m=l[y],w=l[y+1];e.boundingBoxesCircle.lineStyle(0),e.boundingBoxesCircle.beginFill(a.boundingBoxesCircleColor),e.boundingBoxesCircle.drawCircle(m,w,p),e.boundingBoxesCircle.endFill(),v.push(m,w)}e.boundingBoxesPolygon.drawPolygon(v),e.boundingBoxesPolygon.endFill()},c=0,o=h.length;c<o;c++){var s=h[c];f(s,0,s.length)}},i.prototype.drawPathsFunc=function(t,e,r){var a=t.skeleton,n=a.slots;e.pathsCurve.lineStyle(r,this.pathsCurveColor,1),e.pathsLine.lineStyle(r,this.pathsLineColor,1);for(var h=0,f=n.length;h<f;h++){var c=n[h];if(c.bone.active){var o=c.getAttachment();if(!(o==null||o.type!==et.Path)){var s=o,l=s.worldVerticesLength,u=new Float32Array(l);s.computeWorldVertices(c,0,l,u,0,2);var d=u[2],v=u[3],p=0,y=0;if(s.closed){var g=u[0],m=u[1],w=u[l-2],x=u[l-1];p=u[l-4],y=u[l-3],e.pathsCurve.moveTo(d,v),e.pathsCurve.bezierCurveTo(g,m,w,x,p,y),e.pathsLine.moveTo(d,v),e.pathsLine.lineTo(g,m),e.pathsLine.moveTo(p,y),e.pathsLine.lineTo(w,x)}l-=4;for(var E=4;E<l;E+=6){var g=u[E],m=u[E+1],w=u[E+2],x=u[E+3];p=u[E+4],y=u[E+5],e.pathsCurve.moveTo(d,v),e.pathsCurve.bezierCurveTo(g,m,w,x,p,y),e.pathsLine.moveTo(d,v),e.pathsLine.lineTo(g,m),e.pathsLine.moveTo(p,y),e.pathsLine.lineTo(w,x),d=p,v=y}}}}},i.prototype.unregisterSpine=function(t){this.registeredSpines.has(t)||console.warn("SpineDebugRenderer.unregisterSpine() - spine is not registered, can't unregister!",t);var e=this.registeredSpines.get(t);e.parentDebugContainer.destroy({baseTexture:!0,children:!0,texture:!0}),this.registeredSpines.delete(t)},i}();function mi(i){return i.type===Ye.TYPE.JSON}function yi(i){return i.xhrType===Ye.XHR_RESPONSE_TYPE.BUFFER}Ye.setExtensionXhrType("skel",Ye.XHR_RESPONSE_TYPE.BUFFER);var wi=function(){function i(){}return i.prototype.genMiddleware=function(){var t=this;return{use:function(e,r){if(!e.data)return r();var a=mi(e)&&e.data.bones,n=yi(e)&&(e.extension==="skel"||e.metadata&&e.metadata.spineMetadata);if(!a&&!n)return r();var h=null,f=e.data;a?h=t.createJsonParser():(h=t.createBinaryParser(),e.data instanceof ArrayBuffer&&(f=new Uint8Array(e.data)));var c=e.metadata||{},o=c?c.spineSkeletonScale:null;o&&(h.scale=o);var s=c.spineAtlas;if(s===!1)return r();if(s&&s.pages)return t.parseData(e,h,s,f),r();var l=c.spineAtlasSuffix||".atlas",u=e.url,d=u.indexOf("?");d>0&&(u=u.substr(0,d)),u=u.substr(0,u.lastIndexOf("."))+l,c.spineAtlasFile&&(u=c.spineAtlasFile),u=u.replace(this.baseUrl,"");var v={crossOrigin:e.crossOrigin,xhrType:Ye.XHR_RESPONSE_TYPE.TEXT,metadata:c.spineMetadata||null,parentResource:e},p={crossOrigin:e.crossOrigin,metadata:c.imageMetadata||null,parentResource:e},y=e.url.substr(0,e.url.lastIndexOf("/")+1);y=y.replace(this.baseUrl,"");var g=c.imageNamePrefix||e.name+"_atlas_page_",m=c.images?La(c.images):c.image?La({default:c.image}):c.imageLoader?c.imageLoader(this,g,y,p):xi(this,g,y,p);function w(x){new li(x,m,function(E){E&&t.parseData(e,h,E,f),r()})}c.atlasRawData?w(c.atlasRawData):this.add(e.name+"_atlas",u,v,function(x){x.error?r():w(x.data)})}}},i}();function xi(i,t,e,r){return e&&e.lastIndexOf("/")!==e.length-1&&(e+="/"),function(a,n){var h=t+a,f=e+a,c=i.resources[h];if(c){var o=function(){n(c.texture.baseTexture)};c.texture?o():c.onAfterMiddleware.add(o)}else i.add(h,f,r,function(s){s.error?n(null):(a.indexOf("-pma.")>=0&&(s.texture.baseTexture.alphaMode=Ga.PMA),n(s.texture.baseTexture))})}}function La(i){return function(t,e){var r=i[t]||i.default;r&&r.baseTexture?e(r.baseTexture):e(r)}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Er=function(i,t){return Er=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])},Er(i,t)};function dt(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Er(i,t);function e(){this.constructor=i}i.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var Xr=function(){function i(t){if(t==null)throw new Error("name cannot be null.");this.name=t}return i}(),xe=function(i){dt(t,i);function t(e){var r=i.call(this,e)||this;return r.id=(t.nextID++&65535)<<11,r.worldVerticesLength=0,r.deformAttachment=r,r}return t.prototype.computeWorldVerticesOld=function(e,r){this.computeWorldVertices(e,0,this.worldVerticesLength,r,0,2)},t.prototype.computeWorldVertices=function(e,r,a,n,h,f){a=h+(a>>1)*f;var c=e.bone.skeleton,o=e.deform,s=this.vertices,l=this.bones;if(l==null){o.length>0&&(s=o);for(var u=e.bone.matrix,d=u.tx,v=u.ty,p=u.a,y=u.c,g=u.b,m=u.d,w=r,x=h;x<a;w+=2,x+=f){var E=s[w],S=s[w+1];n[x]=E*p+S*y+d,n[x+1]=E*g+S*m+v}return}for(var A=0,T=0,C=0;C<r;C+=2){var I=l[A];A+=I+1,T+=I}var P=c.bones;if(o.length==0)for(var x=h,y=T*3;x<a;x+=f){var R=0,V=0,I=l[A++];for(I+=A;A<I;A++,y+=3){var u=P[l[A]].matrix,E=s[y],S=s[y+1],k=s[y+2];R+=(E*u.a+S*u.c+u.tx)*k,V+=(E*u.b+S*u.d+u.ty)*k}n[x]=R,n[x+1]=V}else for(var B=o,x=h,y=T*3,D=T<<1;x<a;x+=f){var R=0,V=0,I=l[A++];for(I+=A;A<I;A++,y+=3,D+=2){var u=P[l[A]].matrix,E=s[y]+B[D],S=s[y+1]+B[D+1],k=s[y+2];R+=(E*u.a+S*u.c+u.tx)*k,V+=(E*u.b+S*u.d+u.ty)*k}n[x]=R,n[x+1]=V}},t.prototype.copyTo=function(e){this.bones!=null?(e.bones=new Array(this.bones.length),Y.arrayCopy(this.bones,0,e.bones,0,this.bones.length)):e.bones=null,this.vertices!=null?(e.vertices=Y.newFloatArray(this.vertices.length),Y.arrayCopy(this.vertices,0,e.vertices,0,this.vertices.length)):e.vertices=null,e.worldVerticesLength=this.worldVerticesLength,e.deformAttachment=this.deformAttachment},t.nextID=0,t}(Xr),Ja=function(i){dt(t,i);function t(e){var r=i.call(this,e)||this;return r.type=et.BoundingBox,r.color=new G(1,1,1,1),r}return t.prototype.copy=function(){var e=new t(this.name);return this.copyTo(e),e.color.setFromColor(this.color),e},t}(xe),Ka=function(i){dt(t,i);function t(e){var r=i.call(this,e)||this;return r.type=et.Clipping,r.color=new G(.2275,.2275,.8078,1),r}return t.prototype.copy=function(){var e=new t(this.name);return this.copyTo(e),e.endSlot=this.endSlot,e.color.setFromColor(this.color),e},t}(xe),nr=function(i){dt(t,i);function t(e){var r=i.call(this,e)||this;return r.type=et.Mesh,r.color=new G(1,1,1,1),r.tempColor=new G(0,0,0,0),r}return t.prototype.getParentMesh=function(){return this.parentMesh},t.prototype.setParentMesh=function(e){this.parentMesh=e,e!=null&&(this.bones=e.bones,this.vertices=e.vertices,this.worldVerticesLength=e.worldVerticesLength,this.regionUVs=e.regionUVs,this.triangles=e.triangles,this.hullLength=e.hullLength,this.worldVerticesLength=e.worldVerticesLength)},t.prototype.copy=function(){if(this.parentMesh!=null)return this.newLinkedMesh();var e=new t(this.name);return e.region=this.region,e.path=this.path,e.color.setFromColor(this.color),this.copyTo(e),e.regionUVs=new Float32Array(this.regionUVs.length),Y.arrayCopy(this.regionUVs,0,e.regionUVs,0,this.regionUVs.length),e.triangles=new Array(this.triangles.length),Y.arrayCopy(this.triangles,0,e.triangles,0,this.triangles.length),e.hullLength=this.hullLength,this.edges!=null&&(e.edges=new Array(this.edges.length),Y.arrayCopy(this.edges,0,e.edges,0,this.edges.length)),e.width=this.width,e.height=this.height,e},t.prototype.newLinkedMesh=function(){var e=new t(this.name);return e.region=this.region,e.path=this.path,e.color.setFromColor(this.color),e.deformAttachment=this.deformAttachment,e.setParentMesh(this.parentMesh!=null?this.parentMesh:this),e},t}(xe),Xe=function(i){dt(t,i);function t(e){var r=i.call(this,e)||this;return r.type=et.Path,r.closed=!1,r.constantSpeed=!1,r.color=new G(1,1,1,1),r}return t.prototype.copy=function(){var e=new t(this.name);return this.copyTo(e),e.lengths=new Array(this.lengths.length),Y.arrayCopy(this.lengths,0,e.lengths,0,this.lengths.length),e.closed=closed,e.constantSpeed=this.constantSpeed,e.color.setFromColor(this.color),e},t}(xe),Qa=function(i){dt(t,i);function t(e){var r=i.call(this,e)||this;return r.type=et.Point,r.color=new G(.38,.94,0,1),r}return t.prototype.computeWorldPosition=function(e,r){var a=e.matrix;return r.x=this.x*a.a+this.y*a.c+e.worldX,r.y=this.x*a.b+this.y*a.d+e.worldY,r},t.prototype.computeWorldRotation=function(e){var r=e.matrix,a=M.cosDeg(this.rotation),n=M.sinDeg(this.rotation),h=a*r.a+n*r.c,f=a*r.b+n*r.d;return Math.atan2(f,h)*M.radDeg},t.prototype.copy=function(){var e=new t(this.name);return e.x=this.x,e.y=this.y,e.rotation=this.rotation,e.color.setFromColor(this.color),e},t}(xe),Nr=function(){function i(t,e){if(this.deform=new Array,t==null)throw new Error("data cannot be null.");if(e==null)throw new Error("bone cannot be null.");this.data=t,this.bone=e,this.color=new G,this.darkColor=t.darkColor==null?null:new G,this.setToSetupPose(),this.blendMode=this.data.blendMode}return i.prototype.getAttachment=function(){return this.attachment},i.prototype.setAttachment=function(t){this.attachment!=t&&(this.attachment=t,this.attachmentTime=this.bone.skeleton.time,this.deform.length=0)},i.prototype.setAttachmentTime=function(t){this.attachmentTime=this.bone.skeleton.time-t},i.prototype.getAttachmentTime=function(){return this.bone.skeleton.time-this.attachmentTime},i.prototype.setToSetupPose=function(){this.color.setFromColor(this.data.color),this.darkColor!=null&&this.darkColor.setFromColor(this.data.darkColor),this.data.attachmentName==null?this.attachment=null:(this.attachment=null,this.setAttachment(this.bone.skeleton.getAttachment(this.data.index,this.data.attachmentName)))},i}(),Or=function(i){dt(t,i);function t(e){var r=i.call(this,e)||this;return r.type=et.Region,r.x=0,r.y=0,r.scaleX=1,r.scaleY=1,r.rotation=0,r.width=0,r.height=0,r.color=new G(1,1,1,1),r.offset=Y.newFloatArray(8),r.uvs=Y.newFloatArray(8),r.tempColor=new G(1,1,1,1),r}return t.prototype.updateOffset=function(){var e=this.width/this.region.originalWidth*this.scaleX,r=this.height/this.region.originalHeight*this.scaleY,a=-this.width/2*this.scaleX+this.region.offsetX*e,n=-this.height/2*this.scaleY+this.region.offsetY*r,h=a+this.region.width*e,f=n+this.region.height*r,c=this.rotation*Math.PI/180,o=Math.cos(c),s=Math.sin(c),l=a*o+this.x,u=a*s,d=n*o+this.y,v=n*s,p=h*o+this.x,y=h*s,g=f*o+this.y,m=f*s,w=this.offset;w[t.OX1]=l-v,w[t.OY1]=d+u,w[t.OX2]=l-m,w[t.OY2]=g+u,w[t.OX3]=p-m,w[t.OY3]=g+y,w[t.OX4]=p-v,w[t.OY4]=d+y},t.prototype.setRegion=function(e){this.region=e;var r=this.uvs;e.rotate?(r[2]=e.u,r[3]=e.v2,r[4]=e.u,r[5]=e.v,r[6]=e.u2,r[7]=e.v,r[0]=e.u2,r[1]=e.v2):(r[0]=e.u,r[1]=e.v2,r[2]=e.u,r[3]=e.v,r[4]=e.u2,r[5]=e.v,r[6]=e.u2,r[7]=e.v2)},t.prototype.computeWorldVertices=function(e,r,a,n){var h=this.offset,f=e instanceof Nr?e.bone.matrix:e.matrix,c=f.tx,o=f.ty,s=f.a,l=f.c,u=f.b,d=f.d,v=0,p=0;v=h[t.OX1],p=h[t.OY1],r[a]=v*s+p*l+c,r[a+1]=v*u+p*d+o,a+=n,v=h[t.OX2],p=h[t.OY2],r[a]=v*s+p*l+c,r[a+1]=v*u+p*d+o,a+=n,v=h[t.OX3],p=h[t.OY3],r[a]=v*s+p*l+c,r[a+1]=v*u+p*d+o,a+=n,v=h[t.OX4],p=h[t.OY4],r[a]=v*s+p*l+c,r[a+1]=v*u+p*d+o},t.prototype.copy=function(){var e=new t(this.name);return e.region=this.region,e.rendererObject=this.rendererObject,e.path=this.path,e.x=this.x,e.y=this.y,e.scaleX=this.scaleX,e.scaleY=this.scaleY,e.rotation=this.rotation,e.width=this.width,e.height=this.height,Y.arrayCopy(this.uvs,0,e.uvs,0,8),Y.arrayCopy(this.offset,0,e.offset,0,8),e.color.setFromColor(this.color),e},t.OX1=0,t.OY1=1,t.OX2=2,t.OY2=3,t.OX3=4,t.OY3=5,t.OX4=6,t.OY4=7,t.X1=0,t.Y1=1,t.C1R=2,t.C1G=3,t.C1B=4,t.C1A=5,t.U1=6,t.V1=7,t.X2=8,t.Y2=9,t.C2R=10,t.C2G=11,t.C2B=12,t.C2A=13,t.U2=14,t.V2=15,t.X3=16,t.Y3=17,t.C3R=18,t.C3G=19,t.C3B=20,t.C3A=21,t.U3=22,t.V3=23,t.X4=24,t.Y4=25,t.C4R=26,t.C4G=27,t.C4B=28,t.C4A=29,t.U4=30,t.V4=31,t}(Xr),Ei=function(){function i(t,e){this.jitterX=0,this.jitterY=0,this.jitterX=t,this.jitterY=e}return i.prototype.begin=function(t){},i.prototype.transform=function(t,e,r,a){t.x+=M.randomTriangular(-this.jitterX,this.jitterY),t.y+=M.randomTriangular(-this.jitterX,this.jitterY)},i.prototype.end=function(){},i}(),Si=function(){function i(t){this.centerX=0,this.centerY=0,this.radius=0,this.angle=0,this.worldX=0,this.worldY=0,this.radius=t}return i.prototype.begin=function(t){this.worldX=t.x+this.centerX,this.worldY=t.y+this.centerY},i.prototype.transform=function(t,e,r,a){var n=this.angle*M.degreesToRadians,h=t.x-this.worldX,f=t.y-this.worldY,c=Math.sqrt(h*h+f*f);if(c<this.radius){var o=i.interpolation.apply(0,n,(this.radius-c)/this.radius),s=Math.cos(o),l=Math.sin(o);t.x=s*h-l*f+this.worldX,t.y=l*h+s*f+this.worldY}},i.prototype.end=function(){},i.interpolation=new Za(2),i}(),xt=function(){function i(t,e,r){if(t==null)throw new Error("name cannot be null.");if(e==null)throw new Error("timelines cannot be null.");this.name=t,this.timelines=e,this.timelineIds=[];for(var a=0;a<e.length;a++)this.timelineIds[e[a].getPropertyId()]=!0;this.duration=r}return i.prototype.hasTimeline=function(t){return this.timelineIds[t]==!0},i.prototype.apply=function(t,e,r,a,n,h,f,c){if(t==null)throw new Error("skeleton cannot be null.");a&&this.duration!=0&&(r%=this.duration,e>0&&(e%=this.duration));for(var o=this.timelines,s=0,l=o.length;s<l;s++)o[s].apply(t,e,r,n,h,f,c)},i.binarySearch=function(t,e,r){r===void 0&&(r=1);var a=0,n=t.length/r-2;if(n==0)return r;for(var h=n>>>1;;){if(t[(h+1)*r]<=e?a=h+1:n=h,a==n)return(a+1)*r;h=a+n>>>1}},i.linearSearch=function(t,e,r){for(var a=0,n=t.length-r;a<=n;a+=r)if(t[a]>e)return a;return-1},i}(),It;(function(i){i[i.rotate=0]="rotate",i[i.translate=1]="translate",i[i.scale=2]="scale",i[i.shear=3]="shear",i[i.attachment=4]="attachment",i[i.color=5]="color",i[i.deform=6]="deform",i[i.event=7]="event",i[i.drawOrder=8]="drawOrder",i[i.ikConstraint=9]="ikConstraint",i[i.transformConstraint=10]="transformConstraint",i[i.pathConstraintPosition=11]="pathConstraintPosition",i[i.pathConstraintSpacing=12]="pathConstraintSpacing",i[i.pathConstraintMix=13]="pathConstraintMix",i[i.twoColor=14]="twoColor"})(It||(It={}));var ae=function(){function i(t){if(t<=0)throw new Error("frameCount must be > 0: "+t);this.curves=Y.newFloatArray((t-1)*i.BEZIER_SIZE)}return i.prototype.getFrameCount=function(){return this.curves.length/i.BEZIER_SIZE+1},i.prototype.setLinear=function(t){this.curves[t*i.BEZIER_SIZE]=i.LINEAR},i.prototype.setStepped=function(t){this.curves[t*i.BEZIER_SIZE]=i.STEPPED},i.prototype.getCurveType=function(t){var e=t*i.BEZIER_SIZE;if(e==this.curves.length)return i.LINEAR;var r=this.curves[e];return r==i.LINEAR?i.LINEAR:r==i.STEPPED?i.STEPPED:i.BEZIER},i.prototype.setCurve=function(t,e,r,a,n){var h=(-e*2+a)*.03,f=(-r*2+n)*.03,c=((e-a)*3+1)*.006,o=((r-n)*3+1)*.006,s=h*2+c,l=f*2+o,u=e*.3+h+c*.16666667,d=r*.3+f+o*.16666667,v=t*i.BEZIER_SIZE,p=this.curves;p[v++]=i.BEZIER;for(var y=u,g=d,m=v+i.BEZIER_SIZE-1;v<m;v+=2)p[v]=y,p[v+1]=g,u+=s,d+=l,s+=c,l+=o,y+=u,g+=d},i.prototype.getCurvePercent=function(t,e){e=M.clamp(e,0,1);var r=this.curves,a=t*i.BEZIER_SIZE,n=r[a];if(n==i.LINEAR)return e;if(n==i.STEPPED)return 0;a++;for(var h=0,f=a,c=a+i.BEZIER_SIZE-1;a<c;a+=2)if(h=r[a],h>=e){var o=void 0,s=void 0;return a==f?(o=0,s=0):(o=r[a-2],s=r[a-1]),s+(r[a+1]-s)*(e-o)/(h-o)}var l=r[a-1];return l+(1-l)*(e-h)/(1-h)},i.LINEAR=0,i.STEPPED=1,i.BEZIER=2,i.BEZIER_SIZE=10*2-1,i}(),_t=function(i){dt(t,i);function t(e){var r=i.call(this,e)||this;return r.frames=Y.newFloatArray(e<<1),r}return t.prototype.getPropertyId=function(){return(It.rotate<<24)+this.boneIndex},t.prototype.setFrame=function(e,r,a){e<<=1,this.frames[e]=r,this.frames[e+t.ROTATION]=a},t.prototype.apply=function(e,r,a,n,h,f,c){var o=this.frames,s=e.bones[this.boneIndex];if(s.active){if(a<o[0]){switch(f){case b.setup:s.rotation=s.data.rotation;return;case b.first:var l=s.data.rotation-s.rotation;s.rotation+=(l-(16384-(16384.499999999996-l/360|0))*360)*h}return}if(a>=o[o.length-t.ENTRIES]){var u=o[o.length+t.PREV_ROTATION];switch(f){case b.setup:s.rotation=s.data.rotation+u*h;break;case b.first:case b.replace:u+=s.data.rotation-s.rotation,u-=(16384-(16384.499999999996-u/360|0))*360;case b.add:s.rotation+=u*h}return}var d=xt.binarySearch(o,a,t.ENTRIES),v=o[d+t.PREV_ROTATION],p=o[d],y=this.getCurvePercent((d>>1)-1,1-(a-p)/(o[d+t.PREV_TIME]-p)),g=o[d+t.ROTATION]-v;switch(g=v+(g-(16384-(16384.499999999996-g/360|0))*360)*y,f){case b.setup:s.rotation=s.data.rotation+(g-(16384-(16384.499999999996-g/360|0))*360)*h;break;case b.first:case b.replace:g+=s.data.rotation-s.rotation;case b.add:s.rotation+=(g-(16384-(16384.499999999996-g/360|0))*360)*h}}},t.ENTRIES=2,t.PREV_TIME=-2,t.PREV_ROTATION=-1,t.ROTATION=1,t}(ae),we=function(i){dt(t,i);function t(e){var r=i.call(this,e)||this;return r.frames=Y.newFloatArray(e*t.ENTRIES),r}return t.prototype.getPropertyId=function(){return(It.translate<<24)+this.boneIndex},t.prototype.setFrame=function(e,r,a,n){e*=t.ENTRIES,this.frames[e]=r,this.frames[e+t.X]=a,this.frames[e+t.Y]=n},t.prototype.apply=function(e,r,a,n,h,f,c){var o=this.frames,s=e.bones[this.boneIndex];if(s.active){if(a<o[0]){switch(f){case b.setup:s.x=s.data.x,s.y=s.data.y;return;case b.first:s.x+=(s.data.x-s.x)*h,s.y+=(s.data.y-s.y)*h}return}var l=0,u=0;if(a>=o[o.length-t.ENTRIES])l=o[o.length+t.PREV_X],u=o[o.length+t.PREV_Y];else{var d=xt.binarySearch(o,a,t.ENTRIES);l=o[d+t.PREV_X],u=o[d+t.PREV_Y];var v=o[d],p=this.getCurvePercent(d/t.ENTRIES-1,1-(a-v)/(o[d+t.PREV_TIME]-v));l+=(o[d+t.X]-l)*p,u+=(o[d+t.Y]-u)*p}switch(f){case b.setup:s.x=s.data.x+l*h,s.y=s.data.y+u*h;break;case b.first:case b.replace:s.x+=(s.data.x+l-s.x)*h,s.y+=(s.data.y+u-s.y)*h;break;case b.add:s.x+=l*h,s.y+=u*h}}},t.ENTRIES=3,t.PREV_TIME=-3,t.PREV_X=-2,t.PREV_Y=-1,t.X=1,t.Y=2,t}(ae),Dr=function(i){dt(t,i);function t(e){return i.call(this,e)||this}return t.prototype.getPropertyId=function(){return(It.scale<<24)+this.boneIndex},t.prototype.apply=function(e,r,a,n,h,f,c){var o=this.frames,s=e.bones[this.boneIndex];if(s.active){if(a<o[0]){switch(f){case b.setup:s.scaleX=s.data.scaleX,s.scaleY=s.data.scaleY;return;case b.first:s.scaleX+=(s.data.scaleX-s.scaleX)*h,s.scaleY+=(s.data.scaleY-s.scaleY)*h}return}var l=0,u=0;if(a>=o[o.length-t.ENTRIES])l=o[o.length+t.PREV_X]*s.data.scaleX,u=o[o.length+t.PREV_Y]*s.data.scaleY;else{var d=xt.binarySearch(o,a,t.ENTRIES);l=o[d+t.PREV_X],u=o[d+t.PREV_Y];var v=o[d],p=this.getCurvePercent(d/t.ENTRIES-1,1-(a-v)/(o[d+t.PREV_TIME]-v));l=(l+(o[d+t.X]-l)*p)*s.data.scaleX,u=(u+(o[d+t.Y]-u)*p)*s.data.scaleY}if(h==1)f==b.add?(s.scaleX+=l-s.data.scaleX,s.scaleY+=u-s.data.scaleY):(s.scaleX=l,s.scaleY=u);else{var y=0,g=0;if(c==rt.mixOut)switch(f){case b.setup:y=s.data.scaleX,g=s.data.scaleY,s.scaleX=y+(Math.abs(l)*M.signum(y)-y)*h,s.scaleY=g+(Math.abs(u)*M.signum(g)-g)*h;break;case b.first:case b.replace:y=s.scaleX,g=s.scaleY,s.scaleX=y+(Math.abs(l)*M.signum(y)-y)*h,s.scaleY=g+(Math.abs(u)*M.signum(g)-g)*h;break;case b.add:y=s.scaleX,g=s.scaleY,s.scaleX=y+(Math.abs(l)*M.signum(y)-s.data.scaleX)*h,s.scaleY=g+(Math.abs(u)*M.signum(g)-s.data.scaleY)*h}else switch(f){case b.setup:y=Math.abs(s.data.scaleX)*M.signum(l),g=Math.abs(s.data.scaleY)*M.signum(u),s.scaleX=y+(l-y)*h,s.scaleY=g+(u-g)*h;break;case b.first:case b.replace:y=Math.abs(s.scaleX)*M.signum(l),g=Math.abs(s.scaleY)*M.signum(u),s.scaleX=y+(l-y)*h,s.scaleY=g+(u-g)*h;break;case b.add:y=M.signum(l),g=M.signum(u),s.scaleX=Math.abs(s.scaleX)*y+(l-Math.abs(s.data.scaleX)*y)*h,s.scaleY=Math.abs(s.scaleY)*g+(u-Math.abs(s.data.scaleY)*g)*h}}}},t}(we),Lr=function(i){dt(t,i);function t(e){return i.call(this,e)||this}return t.prototype.getPropertyId=function(){return(It.shear<<24)+this.boneIndex},t.prototype.apply=function(e,r,a,n,h,f,c){var o=this.frames,s=e.bones[this.boneIndex];if(s.active){if(a<o[0]){switch(f){case b.setup:s.shearX=s.data.shearX,s.shearY=s.data.shearY;return;case b.first:s.shearX+=(s.data.shearX-s.shearX)*h,s.shearY+=(s.data.shearY-s.shearY)*h}return}var l=0,u=0;if(a>=o[o.length-t.ENTRIES])l=o[o.length+t.PREV_X],u=o[o.length+t.PREV_Y];else{var d=xt.binarySearch(o,a,t.ENTRIES);l=o[d+t.PREV_X],u=o[d+t.PREV_Y];var v=o[d],p=this.getCurvePercent(d/t.ENTRIES-1,1-(a-v)/(o[d+t.PREV_TIME]-v));l=l+(o[d+t.X]-l)*p,u=u+(o[d+t.Y]-u)*p}switch(f){case b.setup:s.shearX=s.data.shearX+l*h,s.shearY=s.data.shearY+u*h;break;case b.first:case b.replace:s.shearX+=(s.data.shearX+l-s.shearX)*h,s.shearY+=(s.data.shearY+u-s.shearY)*h;break;case b.add:s.shearX+=l*h,s.shearY+=u*h}}},t}(we),Ne=function(i){dt(t,i);function t(e){var r=i.call(this,e)||this;return r.frames=Y.newFloatArray(e*t.ENTRIES),r}return t.prototype.getPropertyId=function(){return(It.color<<24)+this.slotIndex},t.prototype.setFrame=function(e,r,a,n,h,f){e*=t.ENTRIES,this.frames[e]=r,this.frames[e+t.R]=a,this.frames[e+t.G]=n,this.frames[e+t.B]=h,this.frames[e+t.A]=f},t.prototype.apply=function(e,r,a,n,h,f,c){var o=e.slots[this.slotIndex];if(o.bone.active){var s=this.frames;if(a<s[0]){switch(f){case b.setup:o.color.setFromColor(o.data.color);return;case b.first:var l=o.color,u=o.data.color;l.add((u.r-l.r)*h,(u.g-l.g)*h,(u.b-l.b)*h,(u.a-l.a)*h)}return}var d=0,v=0,p=0,y=0;if(a>=s[s.length-t.ENTRIES]){var g=s.length;d=s[g+t.PREV_R],v=s[g+t.PREV_G],p=s[g+t.PREV_B],y=s[g+t.PREV_A]}else{var m=xt.binarySearch(s,a,t.ENTRIES);d=s[m+t.PREV_R],v=s[m+t.PREV_G],p=s[m+t.PREV_B],y=s[m+t.PREV_A];var w=s[m],x=this.getCurvePercent(m/t.ENTRIES-1,1-(a-w)/(s[m+t.PREV_TIME]-w));d+=(s[m+t.R]-d)*x,v+=(s[m+t.G]-v)*x,p+=(s[m+t.B]-p)*x,y+=(s[m+t.A]-y)*x}if(h==1)o.color.set(d,v,p,y);else{var l=o.color;f==b.setup&&l.setFromColor(o.data.color),l.add((d-l.r)*h,(v-l.g)*h,(p-l.b)*h,(y-l.a)*h)}}},t.ENTRIES=5,t.PREV_TIME=-5,t.PREV_R=-4,t.PREV_G=-3,t.PREV_B=-2,t.PREV_A=-1,t.R=1,t.G=2,t.B=3,t.A=4,t}(ae),Oe=function(i){dt(t,i);function t(e){var r=i.call(this,e)||this;return r.frames=Y.newFloatArray(e*t.ENTRIES),r}return t.prototype.getPropertyId=function(){return(It.twoColor<<24)+this.slotIndex},t.prototype.setFrame=function(e,r,a,n,h,f,c,o,s){e*=t.ENTRIES,this.frames[e]=r,this.frames[e+t.R]=a,this.frames[e+t.G]=n,this.frames[e+t.B]=h,this.frames[e+t.A]=f,this.frames[e+t.R2]=c,this.frames[e+t.G2]=o,this.frames[e+t.B2]=s},t.prototype.apply=function(e,r,a,n,h,f,c){var o=e.slots[this.slotIndex];if(o.bone.active){var s=this.frames;if(a<s[0]){switch(f){case b.setup:o.color.setFromColor(o.data.color),o.darkColor.setFromColor(o.data.darkColor);return;case b.first:var l=o.color,u=o.darkColor,d=o.data.color,v=o.data.darkColor;l.add((d.r-l.r)*h,(d.g-l.g)*h,(d.b-l.b)*h,(d.a-l.a)*h),u.add((v.r-u.r)*h,(v.g-u.g)*h,(v.b-u.b)*h,0)}return}var p=0,y=0,g=0,m=0,w=0,x=0,E=0;if(a>=s[s.length-t.ENTRIES]){var S=s.length;p=s[S+t.PREV_R],y=s[S+t.PREV_G],g=s[S+t.PREV_B],m=s[S+t.PREV_A],w=s[S+t.PREV_R2],x=s[S+t.PREV_G2],E=s[S+t.PREV_B2]}else{var A=xt.binarySearch(s,a,t.ENTRIES);p=s[A+t.PREV_R],y=s[A+t.PREV_G],g=s[A+t.PREV_B],m=s[A+t.PREV_A],w=s[A+t.PREV_R2],x=s[A+t.PREV_G2],E=s[A+t.PREV_B2];var T=s[A],C=this.getCurvePercent(A/t.ENTRIES-1,1-(a-T)/(s[A+t.PREV_TIME]-T));p+=(s[A+t.R]-p)*C,y+=(s[A+t.G]-y)*C,g+=(s[A+t.B]-g)*C,m+=(s[A+t.A]-m)*C,w+=(s[A+t.R2]-w)*C,x+=(s[A+t.G2]-x)*C,E+=(s[A+t.B2]-E)*C}if(h==1)o.color.set(p,y,g,m),o.darkColor.set(w,x,E,1);else{var l=o.color,u=o.darkColor;f==b.setup&&(l.setFromColor(o.data.color),u.setFromColor(o.data.darkColor)),l.add((p-l.r)*h,(y-l.g)*h,(g-l.b)*h,(m-l.a)*h),u.add((w-u.r)*h,(x-u.g)*h,(E-u.b)*h,0)}}},t.ENTRIES=8,t.PREV_TIME=-8,t.PREV_R=-7,t.PREV_G=-6,t.PREV_B=-5,t.PREV_A=-4,t.PREV_R2=-3,t.PREV_G2=-2,t.PREV_B2=-1,t.R=1,t.G=2,t.B=3,t.A=4,t.R2=5,t.G2=6,t.B2=7,t}(ae),me=function(){function i(t){this.frames=Y.newFloatArray(t),this.attachmentNames=new Array(t)}return i.prototype.getPropertyId=function(){return(It.attachment<<24)+this.slotIndex},i.prototype.getFrameCount=function(){return this.frames.length},i.prototype.setFrame=function(t,e,r){this.frames[t]=e,this.attachmentNames[t]=r},i.prototype.apply=function(t,e,r,a,n,h,f){var c=t.slots[this.slotIndex];if(c.bone.active){if(f==rt.mixOut){h==b.setup&&this.setAttachment(t,c,c.data.attachmentName);return}var o=this.frames;if(r<o[0]){(h==b.setup||h==b.first)&&this.setAttachment(t,c,c.data.attachmentName);return}var s=0;r>=o[o.length-1]?s=o.length-1:s=xt.binarySearch(o,r,1)-1;var l=this.attachmentNames[s];t.slots[this.slotIndex].setAttachment(l==null?null:t.getAttachment(this.slotIndex,l))}},i.prototype.setAttachment=function(t,e,r){e.setAttachment(r==null?null:t.getAttachment(this.slotIndex,r))},i}(),Wa=null,Wr=function(i){dt(t,i);function t(e){var r=i.call(this,e)||this;return r.frames=Y.newFloatArray(e),r.frameVertices=new Array(e),Wa==null&&(Wa=Y.newFloatArray(64)),r}return t.prototype.getPropertyId=function(){return(It.deform<<27)+ +this.attachment.id+this.slotIndex},t.prototype.setFrame=function(e,r,a){this.frames[e]=r,this.frameVertices[e]=a},t.prototype.apply=function(e,r,a,n,h,f,c){var o=e.slots[this.slotIndex];if(o.bone.active){var s=o.getAttachment();if(!(!(s instanceof xe)||s.deformAttachment!=this.attachment)){var l=o.deform;l.length==0&&(f=b.setup);var u=this.frameVertices,d=u[0].length,v=this.frames;if(a<v[0]){var p=s;switch(f){case b.setup:l.length=0;return;case b.first:if(h==1){l.length=0;break}var y=Y.setArraySize(l,d);if(p.bones==null)for(var g=p.vertices,m=0;m<d;m++)y[m]+=(g[m]-y[m])*h;else{h=1-h;for(var m=0;m<d;m++)y[m]*=h}}return}var w=Y.setArraySize(l,d);if(a>=v[v.length-1]){var x=u[v.length-1];if(h==1)if(f==b.add){var p=s;if(p.bones==null)for(var g=p.vertices,E=0;E<d;E++)w[E]+=x[E]-g[E];else for(var S=0;S<d;S++)w[S]+=x[S]}else Y.arrayCopy(x,0,w,0,d);else switch(f){case b.setup:{var A=s;if(A.bones==null)for(var g=A.vertices,T=0;T<d;T++){var C=g[T];w[T]=C+(x[T]-C)*h}else for(var I=0;I<d;I++)w[I]=x[I]*h;break}case b.first:case b.replace:for(var P=0;P<d;P++)w[P]+=(x[P]-w[P])*h;break;case b.add:var p=s;if(p.bones==null)for(var g=p.vertices,R=0;R<d;R++)w[R]+=(x[R]-g[R])*h;else for(var V=0;V<d;V++)w[V]+=x[V]*h}return}var k=xt.binarySearch(v,a),B=u[k-1],D=u[k],L=v[k],H=this.getCurvePercent(k-1,1-(a-L)/(v[k-1]-L));if(h==1)if(f==b.add){var p=s;if(p.bones==null)for(var g=p.vertices,_=0;_<d;_++){var O=B[_];w[_]+=O+(D[_]-O)*H-g[_]}else for(var U=0;U<d;U++){var O=B[U];w[U]+=O+(D[U]-O)*H}}else for(var W=0;W<d;W++){var O=B[W];w[W]=O+(D[W]-O)*H}else switch(f){case b.setup:{var N=s;if(N.bones==null)for(var g=N.vertices,F=0;F<d;F++){var O=B[F],C=g[F];w[F]=C+(O+(D[F]-O)*H-C)*h}else for(var q=0;q<d;q++){var O=B[q];w[q]=(O+(D[q]-O)*H)*h}break}case b.first:case b.replace:for(var $=0;$<d;$++){var O=B[$];w[$]+=(O+(D[$]-O)*H-w[$])*h}break;case b.add:var p=s;if(p.bones==null)for(var g=p.vertices,z=0;z<d;z++){var O=B[z];w[z]+=(O+(D[z]-O)*H-g[z])*h}else for(var j=0;j<d;j++){var O=B[j];w[j]+=(O+(D[j]-O)*H)*h}}}}},t}(ae),ir=function(){function i(t){this.frames=Y.newFloatArray(t),this.events=new Array(t)}return i.prototype.getPropertyId=function(){return It.event<<24},i.prototype.getFrameCount=function(){return this.frames.length},i.prototype.setFrame=function(t,e){this.frames[t]=e.time,this.events[t]=e},i.prototype.apply=function(t,e,r,a,n,h,f){if(a!=null){var c=this.frames,o=this.frames.length;if(e>r)this.apply(t,e,Number.MAX_VALUE,a,n,h,f),e=-1;else if(e>=c[o-1])return;if(!(r<c[0])){var s=0;if(e<c[0])s=0;else{s=xt.binarySearch(c,e);for(var l=c[s];s>0&&c[s-1]==l;)s--}for(;s<o&&r>=c[s];s++)a.push(this.events[s])}}},i}(),Ce=function(){function i(t){this.frames=Y.newFloatArray(t),this.drawOrders=new Array(t)}return i.prototype.getPropertyId=function(){return It.drawOrder<<24},i.prototype.getFrameCount=function(){return this.frames.length},i.prototype.setFrame=function(t,e,r){this.frames[t]=e,this.drawOrders[t]=r},i.prototype.apply=function(t,e,r,a,n,h,f){var c=t.drawOrder,o=t.slots;if(f==rt.mixOut&&h==b.setup){Y.arrayCopy(t.slots,0,t.drawOrder,0,t.slots.length);return}var s=this.frames;if(r<s[0]){(h==b.setup||h==b.first)&&Y.arrayCopy(t.slots,0,t.drawOrder,0,t.slots.length);return}var l=0;r>=s[s.length-1]?l=s.length-1:l=xt.binarySearch(s,r)-1;var u=this.drawOrders[l];if(u==null)Y.arrayCopy(o,0,c,0,o.length);else for(var d=0,v=u.length;d<v;d++)c[d]=o[u[d]]},i}(),De=function(i){dt(t,i);function t(e){var r=i.call(this,e)||this;return r.frames=Y.newFloatArray(e*t.ENTRIES),r}return t.prototype.getPropertyId=function(){return(It.ikConstraint<<24)+this.ikConstraintIndex},t.prototype.setFrame=function(e,r,a,n,h,f,c){e*=t.ENTRIES,this.frames[e]=r,this.frames[e+t.MIX]=a,this.frames[e+t.SOFTNESS]=n,this.frames[e+t.BEND_DIRECTION]=h,this.frames[e+t.COMPRESS]=f?1:0,this.frames[e+t.STRETCH]=c?1:0},t.prototype.apply=function(e,r,a,n,h,f,c){var o=this.frames,s=e.ikConstraints[this.ikConstraintIndex];if(s.active){if(a<o[0]){switch(f){case b.setup:s.mix=s.data.mix,s.softness=s.data.softness,s.bendDirection=s.data.bendDirection,s.compress=s.data.compress,s.stretch=s.data.stretch;return;case b.first:s.mix+=(s.data.mix-s.mix)*h,s.softness+=(s.data.softness-s.softness)*h,s.bendDirection=s.data.bendDirection,s.compress=s.data.compress,s.stretch=s.data.stretch}return}if(a>=o[o.length-t.ENTRIES]){f==b.setup?(s.mix=s.data.mix+(o[o.length+t.PREV_MIX]-s.data.mix)*h,s.softness=s.data.softness+(o[o.length+t.PREV_SOFTNESS]-s.data.softness)*h,c==rt.mixOut?(s.bendDirection=s.data.bendDirection,s.compress=s.data.compress,s.stretch=s.data.stretch):(s.bendDirection=o[o.length+t.PREV_BEND_DIRECTION],s.compress=o[o.length+t.PREV_COMPRESS]!=0,s.stretch=o[o.length+t.PREV_STRETCH]!=0)):(s.mix+=(o[o.length+t.PREV_MIX]-s.mix)*h,s.softness+=(o[o.length+t.PREV_SOFTNESS]-s.softness)*h,c==rt.mixIn&&(s.bendDirection=o[o.length+t.PREV_BEND_DIRECTION],s.compress=o[o.length+t.PREV_COMPRESS]!=0,s.stretch=o[o.length+t.PREV_STRETCH]!=0));return}var l=xt.binarySearch(o,a,t.ENTRIES),u=o[l+t.PREV_MIX],d=o[l+t.PREV_SOFTNESS],v=o[l],p=this.getCurvePercent(l/t.ENTRIES-1,1-(a-v)/(o[l+t.PREV_TIME]-v));f==b.setup?(s.mix=s.data.mix+(u+(o[l+t.MIX]-u)*p-s.data.mix)*h,s.softness=s.data.softness+(d+(o[l+t.SOFTNESS]-d)*p-s.data.softness)*h,c==rt.mixOut?(s.bendDirection=s.data.bendDirection,s.compress=s.data.compress,s.stretch=s.data.stretch):(s.bendDirection=o[l+t.PREV_BEND_DIRECTION],s.compress=o[l+t.PREV_COMPRESS]!=0,s.stretch=o[l+t.PREV_STRETCH]!=0)):(s.mix+=(u+(o[l+t.MIX]-u)*p-s.mix)*h,s.softness+=(d+(o[l+t.SOFTNESS]-d)*p-s.softness)*h,c==rt.mixIn&&(s.bendDirection=o[l+t.PREV_BEND_DIRECTION],s.compress=o[l+t.PREV_COMPRESS]!=0,s.stretch=o[l+t.PREV_STRETCH]!=0))}},t.ENTRIES=6,t.PREV_TIME=-6,t.PREV_MIX=-5,t.PREV_SOFTNESS=-4,t.PREV_BEND_DIRECTION=-3,t.PREV_COMPRESS=-2,t.PREV_STRETCH=-1,t.MIX=1,t.SOFTNESS=2,t.BEND_DIRECTION=3,t.COMPRESS=4,t.STRETCH=5,t}(ae),Le=function(i){dt(t,i);function t(e){var r=i.call(this,e)||this;return r.frames=Y.newFloatArray(e*t.ENTRIES),r}return t.prototype.getPropertyId=function(){return(It.transformConstraint<<24)+this.transformConstraintIndex},t.prototype.setFrame=function(e,r,a,n,h,f){e*=t.ENTRIES,this.frames[e]=r,this.frames[e+t.ROTATE]=a,this.frames[e+t.TRANSLATE]=n,this.frames[e+t.SCALE]=h,this.frames[e+t.SHEAR]=f},t.prototype.apply=function(e,r,a,n,h,f,c){var o=this.frames,s=e.transformConstraints[this.transformConstraintIndex];if(s.active){if(a<o[0]){var l=s.data;switch(f){case b.setup:s.rotateMix=l.rotateMix,s.translateMix=l.translateMix,s.scaleMix=l.scaleMix,s.shearMix=l.shearMix;return;case b.first:s.rotateMix+=(l.rotateMix-s.rotateMix)*h,s.translateMix+=(l.translateMix-s.translateMix)*h,s.scaleMix+=(l.scaleMix-s.scaleMix)*h,s.shearMix+=(l.shearMix-s.shearMix)*h}return}var u=0,d=0,v=0,p=0;if(a>=o[o.length-t.ENTRIES]){var y=o.length;u=o[y+t.PREV_ROTATE],d=o[y+t.PREV_TRANSLATE],v=o[y+t.PREV_SCALE],p=o[y+t.PREV_SHEAR]}else{var g=xt.binarySearch(o,a,t.ENTRIES);u=o[g+t.PREV_ROTATE],d=o[g+t.PREV_TRANSLATE],v=o[g+t.PREV_SCALE],p=o[g+t.PREV_SHEAR];var m=o[g],w=this.getCurvePercent(g/t.ENTRIES-1,1-(a-m)/(o[g+t.PREV_TIME]-m));u+=(o[g+t.ROTATE]-u)*w,d+=(o[g+t.TRANSLATE]-d)*w,v+=(o[g+t.SCALE]-v)*w,p+=(o[g+t.SHEAR]-p)*w}if(f==b.setup){var l=s.data;s.rotateMix=l.rotateMix+(u-l.rotateMix)*h,s.translateMix=l.translateMix+(d-l.translateMix)*h,s.scaleMix=l.scaleMix+(v-l.scaleMix)*h,s.shearMix=l.shearMix+(p-l.shearMix)*h}else s.rotateMix+=(u-s.rotateMix)*h,s.translateMix+=(d-s.translateMix)*h,s.scaleMix+=(v-s.scaleMix)*h,s.shearMix+=(p-s.shearMix)*h}},t.ENTRIES=5,t.PREV_TIME=-5,t.PREV_ROTATE=-4,t.PREV_TRANSLATE=-3,t.PREV_SCALE=-2,t.PREV_SHEAR=-1,t.ROTATE=1,t.TRANSLATE=2,t.SCALE=3,t.SHEAR=4,t}(ae),Me=function(i){dt(t,i);function t(e){var r=i.call(this,e)||this;return r.frames=Y.newFloatArray(e*t.ENTRIES),r}return t.prototype.getPropertyId=function(){return(It.pathConstraintPosition<<24)+this.pathConstraintIndex},t.prototype.setFrame=function(e,r,a){e*=t.ENTRIES,this.frames[e]=r,this.frames[e+t.VALUE]=a},t.prototype.apply=function(e,r,a,n,h,f,c){var o=this.frames,s=e.pathConstraints[this.pathConstraintIndex];if(s.active){if(a<o[0]){switch(f){case b.setup:s.position=s.data.position;return;case b.first:s.position+=(s.data.position-s.position)*h}return}var l=0;if(a>=o[o.length-t.ENTRIES])l=o[o.length+t.PREV_VALUE];else{var u=xt.binarySearch(o,a,t.ENTRIES);l=o[u+t.PREV_VALUE];var d=o[u],v=this.getCurvePercent(u/t.ENTRIES-1,1-(a-d)/(o[u+t.PREV_TIME]-d));l+=(o[u+t.VALUE]-l)*v}f==b.setup?s.position=s.data.position+(l-s.data.position)*h:s.position+=(l-s.position)*h}},t.ENTRIES=2,t.PREV_TIME=-2,t.PREV_VALUE=-1,t.VALUE=1,t}(ae),qr=function(i){dt(t,i);function t(e){return i.call(this,e)||this}return t.prototype.getPropertyId=function(){return(It.pathConstraintSpacing<<24)+this.pathConstraintIndex},t.prototype.apply=function(e,r,a,n,h,f,c){var o=this.frames,s=e.pathConstraints[this.pathConstraintIndex];if(s.active){if(a<o[0]){switch(f){case b.setup:s.spacing=s.data.spacing;return;case b.first:s.spacing+=(s.data.spacing-s.spacing)*h}return}var l=0;if(a>=o[o.length-t.ENTRIES])l=o[o.length+t.PREV_VALUE];else{var u=xt.binarySearch(o,a,t.ENTRIES);l=o[u+t.PREV_VALUE];var d=o[u],v=this.getCurvePercent(u/t.ENTRIES-1,1-(a-d)/(o[u+t.PREV_TIME]-d));l+=(o[u+t.VALUE]-l)*v}f==b.setup?s.spacing=s.data.spacing+(l-s.data.spacing)*h:s.spacing+=(l-s.spacing)*h}},t}(Me),We=function(i){dt(t,i);function t(e){var r=i.call(this,e)||this;return r.frames=Y.newFloatArray(e*t.ENTRIES),r}return t.prototype.getPropertyId=function(){return(It.pathConstraintMix<<24)+this.pathConstraintIndex},t.prototype.setFrame=function(e,r,a,n){e*=t.ENTRIES,this.frames[e]=r,this.frames[e+t.ROTATE]=a,this.frames[e+t.TRANSLATE]=n},t.prototype.apply=function(e,r,a,n,h,f,c){var o=this.frames,s=e.pathConstraints[this.pathConstraintIndex];if(s.active){if(a<o[0]){switch(f){case b.setup:s.rotateMix=s.data.rotateMix,s.translateMix=s.data.translateMix;return;case b.first:s.rotateMix+=(s.data.rotateMix-s.rotateMix)*h,s.translateMix+=(s.data.translateMix-s.translateMix)*h}return}var l=0,u=0;if(a>=o[o.length-t.ENTRIES])l=o[o.length+t.PREV_ROTATE],u=o[o.length+t.PREV_TRANSLATE];else{var d=xt.binarySearch(o,a,t.ENTRIES);l=o[d+t.PREV_ROTATE],u=o[d+t.PREV_TRANSLATE];var v=o[d],p=this.getCurvePercent(d/t.ENTRIES-1,1-(a-v)/(o[d+t.PREV_TIME]-v));l+=(o[d+t.ROTATE]-l)*p,u+=(o[d+t.TRANSLATE]-u)*p}f==b.setup?(s.rotateMix=s.data.rotateMix+(l-s.data.rotateMix)*h,s.translateMix=s.data.translateMix+(u-s.data.translateMix)*h):(s.rotateMix+=(l-s.rotateMix)*h,s.translateMix+=(u-s.translateMix)*h)}},t.ENTRIES=3,t.PREV_TIME=-3,t.PREV_ROTATE=-2,t.PREV_TRANSLATE=-1,t.ROTATE=1,t.TRANSLATE=2,t}(ae),tn=function(){function i(t){this.tracks=new Array,this.timeScale=1,this.unkeyedState=0,this.events=new Array,this.listeners=new Array,this.queue=new rn(this),this.propertyIDs=new ja,this.animationsChanged=!1,this.trackEntryPool=new rr(function(){return new en}),this.data=t}return i.prototype.update=function(t){t*=this.timeScale;for(var e=this.tracks,r=0,a=e.length;r<a;r++){var n=e[r];if(n!=null){n.animationLast=n.nextAnimationLast,n.trackLast=n.nextTrackLast;var h=t*n.timeScale;if(n.delay>0){if(n.delay-=h,n.delay>0)continue;h=-n.delay,n.delay=0}var f=n.next;if(f!=null){var c=n.trackLast-f.delay;if(c>=0){for(f.delay=0,f.trackTime+=n.timeScale==0?0:(c/n.timeScale+t)*f.timeScale,n.trackTime+=h,this.setCurrent(r,f,!0);f.mixingFrom!=null;)f.mixTime+=t,f=f.mixingFrom;continue}}else if(n.trackLast>=n.trackEnd&&n.mixingFrom==null){e[r]=null,this.queue.end(n),this.disposeNext(n);continue}if(n.mixingFrom!=null&&this.updateMixingFrom(n,t)){var o=n.mixingFrom;for(n.mixingFrom=null,o!=null&&(o.mixingTo=null);o!=null;)this.queue.end(o),o=o.mixingFrom}n.trackTime+=h}}this.queue.drain()},i.prototype.updateMixingFrom=function(t,e){var r=t.mixingFrom;if(r==null)return!0;var a=this.updateMixingFrom(r,e);return r.animationLast=r.nextAnimationLast,r.trackLast=r.nextTrackLast,t.mixTime>0&&t.mixTime>=t.mixDuration?((r.totalAlpha==0||t.mixDuration==0)&&(t.mixingFrom=r.mixingFrom,r.mixingFrom!=null&&(r.mixingFrom.mixingTo=t),t.interruptAlpha=r.interruptAlpha,this.queue.end(r)),a):(r.trackTime+=e*r.timeScale,t.mixTime+=e,!1)},i.prototype.apply=function(t){if(t==null)throw new Error("skeleton cannot be null.");this.animationsChanged&&this._animationsChanged();for(var e=this.events,r=this.tracks,a=!1,n=0,h=r.length;n<h;n++){var f=r[n];if(!(f==null||f.delay>0)){a=!0;var c=n==0?b.first:f.mixBlend,o=f.alpha;f.mixingFrom!=null?o*=this.applyMixingFrom(f,t,c):f.trackTime>=f.trackEnd&&f.next==null&&(o=0);var s=f.animationLast,l=f.getAnimationTime(),u=f.animation.timelines.length,d=f.animation.timelines;if(n==0&&o==1||c==b.add)for(var v=0;v<u;v++){Y.webkit602BugfixHelper(o,c);var p=d[v];p instanceof me?this.applyAttachmentTimeline(p,t,l,c,!0):p.apply(t,s,l,e,o,c,rt.mixIn)}else{var y=f.timelineMode,g=f.timelinesRotation.length==0;g&&Y.setArraySize(f.timelinesRotation,u<<1,null);for(var m=f.timelinesRotation,v=0;v<u;v++){var w=d[v],x=y[v]==i.SUBSEQUENT?c:b.setup;w instanceof _t?this.applyRotateTimeline(w,t,l,o,x,m,v<<1,g):w instanceof me?this.applyAttachmentTimeline(w,t,l,c,!0):(Y.webkit602BugfixHelper(o,c),w.apply(t,s,l,e,o,x,rt.mixIn))}}this.queueEvents(f,l),e.length=0,f.nextAnimationLast=l,f.nextTrackLast=f.trackTime}}for(var E=this.unkeyedState+i.SETUP,S=t.slots,A=0,T=t.slots.length;A<T;A++){var C=S[A];if(C.attachmentState==E){var I=C.data.attachmentName;C.setAttachment(I==null?null:t.getAttachment(C.data.index,I))}}return this.unkeyedState+=2,this.queue.drain(),a},i.prototype.applyMixingFrom=function(t,e,r){var a=t.mixingFrom;a.mixingFrom!=null&&this.applyMixingFrom(a,e,r);var n=0;t.mixDuration==0?(n=1,r==b.first&&(r=b.setup)):(n=t.mixTime/t.mixDuration,n>1&&(n=1),r!=b.first&&(r=a.mixBlend));var h=n<a.eventThreshold?this.events:null,f=n<a.attachmentThreshold,c=n<a.drawOrderThreshold,o=a.animationLast,s=a.getAnimationTime(),l=a.animation.timelines.length,u=a.animation.timelines,d=a.alpha*t.interruptAlpha,v=d*(1-n);if(r==b.add)for(var p=0;p<l;p++)u[p].apply(e,o,s,h,v,r,rt.mixOut);else{var y=a.timelineMode,g=a.timelineHoldMix,m=a.timelinesRotation.length==0;m&&Y.setArraySize(a.timelinesRotation,l<<1,null);var w=a.timelinesRotation;a.totalAlpha=0;for(var p=0;p<l;p++){var x=u[p],E=rt.mixOut,S=void 0,A=0;switch(y[p]){case i.SUBSEQUENT:if(!c&&x instanceof Ce)continue;S=r,A=v;break;case i.FIRST:S=b.setup,A=v;break;case i.HOLD_SUBSEQUENT:S=r,A=d;break;case i.HOLD_FIRST:S=b.setup,A=d;break;default:S=b.setup;var T=g[p];A=d*Math.max(0,1-T.mixTime/T.mixDuration);break}a.totalAlpha+=A,x instanceof _t?this.applyRotateTimeline(x,e,s,A,S,w,p<<1,m):x instanceof me?this.applyAttachmentTimeline(x,e,s,S,f):(Y.webkit602BugfixHelper(A,r),c&&x instanceof Ce&&S==b.setup&&(E=rt.mixIn),x.apply(e,o,s,h,A,S,E))}}return t.mixDuration>0&&this.queueEvents(a,s),this.events.length=0,a.nextAnimationLast=s,a.nextTrackLast=a.trackTime,n},i.prototype.applyAttachmentTimeline=function(t,e,r,a,n){var h=e.slots[t.slotIndex];if(h.bone.active){var f=t.frames;if(r<f[0])(a==b.setup||a==b.first)&&this.setAttachment(e,h,h.data.attachmentName,n);else{var c;r>=f[f.length-1]?c=f.length-1:c=xt.binarySearch(f,r)-1,this.setAttachment(e,h,t.attachmentNames[c],n)}h.attachmentState<=this.unkeyedState&&(h.attachmentState=this.unkeyedState+i.SETUP)}},i.prototype.setAttachment=function(t,e,r,a){e.setAttachment(r==null?null:t.getAttachment(e.data.index,r)),a&&(e.attachmentState=this.unkeyedState+i.CURRENT)},i.prototype.applyRotateTimeline=function(t,e,r,a,n,h,f,c){if(c&&(h[f]=0),a==1){t.apply(e,0,r,null,1,n,rt.mixIn);return}var o=t,s=o.frames,l=e.bones[o.boneIndex];if(l.active){var u=0,d=0;if(r<s[0])switch(n){case b.setup:l.rotation=l.data.rotation;default:return;case b.first:u=l.rotation,d=l.data.rotation}else if(u=n==b.setup?l.data.rotation:l.rotation,r>=s[s.length-_t.ENTRIES])d=l.data.rotation+s[s.length+_t.PREV_ROTATION];else{var v=xt.binarySearch(s,r,_t.ENTRIES),p=s[v+_t.PREV_ROTATION],y=s[v],g=o.getCurvePercent((v>>1)-1,1-(r-y)/(s[v+_t.PREV_TIME]-y));d=s[v+_t.ROTATION]-p,d-=(16384-(16384.499999999996-d/360|0))*360,d=p+d*g+l.data.rotation,d-=(16384-(16384.499999999996-d/360|0))*360}var m=0,w=d-u;if(w-=(16384-(16384.499999999996-w/360|0))*360,w==0)m=h[f];else{var x=0,E=0;c?(x=0,E=w):(x=h[f],E=h[f+1]);var S=w>0,A=x>=0;M.signum(E)!=M.signum(w)&&Math.abs(E)<=90&&(Math.abs(x)>180&&(x+=360*M.signum(x)),A=S),m=w+x-x%360,A!=S&&(m+=360*M.signum(x)),h[f]=m}h[f+1]=w,u+=m*a,l.rotation=u-(16384-(16384.499999999996-u/360|0))*360}},i.prototype.queueEvents=function(t,e){for(var r=t.animationStart,a=t.animationEnd,n=a-r,h=t.trackLast%n,f=this.events,c=0,o=f.length;c<o;c++){var s=f[c];if(s.time<h)break;s.time>a||this.queue.event(t,s)}var l=!1;for(t.loop?l=n==0||h>t.trackTime%n:l=e>=a&&t.animationLast<a,l&&this.queue.complete(t);c<o;c++){var u=f[c];u.time<r||this.queue.event(t,f[c])}},i.prototype.clearTracks=function(){var t=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(var e=0,r=this.tracks.length;e<r;e++)this.clearTrack(e);this.tracks.length=0,this.queue.drainDisabled=t,this.queue.drain()},i.prototype.clearTrack=function(t){if(!(t>=this.tracks.length)){var e=this.tracks[t];if(e!=null){this.queue.end(e),this.disposeNext(e);for(var r=e;;){var a=r.mixingFrom;if(a==null)break;this.queue.end(a),r.mixingFrom=null,r.mixingTo=null,r=a}this.tracks[e.trackIndex]=null,this.queue.drain()}}},i.prototype.setCurrent=function(t,e,r){var a=this.expandToIndex(t);this.tracks[t]=e,a!=null&&(r&&this.queue.interrupt(a),e.mixingFrom=a,a.mixingTo=e,e.mixTime=0,a.mixingFrom!=null&&a.mixDuration>0&&(e.interruptAlpha*=Math.min(1,a.mixTime/a.mixDuration)),a.timelinesRotation.length=0),this.queue.start(e)},i.prototype.setAnimation=function(t,e,r){var a=this.data.skeletonData.findAnimation(e);if(a==null)throw new Error("Animation not found: "+e);return this.setAnimationWith(t,a,r)},i.prototype.setAnimationWith=function(t,e,r){if(e==null)throw new Error("animation cannot be null.");var a=!0,n=this.expandToIndex(t);n!=null&&(n.nextTrackLast==-1?(this.tracks[t]=n.mixingFrom,this.queue.interrupt(n),this.queue.end(n),this.disposeNext(n),n=n.mixingFrom,a=!1):this.disposeNext(n));var h=this.trackEntry(t,e,r,n);return this.setCurrent(t,h,a),this.queue.drain(),h},i.prototype.addAnimation=function(t,e,r,a){var n=this.data.skeletonData.findAnimation(e);if(n==null)throw new Error("Animation not found: "+e);return this.addAnimationWith(t,n,r,a)},i.prototype.addAnimationWith=function(t,e,r,a){if(e==null)throw new Error("animation cannot be null.");var n=this.expandToIndex(t);if(n!=null)for(;n.next!=null;)n=n.next;var h=this.trackEntry(t,e,r,n);if(n==null)this.setCurrent(t,h,!0),this.queue.drain();else if(n.next=h,a<=0){var f=n.animationEnd-n.animationStart;f!=0?(n.loop?a+=f*(1+(n.trackTime/f|0)):a+=Math.max(f,n.trackTime),a-=this.data.getMix(n.animation,e)):a=n.trackTime}return h.delay=a,h},i.prototype.setEmptyAnimation=function(t,e){var r=this.setAnimationWith(t,i.emptyAnimation,!1);return r.mixDuration=e,r.trackEnd=e,r},i.prototype.addEmptyAnimation=function(t,e,r){r<=0&&(r-=e);var a=this.addAnimationWith(t,i.emptyAnimation,!1,r);return a.mixDuration=e,a.trackEnd=e,a},i.prototype.setEmptyAnimations=function(t){var e=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(var r=0,a=this.tracks.length;r<a;r++){var n=this.tracks[r];n!=null&&this.setEmptyAnimation(n.trackIndex,t)}this.queue.drainDisabled=e,this.queue.drain()},i.prototype.expandToIndex=function(t){return t<this.tracks.length?this.tracks[t]:(Y.ensureArrayCapacity(this.tracks,t+1,null),this.tracks.length=t+1,null)},i.prototype.trackEntry=function(t,e,r,a){var n=this.trackEntryPool.obtain();return n.trackIndex=t,n.animation=e,n.loop=r,n.holdPrevious=!1,n.eventThreshold=0,n.attachmentThreshold=0,n.drawOrderThreshold=0,n.animationStart=0,n.animationEnd=e.duration,n.animationLast=-1,n.nextAnimationLast=-1,n.delay=0,n.trackTime=0,n.trackLast=-1,n.nextTrackLast=-1,n.trackEnd=Number.MAX_VALUE,n.timeScale=1,n.alpha=1,n.interruptAlpha=1,n.mixTime=0,n.mixDuration=a==null?0:this.data.getMix(a.animation,e),n.mixBlend=b.replace,n},i.prototype.disposeNext=function(t){for(var e=t.next;e!=null;)this.queue.dispose(e),e=e.next;t.next=null},i.prototype._animationsChanged=function(){this.animationsChanged=!1,this.propertyIDs.clear();for(var t=0,e=this.tracks.length;t<e;t++){var r=this.tracks[t];if(r!=null){for(;r.mixingFrom!=null;)r=r.mixingFrom;do(r.mixingFrom==null||r.mixBlend!=b.add)&&this.computeHold(r),r=r.mixingTo;while(r!=null)}}},i.prototype.computeHold=function(t){var e=t.mixingTo,r=t.animation.timelines,a=t.animation.timelines.length,n=Y.setArraySize(t.timelineMode,a);t.timelineHoldMix.length=0;var h=Y.setArraySize(t.timelineHoldMix,a),f=this.propertyIDs;if(e!=null&&e.holdPrevious){for(var c=0;c<a;c++)n[c]=f.add(r[c].getPropertyId())?i.HOLD_FIRST:i.HOLD_SUBSEQUENT;return}t:for(var c=0;c<a;c++){var o=r[c],s=o.getPropertyId();if(!f.add(s))n[c]=i.SUBSEQUENT;else if(e==null||o instanceof me||o instanceof Ce||o instanceof ir||!e.animation.hasTimeline(s))n[c]=i.FIRST;else{for(var l=e.mixingTo;l!=null;l=l.mixingTo)if(!l.animation.hasTimeline(s)){if(t.mixDuration>0){n[c]=i.HOLD_MIX,h[c]=l;continue t}break}n[c]=i.HOLD_FIRST}}},i.prototype.getCurrent=function(t){return t>=this.tracks.length?null:this.tracks[t]},i.prototype.addListener=function(t){if(t==null)throw new Error("listener cannot be null.");this.listeners.push(t)},i.prototype.removeListener=function(t){var e=this.listeners.indexOf(t);e>=0&&this.listeners.splice(e,1)},i.prototype.clearListeners=function(){this.listeners.length=0},i.prototype.clearListenerNotifications=function(){this.queue.clear()},i.prototype.setAnimationByName=function(t,e,r){i.deprecatedWarning1||(i.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: AnimationState.setAnimationByName is deprecated, please use setAnimation from now on.")),this.setAnimation(t,e,r)},i.prototype.addAnimationByName=function(t,e,r,a){i.deprecatedWarning2||(i.deprecatedWarning2=!0,console.warn("Spine Deprecation Warning: AnimationState.addAnimationByName is deprecated, please use addAnimation from now on.")),this.addAnimation(t,e,r,a)},i.prototype.hasAnimation=function(t){var e=this.data.skeletonData.findAnimation(t);return e!==null},i.prototype.hasAnimationByName=function(t){return i.deprecatedWarning3||(i.deprecatedWarning3=!0,console.warn("Spine Deprecation Warning: AnimationState.hasAnimationByName is deprecated, please use hasAnimation from now on.")),this.hasAnimation(t)},i.emptyAnimation=new xt("<empty>",[],0),i.SUBSEQUENT=0,i.FIRST=1,i.HOLD_SUBSEQUENT=2,i.HOLD_FIRST=3,i.HOLD_MIX=4,i.SETUP=1,i.CURRENT=2,i.deprecatedWarning1=!1,i.deprecatedWarning2=!1,i.deprecatedWarning3=!1,i}(),en=function(){function i(){this.mixBlend=b.replace,this.timelineMode=new Array,this.timelineHoldMix=new Array,this.timelinesRotation=new Array}return i.prototype.reset=function(){this.next=null,this.mixingFrom=null,this.mixingTo=null,this.animation=null,this.listener=null,this.timelineMode.length=0,this.timelineHoldMix.length=0,this.timelinesRotation.length=0},i.prototype.getAnimationTime=function(){if(this.loop){var t=this.animationEnd-this.animationStart;return t==0?this.animationStart:this.trackTime%t+this.animationStart}return Math.min(this.trackTime+this.animationStart,this.animationEnd)},i.prototype.setAnimationLast=function(t){this.animationLast=t,this.nextAnimationLast=t},i.prototype.isComplete=function(){return this.trackTime>=this.animationEnd-this.animationStart},i.prototype.resetRotationDirections=function(){this.timelinesRotation.length=0},Object.defineProperty(i.prototype,"time",{get:function(){return i.deprecatedWarning1||(i.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: TrackEntry.time is deprecated, please use trackTime from now on.")),this.trackTime},set:function(t){i.deprecatedWarning1||(i.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: TrackEntry.time is deprecated, please use trackTime from now on.")),this.trackTime=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"endTime",{get:function(){return i.deprecatedWarning2||(i.deprecatedWarning2=!0,console.warn("Spine Deprecation Warning: TrackEntry.endTime is deprecated, please use trackEnd from now on.")),this.trackTime},set:function(t){i.deprecatedWarning2||(i.deprecatedWarning2=!0,console.warn("Spine Deprecation Warning: TrackEntry.endTime is deprecated, please use trackEnd from now on.")),this.trackTime=t},enumerable:!1,configurable:!0}),i.prototype.loopsCount=function(){return Math.floor(this.trackTime/this.trackEnd)},i.deprecatedWarning1=!1,i.deprecatedWarning2=!1,i}(),rn=function(){function i(t){this.objects=[],this.drainDisabled=!1,this.animState=t}return i.prototype.start=function(t){this.objects.push(Nt.start),this.objects.push(t),this.animState.animationsChanged=!0},i.prototype.interrupt=function(t){this.objects.push(Nt.interrupt),this.objects.push(t)},i.prototype.end=function(t){this.objects.push(Nt.end),this.objects.push(t),this.animState.animationsChanged=!0},i.prototype.dispose=function(t){this.objects.push(Nt.dispose),this.objects.push(t)},i.prototype.complete=function(t){this.objects.push(Nt.complete),this.objects.push(t)},i.prototype.event=function(t,e){this.objects.push(Nt.event),this.objects.push(t),this.objects.push(e)},i.prototype.deprecateStuff=function(){return i.deprecatedWarning1||(i.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: onComplete, onStart, onEnd, onEvent art deprecated, please use listeners from now on. 'state.addListener({ complete: function(track, event) { } })'")),!0},i.prototype.drain=function(){if(!this.drainDisabled){this.drainDisabled=!0;for(var t=this.objects,e=this.animState.listeners,r=0;r<t.length;r+=2){var a=t[r],n=t[r+1];switch(a){case Nt.start:n.listener!=null&&n.listener.start&&n.listener.start(n);for(var h=0;h<e.length;h++)e[h].start&&e[h].start(n);n.onStart&&this.deprecateStuff()&&n.onStart(n.trackIndex),this.animState.onStart&&this.deprecateStuff()&&this.deprecateStuff&&this.animState.onStart(n.trackIndex);break;case Nt.interrupt:n.listener!=null&&n.listener.interrupt&&n.listener.interrupt(n);for(var h=0;h<e.length;h++)e[h].interrupt&&e[h].interrupt(n);break;case Nt.end:n.listener!=null&&n.listener.end&&n.listener.end(n);for(var h=0;h<e.length;h++)e[h].end&&e[h].end(n);n.onEnd&&this.deprecateStuff()&&n.onEnd(n.trackIndex),this.animState.onEnd&&this.deprecateStuff()&&this.animState.onEnd(n.trackIndex);case Nt.dispose:n.listener!=null&&n.listener.dispose&&n.listener.dispose(n);for(var h=0;h<e.length;h++)e[h].dispose&&e[h].dispose(n);this.animState.trackEntryPool.free(n);break;case Nt.complete:n.listener!=null&&n.listener.complete&&n.listener.complete(n);for(var h=0;h<e.length;h++)e[h].complete&&e[h].complete(n);var f=M.toInt(n.loopsCount());n.onComplete&&this.deprecateStuff()&&n.onComplete(n.trackIndex,f),this.animState.onComplete&&this.deprecateStuff()&&this.animState.onComplete(n.trackIndex,f);break;case Nt.event:var c=t[r+++2];n.listener!=null&&n.listener.event&&n.listener.event(n,c);for(var h=0;h<e.length;h++)e[h].event&&e[h].event(n,c);n.onEvent&&this.deprecateStuff()&&n.onEvent(n.trackIndex,c),this.animState.onEvent&&this.deprecateStuff()&&this.animState.onEvent(n.trackIndex,c);break}}this.clear(),this.drainDisabled=!1}},i.prototype.clear=function(){this.objects.length=0},i.deprecatedWarning1=!1,i}(),Nt;(function(i){i[i.start=0]="start",i[i.interrupt=1]="interrupt",i[i.end=2]="end",i[i.dispose=3]="dispose",i[i.complete=4]="complete",i[i.event=5]="event"})(Nt||(Nt={}));var Ai=function(){function i(){}return i.prototype.start=function(t){},i.prototype.interrupt=function(t){},i.prototype.end=function(t){},i.prototype.dispose=function(t){},i.prototype.complete=function(t){},i.prototype.event=function(t,e){},i}(),an=function(){function i(t){if(this.animationToMixTime={},this.defaultMix=0,t==null)throw new Error("skeletonData cannot be null.");this.skeletonData=t}return i.prototype.setMix=function(t,e,r){var a=this.skeletonData.findAnimation(t);if(a==null)throw new Error("Animation not found: "+t);var n=this.skeletonData.findAnimation(e);if(n==null)throw new Error("Animation not found: "+e);this.setMixWith(a,n,r)},i.prototype.setMixByName=function(t,e,r){i.deprecatedWarning1||(i.deprecatedWarning1=!0,console.warn("Deprecation Warning: AnimationStateData.setMixByName is deprecated, please use setMix from now on.")),this.setMix(t,e,r)},i.prototype.setMixWith=function(t,e,r){if(t==null)throw new Error("from cannot be null.");if(e==null)throw new Error("to cannot be null.");var a=t.name+"."+e.name;this.animationToMixTime[a]=r},i.prototype.getMix=function(t,e){var r=t.name+"."+e.name,a=this.animationToMixTime[r];return a===void 0?this.defaultMix:a},i.deprecatedWarning1=!1,i}(),Ur=function(){function i(t){this.atlas=t}return i.prototype.newRegionAttachment=function(t,e,r){var a=this.atlas.findRegion(r);if(a==null)throw new Error("Region not found in atlas: "+r+" (region attachment: "+e+")");var n=new Or(e);return n.region=a,n},i.prototype.newMeshAttachment=function(t,e,r){var a=this.atlas.findRegion(r);if(a==null)throw new Error("Region not found in atlas: "+r+" (mesh attachment: "+e+")");var n=new nr(e);return n.region=a,n},i.prototype.newBoundingBoxAttachment=function(t,e){return new Ja(e)},i.prototype.newPathAttachment=function(t,e){return new Xe(e)},i.prototype.newPointAttachment=function(t,e){return new Qa(e)},i.prototype.newClippingAttachment=function(t,e){return new Ka(e)},i}(),Sr=function(){function i(t,e,r){if(this.matrix=new Br,this.children=new Array,this.x=0,this.y=0,this.rotation=0,this.scaleX=0,this.scaleY=0,this.shearX=0,this.shearY=0,this.ax=0,this.ay=0,this.arotation=0,this.ascaleX=0,this.ascaleY=0,this.ashearX=0,this.ashearY=0,this.appliedValid=!1,this.sorted=!1,this.active=!1,t==null)throw new Error("data cannot be null.");if(e==null)throw new Error("skeleton cannot be null.");this.data=t,this.skeleton=e,this.parent=r,this.setToSetupPose()}return Object.defineProperty(i.prototype,"worldX",{get:function(){return this.matrix.tx},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"worldY",{get:function(){return this.matrix.ty},enumerable:!1,configurable:!0}),i.prototype.isActive=function(){return this.active},i.prototype.update=function(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)},i.prototype.updateWorldTransform=function(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)},i.prototype.updateWorldTransformWith=function(t,e,r,a,n,h,f){this.ax=t,this.ay=e,this.arotation=r,this.ascaleX=a,this.ascaleY=n,this.ashearX=h,this.ashearY=f,this.appliedValid=!0;var c=this.parent,o=this.matrix,s=this.skeleton.scaleX,l=Ht.yDown?-this.skeleton.scaleY:this.skeleton.scaleY;if(c==null){var u=this.skeleton,d=r+90+f;o.a=M.cosDeg(r+h)*a*s,o.c=M.cosDeg(d)*n*s,o.b=M.sinDeg(r+h)*a*l,o.d=M.sinDeg(d)*n*l,o.tx=t*s+u.x,o.ty=e*l+u.y;return}var v=c.matrix.a,p=c.matrix.c,y=c.matrix.b,g=c.matrix.d;switch(o.tx=v*t+p*e+c.matrix.tx,o.ty=y*t+g*e+c.matrix.ty,this.data.transformMode){case Q.Normal:{var d=r+90+f,m=M.cosDeg(r+h)*a,w=M.cosDeg(d)*n,x=M.sinDeg(r+h)*a,E=M.sinDeg(d)*n;o.a=v*m+p*x,o.c=v*w+p*E,o.b=y*m+g*x,o.d=y*w+g*E;return}case Q.OnlyTranslation:{var d=r+90+f;o.a=M.cosDeg(r+h)*a,o.c=M.cosDeg(d)*n,o.b=M.sinDeg(r+h)*a,o.d=M.sinDeg(d)*n;break}case Q.NoRotationOrReflection:{var S=v*v+y*y,A=0;S>1e-4?(S=Math.abs(v*g-p*y)/S,v/=this.skeleton.scaleX,y/=this.skeleton.scaleY,p=y*S,g=v*S,A=Math.atan2(y,v)*M.radDeg):(v=0,y=0,A=90-Math.atan2(g,p)*M.radDeg);var T=r+h-A,C=r+f-A+90,m=M.cosDeg(T)*a,w=M.cosDeg(C)*n,x=M.sinDeg(T)*a,E=M.sinDeg(C)*n;o.a=v*m-p*x,o.c=v*w-p*E,o.b=y*m+g*x,o.d=y*w+g*E;break}case Q.NoScale:case Q.NoScaleOrReflection:{var I=M.cosDeg(r),P=M.sinDeg(r),R=(v*I+p*P)/s,V=(y*I+g*P)/l,S=Math.sqrt(R*R+V*V);S>1e-5&&(S=1/S),R*=S,V*=S,S=Math.sqrt(R*R+V*V),this.data.transformMode==Q.NoScale&&v*g-p*y<0!=(Ht.yDown?this.skeleton.scaleX<0!=this.skeleton.scaleY>0:this.skeleton.scaleX<0!=this.skeleton.scaleY<0)&&(S=-S);var k=Math.PI/2+Math.atan2(V,R),B=Math.cos(k)*S,D=Math.sin(k)*S,m=M.cosDeg(h)*a,w=M.cosDeg(90+f)*n,x=M.sinDeg(h)*a,E=M.sinDeg(90+f)*n;o.a=R*m+B*x,o.c=R*w+B*E,o.b=V*m+D*x,o.d=V*w+D*E;break}}o.a*=s,o.c*=s,o.b*=l,o.d*=l},i.prototype.setToSetupPose=function(){var t=this.data;this.x=t.x,this.y=t.y,this.rotation=t.rotation,this.scaleX=t.scaleX,this.scaleY=t.scaleY,this.shearX=t.shearX,this.shearY=t.shearY},i.prototype.getWorldRotationX=function(){return Math.atan2(this.matrix.b,this.matrix.a)*M.radDeg},i.prototype.getWorldRotationY=function(){return Math.atan2(this.matrix.d,this.matrix.c)*M.radDeg},i.prototype.getWorldScaleX=function(){var t=this.matrix;return Math.sqrt(t.a*t.a+t.c*t.c)},i.prototype.getWorldScaleY=function(){var t=this.matrix;return Math.sqrt(t.b*t.b+t.d*t.d)},i.prototype.updateAppliedTransform=function(){this.appliedValid=!0;var t=this.parent,e=this.matrix;if(t==null){this.ax=e.tx,this.ay=e.ty,this.arotation=Math.atan2(e.b,e.a)*M.radDeg,this.ascaleX=Math.sqrt(e.a*e.a+e.b*e.b),this.ascaleY=Math.sqrt(e.c*e.c+e.d*e.d),this.ashearX=0,this.ashearY=Math.atan2(e.a*e.c+e.b*e.d,e.a*e.d-e.b*e.c)*M.radDeg;return}var r=t.matrix,a=1/(r.a*r.d-r.b*r.c),n=e.tx-r.tx,h=e.ty-r.ty;this.ax=n*r.d*a-h*r.c*a,this.ay=h*r.a*a-n*r.b*a;var f=a*r.d,c=a*r.a,o=a*r.c,s=a*r.b,l=f*e.a-o*e.b,u=f*e.c-o*e.d,d=c*e.b-s*e.a,v=c*e.d-s*e.c;if(this.ashearX=0,this.ascaleX=Math.sqrt(l*l+d*d),this.ascaleX>1e-4){var p=l*v-u*d;this.ascaleY=p/this.ascaleX,this.ashearY=Math.atan2(l*u+d*v,p)*M.radDeg,this.arotation=Math.atan2(d,l)*M.radDeg}else this.ascaleX=0,this.ascaleY=Math.sqrt(u*u+v*v),this.ashearY=0,this.arotation=90-Math.atan2(v,u)*M.radDeg},i.prototype.worldToLocal=function(t){var e=this.matrix,r=e.a,a=e.c,n=e.b,h=e.d,f=1/(r*h-a*n),c=t.x-e.tx,o=t.y-e.ty;return t.x=c*h*f-o*a*f,t.y=o*r*f-c*n*f,t},i.prototype.localToWorld=function(t){var e=this.matrix,r=t.x,a=t.y;return t.x=r*e.a+a*e.c+e.tx,t.y=r*e.b+a*e.d+e.ty,t},i.prototype.worldToLocalRotation=function(t){var e=M.sinDeg(t),r=M.cosDeg(t),a=this.matrix;return Math.atan2(a.a*e-a.b*r,a.d*r-a.c*e)*M.radDeg},i.prototype.localToWorldRotation=function(t){var e=M.sinDeg(t),r=M.cosDeg(t),a=this.matrix;return Math.atan2(r*a.b+e*a.d,r*a.a+e*a.c)*M.radDeg},i.prototype.rotateWorld=function(t){var e=this.matrix,r=e.a,a=e.c,n=e.b,h=e.d,f=M.cosDeg(t),c=M.sinDeg(t);e.a=f*r-c*n,e.c=f*a-c*h,e.b=c*r+f*n,e.d=c*a+f*h,this.appliedValid=!1},i}(),_r=function(){function i(t,e,r){if(this.x=0,this.y=0,this.rotation=0,this.scaleX=1,this.scaleY=1,this.shearX=0,this.shearY=0,this.transformMode=Q.Normal,this.skinRequired=!1,this.color=new G,t<0)throw new Error("index must be >= 0.");if(e==null)throw new Error("name cannot be null.");this.index=t,this.name=e,this.parent=r}return i}(),sr=function(){function i(t,e,r){this.name=t,this.order=e,this.skinRequired=r}return i}(),Hr=function(){function i(t,e){if(e==null)throw new Error("data cannot be null.");this.time=t,this.data=e}return i}(),$r=function(){function i(t){this.name=t}return i}(),nn=function(){function i(t,e){if(this.bendDirection=0,this.compress=!1,this.stretch=!1,this.mix=1,this.softness=0,this.active=!1,t==null)throw new Error("data cannot be null.");if(e==null)throw new Error("skeleton cannot be null.");this.data=t,this.mix=t.mix,this.softness=t.softness,this.bendDirection=t.bendDirection,this.compress=t.compress,this.stretch=t.stretch,this.bones=new Array;for(var r=0;r<t.bones.length;r++)this.bones.push(e.findBone(t.bones[r].name));this.target=e.findBone(t.target.name)}return i.prototype.isActive=function(){return this.active},i.prototype.apply=function(){this.update()},i.prototype.update=function(){var t=this.target,e=this.bones;switch(e.length){case 1:this.apply1(e[0],t.worldX,t.worldY,this.compress,this.stretch,this.data.uniform,this.mix);break;case 2:this.apply2(e[0],e[1],t.worldX,t.worldY,this.bendDirection,this.stretch,this.softness,this.mix);break}},i.prototype.apply1=function(t,e,r,a,n,h,f){t.appliedValid||t.updateAppliedTransform();var c=t.parent.matrix,o=c.a,s=c.c,l=c.b,u=c.d,d=-t.ashearX-t.arotation,v=0,p=0;switch(t.data.transformMode){case Q.OnlyTranslation:v=e-t.worldX,p=r-t.worldY;break;case Q.NoRotationOrReflection:var y=Math.abs(o*u-s*l)/(o*o+l*l),g=o/t.skeleton.scaleX,m=l/t.skeleton.scaleY;s=-m*y*t.skeleton.scaleX,u=g*y*t.skeleton.scaleY,d+=Math.atan2(m,g)*M.radDeg;default:var w=e-c.tx,x=r-c.ty,E=o*u-s*l;v=(w*u-x*s)/E-t.ax,p=(x*o-w*l)/E-t.ay}d+=Math.atan2(p,v)*M.radDeg,t.ascaleX<0&&(d+=180),d>180?d-=360:d<-180&&(d+=360);var S=t.ascaleX,A=t.ascaleY;if(a||n){switch(t.data.transformMode){case Q.NoScale:case Q.NoScaleOrReflection:v=e-t.worldX,p=r-t.worldY}var T=t.data.length*S,C=Math.sqrt(v*v+p*p);if(a&&C<T||n&&C>T&&T>1e-4){var y=(C/T-1)*f+1;S*=y,h&&(A*=y)}}t.updateWorldTransformWith(t.ax,t.ay,t.arotation+d*f,S,A,t.ashearX,t.ashearY)},i.prototype.apply2=function(t,e,r,a,n,h,f,c){if(c==0){e.updateWorldTransform();return}t.appliedValid||t.updateAppliedTransform(),e.appliedValid||e.updateAppliedTransform();var o=t.ax,s=t.ay,l=t.ascaleX,u=l,d=t.ascaleY,v=e.ascaleX,p=t.matrix,y=0,g=0,m=0;l<0?(l=-l,y=180,m=-1):(y=0,m=1),d<0&&(d=-d,m=-m),v<0?(v=-v,g=180):g=0;var w=e.ax,x=0,E=0,S=0,A=p.a,T=p.c,C=p.b,I=p.d,P=Math.abs(l-d)<=1e-4;P?(x=e.ay,E=A*w+T*x+p.tx,S=C*w+I*x+p.ty):(x=0,E=A*w+p.tx,S=C*w+p.ty);var R=t.parent.matrix;A=R.a,T=R.c,C=R.b,I=R.d;var V=1/(A*I-T*C),k=E-R.tx,B=S-R.ty,D=(k*I-B*T)*V-o,L=(B*A-k*C)*V-s,H=Math.sqrt(D*D+L*L),_=e.data.length*v,O,U;if(H<1e-4){this.apply1(t,r,a,!1,h,!1,c),e.updateWorldTransformWith(w,x,0,e.ascaleX,e.ascaleY,e.ashearX,e.ashearY);return}k=r-R.tx,B=a-R.ty;var W=(k*I-B*T)*V-o,N=(B*A-k*C)*V-s,F=W*W+N*N;if(f!=0){f*=l*(v+1)/2;var q=Math.sqrt(F),$=q-H-_*l+f;if($>0){var z=Math.min(1,$/(f*2))-1;z=($-f*(1-z*z))/q,W-=z*W,N-=z*N,F=W*W+N*N}}t:if(P){_*=l;var j=(F-H*H-_*_)/(2*H*_);j<-1?j=-1:j>1&&(j=1,h&&(u*=(Math.sqrt(F)/(H+_)-1)*c+1)),U=Math.acos(j)*n,A=H+_*j,T=_*Math.sin(U),O=Math.atan2(N*A-W*T,W*A+N*T)}else{A=l*_,T=d*_;var J=A*A,K=T*T,Z=Math.atan2(N,W);C=K*H*H+J*F-J*K;var tt=-2*K*H,ht=K-J;if(I=tt*tt-4*ht*C,I>=0){var it=Math.sqrt(I);tt<0&&(it=-it),it=-(tt+it)/2;var ut=it/ht,ot=C/it,ft=Math.abs(ut)<Math.abs(ot)?ut:ot;if(ft*ft<=F){B=Math.sqrt(F-ft*ft)*n,O=Z-Math.atan2(B,ft),U=Math.atan2(B/d,(ft-H)/l);break t}}var pt=M.PI,yt=H-A,Pt=yt*yt,Ft=0,Yt=0,St=H+A,Ut=St*St,Wt=0;C=-A*H/(J-K),C>=-1&&C<=1&&(C=Math.acos(C),k=A*Math.cos(C)+H,B=T*Math.sin(C),I=k*k+B*B,I<Pt&&(pt=C,Pt=I,yt=k,Ft=B),I>Ut&&(Yt=C,Ut=I,St=k,Wt=B)),F<=(Pt+Ut)/2?(O=Z-Math.atan2(Ft*n,yt),U=pt*n):(O=Z-Math.atan2(Wt*n,St),U=Yt*n)}var Vt=Math.atan2(x,w)*m,Bt=t.arotation;O=(O-Vt)*M.radDeg+y-Bt,O>180?O-=360:O<-180&&(O+=360),t.updateWorldTransformWith(o,s,Bt+O*c,u,t.ascaleY,0,0),Bt=e.arotation,U=((U+Vt)*M.radDeg-e.ashearX)*m+g-Bt,U>180?U-=360:U<-180&&(U+=360),e.updateWorldTransformWith(w,x,Bt+U*c,e.ascaleX,e.ascaleY,e.ashearX,e.ashearY)},i}(),Gr=function(i){dt(t,i);function t(e){var r=i.call(this,e,0,!1)||this;return r.bones=new Array,r.bendDirection=1,r.compress=!1,r.stretch=!1,r.uniform=!1,r.mix=1,r.softness=0,r}return t}(sr),jr=function(i){dt(t,i);function t(e){var r=i.call(this,e,0,!1)||this;return r.bones=new Array,r}return t}(sr),Ct;(function(i){i[i.Length=0]="Length",i[i.Fixed=1]="Fixed",i[i.Percent=2]="Percent"})(Ct||(Ct={}));var sn=function(){function i(t,e){if(this.position=0,this.spacing=0,this.rotateMix=0,this.translateMix=0,this.spaces=new Array,this.positions=new Array,this.world=new Array,this.curves=new Array,this.lengths=new Array,this.segments=new Array,this.active=!1,t==null)throw new Error("data cannot be null.");if(e==null)throw new Error("skeleton cannot be null.");this.data=t,this.bones=new Array;for(var r=0,a=t.bones.length;r<a;r++)this.bones.push(e.findBone(t.bones[r].name));this.target=e.findSlot(t.target.name),this.position=t.position,this.spacing=t.spacing,this.rotateMix=t.rotateMix,this.translateMix=t.translateMix}return i.prototype.isActive=function(){return this.active},i.prototype.apply=function(){this.update()},i.prototype.update=function(){var t=this.target.getAttachment();if(t instanceof Xe){var e=this.rotateMix,r=this.translateMix,a=r>0,n=e>0;if(!(!a&&!n)){var h=this.data,f=h.spacingMode,c=f==Ct.Length,o=h.rotateMode,s=o==gt.Tangent,l=o==gt.ChainScale,u=this.bones.length,d=s?u:u+1,v=this.bones,p=Y.setArraySize(this.spaces,d),y=null,g=this.spacing;if(l||c){l&&(y=Y.setArraySize(this.lengths,u));for(var m=0,w=d-1;m<w;){var x=v[m],E=x.data.length;if(E<i.epsilon)l&&(y[m]=0),p[++m]=0;else{var S=E*x.matrix.a,A=E*x.matrix.b,T=Math.sqrt(S*S+A*A);l&&(y[m]=T),p[++m]=(c?E+g:g)*T/E}}}else for(var m=1;m<d;m++)p[m]=g;var C=this.computeWorldPositions(t,d,s,h.positionMode==vt.Percent,f==Ct.Percent),I=C[0],P=C[1],R=h.offsetRotation,V=!1;if(R==0)V=o==gt.Chain;else{V=!1;var k=this.target.bone.matrix;R*=k.a*k.d-k.b*k.c>0?M.degRad:-M.degRad}for(var m=0,k=3;m<u;m++,k+=3){var x=v[m],B=x.matrix;B.tx+=(I-B.tx)*r,B.ty+=(P-B.ty)*r;var S=C[k],A=C[k+1],D=S-I,L=A-P;if(l){var H=y[m];if(H!=0){var _=(Math.sqrt(D*D+L*L)/H-1)*e+1;B.a*=_,B.b*=_}}if(I=S,P=A,n){var O=B.a,U=B.c,W=B.b,N=B.d,F=0,q=0,$=0;if(s?F=C[k-1]:p[m+1]==0?F=C[k+2]:F=Math.atan2(L,D),F-=Math.atan2(W,O),V){q=Math.cos(F),$=Math.sin(F);var z=x.data.length;I+=(z*(q*O-$*W)-D)*e,P+=(z*($*O+q*W)-L)*e}else F+=R;F>M.PI?F-=M.PI2:F<-M.PI&&(F+=M.PI2),F*=e,q=Math.cos(F),$=Math.sin(F),B.a=q*O-$*W,B.c=q*U-$*N,B.b=$*O+q*W,B.d=$*U+q*N}x.appliedValid=!1}}}},i.prototype.computeWorldPositions=function(t,e,r,a,n){var h=this.target,f=this.position,c=this.spaces,o=Y.setArraySize(this.positions,e*3+2),s=null,l=t.closed,u=t.worldVerticesLength,d=u/6,v=i.NONE;if(!t.constantSpeed){var p=t.lengths;d-=l?1:2;var y=p[d];if(a&&(f*=y),n)for(var g=0;g<e;g++)c[g]*=y;s=Y.setArraySize(this.world,8);for(var g=0,m=0,w=0;g<e;g++,m+=3){var x=c[g];f+=x;var E=f;if(l)E%=y,E<0&&(E+=y),w=0;else if(E<0){v!=i.BEFORE&&(v=i.BEFORE,t.computeWorldVertices(h,2,4,s,0,2)),this.addBeforePosition(E,s,0,o,m);continue}else if(E>y){v!=i.AFTER&&(v=i.AFTER,t.computeWorldVertices(h,u-6,4,s,0,2)),this.addAfterPosition(E-y,s,0,o,m);continue}for(;;w++){var S=p[w];if(!(E>S)){if(w==0)E/=S;else{var A=p[w-1];E=(E-A)/(S-A)}break}}w!=v&&(v=w,l&&w==d?(t.computeWorldVertices(h,u-4,4,s,0,2),t.computeWorldVertices(h,0,4,s,4,2)):t.computeWorldVertices(h,w*6+2,8,s,0,2)),this.addCurvePosition(E,s[0],s[1],s[2],s[3],s[4],s[5],s[6],s[7],o,m,r||g>0&&x==0)}return o}l?(u+=2,s=Y.setArraySize(this.world,u),t.computeWorldVertices(h,2,u-4,s,0,2),t.computeWorldVertices(h,0,2,s,u-4,2),s[u-2]=s[0],s[u-1]=s[1]):(d--,u-=4,s=Y.setArraySize(this.world,u),t.computeWorldVertices(h,2,u,s,0,2));for(var T=Y.setArraySize(this.curves,d),C=0,I=s[0],P=s[1],R=0,V=0,k=0,B=0,D=0,L=0,H=0,_=0,O=0,U=0,W=0,N=0,F=0,q=0,g=0,$=2;g<d;g++,$+=6)R=s[$],V=s[$+1],k=s[$+2],B=s[$+3],D=s[$+4],L=s[$+5],H=(I-R*2+k)*.1875,_=(P-V*2+B)*.1875,O=((R-k)*3-I+D)*.09375,U=((V-B)*3-P+L)*.09375,W=H*2+O,N=_*2+U,F=(R-I)*.75+H+O*.16666667,q=(V-P)*.75+_+U*.16666667,C+=Math.sqrt(F*F+q*q),F+=W,q+=N,W+=O,N+=U,C+=Math.sqrt(F*F+q*q),F+=W,q+=N,C+=Math.sqrt(F*F+q*q),F+=W+O,q+=N+U,C+=Math.sqrt(F*F+q*q),T[g]=C,I=D,P=L;if(a&&(f*=C),n)for(var g=0;g<e;g++)c[g]*=C;for(var z=this.segments,j=0,g=0,m=0,w=0,J=0;g<e;g++,m+=3){var x=c[g];f+=x;var E=f;if(l)E%=C,E<0&&(E+=C),w=0;else if(E<0){this.addBeforePosition(E,s,0,o,m);continue}else if(E>C){this.addAfterPosition(E-C,s,u-4,o,m);continue}for(;;w++){var K=T[w];if(!(E>K)){if(w==0)E/=K;else{var A=T[w-1];E=(E-A)/(K-A)}break}}if(w!=v){v=w;var Z=w*6;for(I=s[Z],P=s[Z+1],R=s[Z+2],V=s[Z+3],k=s[Z+4],B=s[Z+5],D=s[Z+6],L=s[Z+7],H=(I-R*2+k)*.03,_=(P-V*2+B)*.03,O=((R-k)*3-I+D)*.006,U=((V-B)*3-P+L)*.006,W=H*2+O,N=_*2+U,F=(R-I)*.3+H+O*.16666667,q=(V-P)*.3+_+U*.16666667,j=Math.sqrt(F*F+q*q),z[0]=j,Z=1;Z<8;Z++)F+=W,q+=N,W+=O,N+=U,j+=Math.sqrt(F*F+q*q),z[Z]=j;F+=W,q+=N,j+=Math.sqrt(F*F+q*q),z[8]=j,F+=W+O,q+=N+U,j+=Math.sqrt(F*F+q*q),z[9]=j,J=0}for(E*=j;;J++){var tt=z[J];if(!(E>tt)){if(J==0)E/=tt;else{var A=z[J-1];E=J+(E-A)/(tt-A)}break}}this.addCurvePosition(E*.1,I,P,R,V,k,B,D,L,o,m,r||g>0&&x==0)}return o},i.prototype.addBeforePosition=function(t,e,r,a,n){var h=e[r],f=e[r+1],c=e[r+2]-h,o=e[r+3]-f,s=Math.atan2(o,c);a[n]=h+t*Math.cos(s),a[n+1]=f+t*Math.sin(s),a[n+2]=s},i.prototype.addAfterPosition=function(t,e,r,a,n){var h=e[r+2],f=e[r+3],c=h-e[r],o=f-e[r+1],s=Math.atan2(o,c);a[n]=h+t*Math.cos(s),a[n+1]=f+t*Math.sin(s),a[n+2]=s},i.prototype.addCurvePosition=function(t,e,r,a,n,h,f,c,o,s,l,u){(t==0||isNaN(t))&&(t=1e-4);var d=t*t,v=d*t,p=1-t,y=p*p,g=y*p,m=p*t,w=m*3,x=p*w,E=w*t,S=e*g+a*x+h*E+c*v,A=r*g+n*x+f*E+o*v;s[l]=S,s[l+1]=A,u&&(s[l+2]=Math.atan2(A-(r*y+n*m*2+f*d),S-(e*y+a*m*2+h*d)))},i.NONE=-1,i.BEFORE=-2,i.AFTER=-3,i.epsilon=1e-5,i}(),on=function(){function i(t,e){if(this.rotateMix=0,this.translateMix=0,this.scaleMix=0,this.shearMix=0,this.temp=new Be,this.active=!1,t==null)throw new Error("data cannot be null.");if(e==null)throw new Error("skeleton cannot be null.");this.data=t,this.rotateMix=t.rotateMix,this.translateMix=t.translateMix,this.scaleMix=t.scaleMix,this.shearMix=t.shearMix,this.bones=new Array;for(var r=0;r<t.bones.length;r++)this.bones.push(e.findBone(t.bones[r].name));this.target=e.findBone(t.target.name)}return i.prototype.isActive=function(){return this.active},i.prototype.apply=function(){this.update()},i.prototype.update=function(){this.data.local?this.data.relative?this.applyRelativeLocal():this.applyAbsoluteLocal():this.data.relative?this.applyRelativeWorld():this.applyAbsoluteWorld()},i.prototype.applyAbsoluteWorld=function(){for(var t=this.rotateMix,e=this.translateMix,r=this.scaleMix,a=this.shearMix,n=this.target,h=n.matrix,f=h.a,c=h.c,o=h.b,s=h.d,l=f*s-c*o>0?M.degRad:-M.degRad,u=this.data.offsetRotation*l,d=this.data.offsetShearY*l,v=this.bones,p=0,y=v.length;p<y;p++){var g=v[p],m=!1,w=g.matrix;if(t!=0){var x=w.a,E=w.c,S=w.b,A=w.d,T=Math.atan2(o,f)-Math.atan2(S,x)+u;T>M.PI?T-=M.PI2:T<-M.PI&&(T+=M.PI2),T*=t;var C=Math.cos(T),I=Math.sin(T);w.a=C*x-I*S,w.c=C*E-I*A,w.b=I*x+C*S,w.d=I*E+C*A,m=!0}if(e!=0){var P=this.temp;n.localToWorld(P.set(this.data.offsetX,this.data.offsetY)),w.tx+=(P.x-w.tx)*e,w.ty+=(P.y-w.ty)*e,m=!0}if(r>0){var R=Math.sqrt(w.a*w.a+w.b*w.b),V=Math.sqrt(f*f+o*o);R>1e-5&&(R=(R+(V-R+this.data.offsetScaleX)*r)/R),w.a*=R,w.b*=R,R=Math.sqrt(w.c*w.c+w.d*w.d),V=Math.sqrt(c*c+s*s),R>1e-5&&(R=(R+(V-R+this.data.offsetScaleY)*r)/R),w.c*=R,w.d*=R,m=!0}if(a>0){var E=w.c,A=w.d,k=Math.atan2(A,E),T=Math.atan2(s,c)-Math.atan2(o,f)-(k-Math.atan2(w.b,w.a));T>M.PI?T-=M.PI2:T<-M.PI&&(T+=M.PI2),T=k+(T+d)*a;var R=Math.sqrt(E*E+A*A);w.c=Math.cos(T)*R,w.d=Math.sin(T)*R,m=!0}m&&(g.appliedValid=!1)}},i.prototype.applyRelativeWorld=function(){for(var t=this.rotateMix,e=this.translateMix,r=this.scaleMix,a=this.shearMix,n=this.target,h=n.matrix,f=h.a,c=h.c,o=h.b,s=h.d,l=f*s-c*o>0?M.degRad:-M.degRad,u=this.data.offsetRotation*l,d=this.data.offsetShearY*l,v=this.bones,p=0,y=v.length;p<y;p++){var g=v[p],m=!1,w=g.matrix;if(t!=0){var x=w.a,E=w.c,S=w.b,A=w.d,T=Math.atan2(o,f)+u;T>M.PI?T-=M.PI2:T<-M.PI&&(T+=M.PI2),T*=t;var C=Math.cos(T),I=Math.sin(T);w.a=C*x-I*S,w.c=C*E-I*A,w.b=I*x+C*S,w.d=I*E+C*A,m=!0}if(e!=0){var P=this.temp;n.localToWorld(P.set(this.data.offsetX,this.data.offsetY)),w.tx+=P.x*e,w.ty+=P.y*e,m=!0}if(r>0){var R=(Math.sqrt(f*f+o*o)-1+this.data.offsetScaleX)*r+1;w.a*=R,w.b*=R,R=(Math.sqrt(c*c+s*s)-1+this.data.offsetScaleY)*r+1,w.c*=R,w.d*=R,m=!0}if(a>0){var T=Math.atan2(s,c)-Math.atan2(o,f);T>M.PI?T-=M.PI2:T<-M.PI&&(T+=M.PI2);var E=w.c,A=w.d;T=Math.atan2(A,E)+(T-M.PI/2+d)*a;var R=Math.sqrt(E*E+A*A);w.c=Math.cos(T)*R,w.d=Math.sin(T)*R,m=!0}m&&(g.appliedValid=!1)}},i.prototype.applyAbsoluteLocal=function(){var t=this.rotateMix,e=this.translateMix,r=this.scaleMix,a=this.shearMix,n=this.target;n.appliedValid||n.updateAppliedTransform();for(var h=this.bones,f=0,c=h.length;f<c;f++){var o=h[f];o.appliedValid||o.updateAppliedTransform();var s=o.arotation;if(t!=0){var l=n.arotation-s+this.data.offsetRotation;l-=(16384-(16384.499999999996-l/360|0))*360,s+=l*t}var u=o.ax,d=o.ay;e!=0&&(u+=(n.ax-u+this.data.offsetX)*e,d+=(n.ay-d+this.data.offsetY)*e);var v=o.ascaleX,p=o.ascaleY;r>0&&(v>1e-5&&(v=(v+(n.ascaleX-v+this.data.offsetScaleX)*r)/v),p>1e-5&&(p=(p+(n.ascaleY-p+this.data.offsetScaleY)*r)/p));var y=o.ashearY;if(a>0){var l=n.ashearY-y+this.data.offsetShearY;l-=(16384-(16384.499999999996-l/360|0))*360,o.shearY+=l*a}o.updateWorldTransformWith(u,d,s,v,p,o.ashearX,y)}},i.prototype.applyRelativeLocal=function(){var t=this.rotateMix,e=this.translateMix,r=this.scaleMix,a=this.shearMix,n=this.target;n.appliedValid||n.updateAppliedTransform();for(var h=this.bones,f=0,c=h.length;f<c;f++){var o=h[f];o.appliedValid||o.updateAppliedTransform();var s=o.arotation;t!=0&&(s+=(n.arotation+this.data.offsetRotation)*t);var l=o.ax,u=o.ay;e!=0&&(l+=(n.ax+this.data.offsetX)*e,u+=(n.ay+this.data.offsetY)*e);var d=o.ascaleX,v=o.ascaleY;r>0&&(d>1e-5&&(d*=(n.ascaleX-1+this.data.offsetScaleX)*r+1),v>1e-5&&(v*=(n.ascaleY-1+this.data.offsetScaleY)*r+1));var p=o.ashearY;a>0&&(p+=(n.ashearY+this.data.offsetShearY)*a),o.updateWorldTransformWith(l,u,s,d,v,o.ashearX,p)}},i}(),hn=function(){function i(t){if(this._updateCache=new Array,this.updateCacheReset=new Array,this.time=0,this.scaleX=1,this.scaleY=1,this.x=0,this.y=0,t==null)throw new Error("data cannot be null.");this.data=t,this.bones=new Array;for(var e=0;e<t.bones.length;e++){var r=t.bones[e],a=void 0;if(r.parent==null)a=new Sr(r,this,null);else{var n=this.bones[r.parent.index];a=new Sr(r,this,n),n.children.push(a)}this.bones.push(a)}this.slots=new Array,this.drawOrder=new Array;for(var e=0;e<t.slots.length;e++){var h=t.slots[e],a=this.bones[h.boneData.index],f=new Nr(h,a);this.slots.push(f),this.drawOrder.push(f)}this.ikConstraints=new Array;for(var e=0;e<t.ikConstraints.length;e++){var c=t.ikConstraints[e];this.ikConstraints.push(new nn(c,this))}this.transformConstraints=new Array;for(var e=0;e<t.transformConstraints.length;e++){var o=t.transformConstraints[e];this.transformConstraints.push(new on(o,this))}this.pathConstraints=new Array;for(var e=0;e<t.pathConstraints.length;e++){var s=t.pathConstraints[e];this.pathConstraints.push(new sn(s,this))}this.color=new G(1,1,1,1),this.updateCache()}return i.prototype.updateCache=function(){var t=this._updateCache;t.length=0,this.updateCacheReset.length=0;for(var e=this.bones,r=0,a=e.length;r<a;r++){var n=e[r];n.sorted=n.data.skinRequired,n.active=!n.sorted}if(this.skin!=null)for(var h=this.skin.bones,r=0,a=this.skin.bones.length;r<a;r++){var n=this.bones[h[r].index];do n.sorted=!1,n.active=!0,n=n.parent;while(n!=null)}var f=this.ikConstraints,c=this.transformConstraints,o=this.pathConstraints,s=f.length,l=c.length,u=o.length,d=s+l+u;t:for(var r=0;r<d;r++){for(var v=0;v<s;v++){var p=f[v];if(p.data.order==r){this.sortIkConstraint(p);continue t}}for(var v=0;v<l;v++){var p=c[v];if(p.data.order==r){this.sortTransformConstraint(p);continue t}}for(var v=0;v<u;v++){var p=o[v];if(p.data.order==r){this.sortPathConstraint(p);continue t}}}for(var r=0,a=e.length;r<a;r++)this.sortBone(e[r])},i.prototype.sortIkConstraint=function(t){if(t.active=t.target.isActive()&&(!t.data.skinRequired||this.skin!=null&&Y.contains(this.skin.constraints,t.data,!0)),!!t.active){var e=t.target;this.sortBone(e);var r=t.bones,a=r[0];if(this.sortBone(a),r.length>1){var n=r[r.length-1];this._updateCache.indexOf(n)>-1||this.updateCacheReset.push(n)}this._updateCache.push(t),this.sortReset(a.children),r[r.length-1].sorted=!0}},i.prototype.sortPathConstraint=function(t){if(t.active=t.target.bone.isActive()&&(!t.data.skinRequired||this.skin!=null&&Y.contains(this.skin.constraints,t.data,!0)),!!t.active){var e=t.target,r=e.data.index,a=e.bone;this.skin!=null&&this.sortPathConstraintAttachment(this.skin,r,a),this.data.defaultSkin!=null&&this.data.defaultSkin!=this.skin&&this.sortPathConstraintAttachment(this.data.defaultSkin,r,a);for(var n=0,h=this.data.skins.length;n<h;n++)this.sortPathConstraintAttachment(this.data.skins[n],r,a);var f=e.getAttachment();f instanceof Xe&&this.sortPathConstraintAttachmentWith(f,a);for(var c=t.bones,o=c.length,n=0;n<o;n++)this.sortBone(c[n]);this._updateCache.push(t);for(var n=0;n<o;n++)this.sortReset(c[n].children);for(var n=0;n<o;n++)c[n].sorted=!0}},i.prototype.sortTransformConstraint=function(t){if(t.active=t.target.isActive()&&(!t.data.skinRequired||this.skin!=null&&Y.contains(this.skin.constraints,t.data,!0)),!!t.active){this.sortBone(t.target);var e=t.bones,r=e.length;if(t.data.local)for(var a=0;a<r;a++){var n=e[a];this.sortBone(n.parent),this._updateCache.indexOf(n)>-1||this.updateCacheReset.push(n)}else for(var a=0;a<r;a++)this.sortBone(e[a]);this._updateCache.push(t);for(var h=0;h<r;h++)this.sortReset(e[h].children);for(var h=0;h<r;h++)e[h].sorted=!0}},i.prototype.sortPathConstraintAttachment=function(t,e,r){var a=t.attachments[e];if(a)for(var n in a)this.sortPathConstraintAttachmentWith(a[n],r)},i.prototype.sortPathConstraintAttachmentWith=function(t,e){if(t instanceof Xe){var r=t.bones;if(r==null)this.sortBone(e);else for(var a=this.bones,n=0;n<r.length;)for(var h=r[n++],f=n+h;n<f;n++){var c=r[n];this.sortBone(a[c])}}},i.prototype.sortBone=function(t){if(!t.sorted){var e=t.parent;e!=null&&this.sortBone(e),t.sorted=!0,this._updateCache.push(t)}},i.prototype.sortReset=function(t){for(var e=0,r=t.length;e<r;e++){var a=t[e];a.active&&(a.sorted&&this.sortReset(a.children),a.sorted=!1)}},i.prototype.updateWorldTransform=function(){for(var t=this.updateCacheReset,e=0,r=t.length;e<r;e++){var a=t[e];a.ax=a.x,a.ay=a.y,a.arotation=a.rotation,a.ascaleX=a.scaleX,a.ascaleY=a.scaleY,a.ashearX=a.shearX,a.ashearY=a.shearY,a.appliedValid=!0}for(var n=this._updateCache,e=0,r=n.length;e<r;e++)n[e].update()},i.prototype.setToSetupPose=function(){this.setBonesToSetupPose(),this.setSlotsToSetupPose()},i.prototype.setBonesToSetupPose=function(){for(var t=this.bones,e=0,r=t.length;e<r;e++)t[e].setToSetupPose();for(var a=this.ikConstraints,e=0,r=a.length;e<r;e++){var n=a[e];n.mix=n.data.mix,n.softness=n.data.softness,n.bendDirection=n.data.bendDirection,n.compress=n.data.compress,n.stretch=n.data.stretch}for(var h=this.transformConstraints,e=0,r=h.length;e<r;e++){var n=h[e],f=n.data;n.rotateMix=f.rotateMix,n.translateMix=f.translateMix,n.scaleMix=f.scaleMix,n.shearMix=f.shearMix}for(var c=this.pathConstraints,e=0,r=c.length;e<r;e++){var n=c[e],f=n.data;n.position=f.position,n.spacing=f.spacing,n.rotateMix=f.rotateMix,n.translateMix=f.translateMix}},i.prototype.setSlotsToSetupPose=function(){var t=this.slots;Y.arrayCopy(t,0,this.drawOrder,0,t.length);for(var e=0,r=t.length;e<r;e++)t[e].setToSetupPose()},i.prototype.getRootBone=function(){return this.bones.length==0?null:this.bones[0]},i.prototype.findBone=function(t){if(t==null)throw new Error("boneName cannot be null.");for(var e=this.bones,r=0,a=e.length;r<a;r++){var n=e[r];if(n.data.name==t)return n}return null},i.prototype.findBoneIndex=function(t){if(t==null)throw new Error("boneName cannot be null.");for(var e=this.bones,r=0,a=e.length;r<a;r++)if(e[r].data.name==t)return r;return-1},i.prototype.findSlot=function(t){if(t==null)throw new Error("slotName cannot be null.");for(var e=this.slots,r=0,a=e.length;r<a;r++){var n=e[r];if(n.data.name==t)return n}return null},i.prototype.findSlotIndex=function(t){if(t==null)throw new Error("slotName cannot be null.");for(var e=this.slots,r=0,a=e.length;r<a;r++)if(e[r].data.name==t)return r;return-1},i.prototype.setSkinByName=function(t){var e=this.data.findSkin(t);if(e==null)throw new Error("Skin not found: "+t);this.setSkin(e)},i.prototype.setSkin=function(t){if(t!=this.skin){if(t!=null)if(this.skin!=null)t.attachAll(this,this.skin);else for(var e=this.slots,r=0,a=e.length;r<a;r++){var n=e[r],h=n.data.attachmentName;if(h!=null){var f=t.getAttachment(r,h);f!=null&&n.setAttachment(f)}}this.skin=t,this.updateCache()}},i.prototype.getAttachmentByName=function(t,e){return this.getAttachment(this.data.findSlotIndex(t),e)},i.prototype.getAttachment=function(t,e){if(e==null)throw new Error("attachmentName cannot be null.");if(this.skin!=null){var r=this.skin.getAttachment(t,e);if(r!=null)return r}return this.data.defaultSkin!=null?this.data.defaultSkin.getAttachment(t,e):null},i.prototype.setAttachment=function(t,e){if(t==null)throw new Error("slotName cannot be null.");for(var r=this.slots,a=0,n=r.length;a<n;a++){var h=r[a];if(h.data.name==t){var f=null;if(e!=null&&(f=this.getAttachment(a,e),f==null))throw new Error("Attachment not found: "+e+", for slot: "+t);h.setAttachment(f);return}}throw new Error("Slot not found: "+t)},i.prototype.findIkConstraint=function(t){if(t==null)throw new Error("constraintName cannot be null.");for(var e=this.ikConstraints,r=0,a=e.length;r<a;r++){var n=e[r];if(n.data.name==t)return n}return null},i.prototype.findTransformConstraint=function(t){if(t==null)throw new Error("constraintName cannot be null.");for(var e=this.transformConstraints,r=0,a=e.length;r<a;r++){var n=e[r];if(n.data.name==t)return n}return null},i.prototype.findPathConstraint=function(t){if(t==null)throw new Error("constraintName cannot be null.");for(var e=this.pathConstraints,r=0,a=e.length;r<a;r++){var n=e[r];if(n.data.name==t)return n}return null},i.prototype.getBounds=function(t,e,r){if(r===void 0&&(r=new Array(2)),t==null)throw new Error("offset cannot be null.");if(e==null)throw new Error("size cannot be null.");for(var a=this.drawOrder,n=Number.POSITIVE_INFINITY,h=Number.POSITIVE_INFINITY,f=Number.NEGATIVE_INFINITY,c=Number.NEGATIVE_INFINITY,o=0,s=a.length;o<s;o++){var l=a[o];if(l.bone.active){var u=0,d=null,v=l.getAttachment();if(v instanceof Or)u=8,d=Y.setArraySize(r,u,0),v.computeWorldVertices(l.bone,d,0,2);else if(v instanceof nr){var p=v;u=p.worldVerticesLength,d=Y.setArraySize(r,u,0),p.computeWorldVertices(l,0,u,d,0,2)}if(d!=null)for(var y=0,g=d.length;y<g;y+=2){var m=d[y],w=d[y+1];n=Math.min(n,m),h=Math.min(h,w),f=Math.max(f,m),c=Math.max(c,w)}}}t.set(n,h),e.set(f-n,c-h)},i.prototype.update=function(t){this.time+=t},Object.defineProperty(i.prototype,"flipX",{get:function(){return this.scaleX==-1},set:function(t){i.deprecatedWarning1||(i.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: `Skeleton.flipX/flipY` was deprecated, please use scaleX/scaleY")),this.scaleX=t?1:-1},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"flipY",{get:function(){return this.scaleY==-1},set:function(t){i.deprecatedWarning1||(i.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: `Skeleton.flipX/flipY` was deprecated, please use scaleX/scaleY")),this.scaleY=t?1:-1},enumerable:!1,configurable:!0}),i.deprecatedWarning1=!1,i}(),zr=function(){function i(){this.bones=new Array,this.slots=new Array,this.skins=new Array,this.events=new Array,this.animations=new Array,this.ikConstraints=new Array,this.transformConstraints=new Array,this.pathConstraints=new Array,this.fps=0}return i.prototype.findBone=function(t){if(t==null)throw new Error("boneName cannot be null.");for(var e=this.bones,r=0,a=e.length;r<a;r++){var n=e[r];if(n.name==t)return n}return null},i.prototype.findBoneIndex=function(t){if(t==null)throw new Error("boneName cannot be null.");for(var e=this.bones,r=0,a=e.length;r<a;r++)if(e[r].name==t)return r;return-1},i.prototype.findSlot=function(t){if(t==null)throw new Error("slotName cannot be null.");for(var e=this.slots,r=0,a=e.length;r<a;r++){var n=e[r];if(n.name==t)return n}return null},i.prototype.findSlotIndex=function(t){if(t==null)throw new Error("slotName cannot be null.");for(var e=this.slots,r=0,a=e.length;r<a;r++)if(e[r].name==t)return r;return-1},i.prototype.findSkin=function(t){if(t==null)throw new Error("skinName cannot be null.");for(var e=this.skins,r=0,a=e.length;r<a;r++){var n=e[r];if(n.name==t)return n}return null},i.prototype.findEvent=function(t){if(t==null)throw new Error("eventDataName cannot be null.");for(var e=this.events,r=0,a=e.length;r<a;r++){var n=e[r];if(n.name==t)return n}return null},i.prototype.findAnimation=function(t){if(t==null)throw new Error("animationName cannot be null.");for(var e=this.animations,r=0,a=e.length;r<a;r++){var n=e[r];if(n.name==t)return n}return null},i.prototype.findIkConstraint=function(t){if(t==null)throw new Error("constraintName cannot be null.");for(var e=this.ikConstraints,r=0,a=e.length;r<a;r++){var n=e[r];if(n.name==t)return n}return null},i.prototype.findTransformConstraint=function(t){if(t==null)throw new Error("constraintName cannot be null.");for(var e=this.transformConstraints,r=0,a=e.length;r<a;r++){var n=e[r];if(n.name==t)return n}return null},i.prototype.findPathConstraint=function(t){if(t==null)throw new Error("constraintName cannot be null.");for(var e=this.pathConstraints,r=0,a=e.length;r<a;r++){var n=e[r];if(n.name==t)return n}return null},i.prototype.findPathConstraintIndex=function(t){if(t==null)throw new Error("pathConstraintName cannot be null.");for(var e=this.pathConstraints,r=0,a=e.length;r<a;r++)if(e[r].name==t)return r;return-1},i}(),Zr=function(){function i(t,e,r){if(this.color=new G(1,1,1,1),t<0)throw new Error("index must be >= 0.");if(e==null)throw new Error("name cannot be null.");if(r==null)throw new Error("boneData cannot be null.");this.index=t,this.name=e,this.boneData=r}return i}(),Jr=function(i){dt(t,i);function t(e){var r=i.call(this,e,0,!1)||this;return r.bones=new Array,r.rotateMix=0,r.translateMix=0,r.scaleMix=0,r.shearMix=0,r.offsetRotation=0,r.offsetX=0,r.offsetY=0,r.offsetScaleX=0,r.offsetScaleY=0,r.offsetShearY=0,r.relative=!1,r.local=!1,r}return t}(sr),Ar=function(){function i(t,e,r){this.slotIndex=t,this.name=e,this.attachment=r}return i}(),Ze=function(){function i(t){if(this.attachments=new Array,this.bones=Array(),this.constraints=new Array,t==null)throw new Error("name cannot be null.");this.name=t}return i.prototype.setAttachment=function(t,e,r){if(r==null)throw new Error("attachment cannot be null.");var a=this.attachments;t>=a.length&&(a.length=t+1),a[t]||(a[t]={}),a[t][e]=r},i.prototype.addSkin=function(t){for(var e=0;e<t.bones.length;e++){for(var r=t.bones[e],a=!1,n=0;n<this.bones.length;n++)if(this.bones[n]==r){a=!0;break}a||this.bones.push(r)}for(var e=0;e<t.constraints.length;e++){for(var h=t.constraints[e],a=!1,n=0;n<this.constraints.length;n++)if(this.constraints[n]==h){a=!0;break}a||this.constraints.push(h)}for(var f=t.getAttachments(),e=0;e<f.length;e++){var c=f[e];this.setAttachment(c.slotIndex,c.name,c.attachment)}},i.prototype.copySkin=function(t){for(var e=0;e<t.bones.length;e++){for(var r=t.bones[e],a=!1,n=0;n<this.bones.length;n++)if(this.bones[n]==r){a=!0;break}a||this.bones.push(r)}for(var e=0;e<t.constraints.length;e++){for(var h=t.constraints[e],a=!1,n=0;n<this.constraints.length;n++)if(this.constraints[n]==h){a=!0;break}a||this.constraints.push(h)}for(var f=t.getAttachments(),e=0;e<f.length;e++){var c=f[e];c.attachment!=null&&(c.attachment instanceof nr?(c.attachment=c.attachment.newLinkedMesh(),this.setAttachment(c.slotIndex,c.name,c.attachment)):(c.attachment=c.attachment.copy(),this.setAttachment(c.slotIndex,c.name,c.attachment)))}},i.prototype.getAttachment=function(t,e){var r=this.attachments[t];return r?r[e]:null},i.prototype.removeAttachment=function(t,e){var r=this.attachments[t];r&&(r[e]=null)},i.prototype.getAttachments=function(){for(var t=new Array,e=0;e<this.attachments.length;e++){var r=this.attachments[e];if(r)for(var a in r){var n=r[a];n&&t.push(new Ar(e,a,n))}}return t},i.prototype.getAttachmentsForSlot=function(t,e){var r=this.attachments[t];if(r)for(var a in r){var n=r[a];n&&e.push(new Ar(t,a,n))}},i.prototype.clear=function(){this.attachments.length=0,this.bones.length=0,this.constraints.length=0},i.prototype.attachAll=function(t,e){for(var r=0,a=0;a<t.slots.length;a++){var n=t.slots[a],h=n.getAttachment();if(h&&r<e.attachments.length){var f=e.attachments[r];for(var c in f){var o=f[c];if(h==o){var s=this.getAttachment(r,c);s!=null&&n.setAttachment(s);break}}}r++}},i}(),ln=function(){function i(t){this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=t}return i.prototype.readSkeletonData=function(t){var e=this.scale,r=new zr;r.name="";var a=new ze(t);if(r.hash=a.readString(),r.version=a.readString(),r.version==="3.8.75"){var n="Unsupported skeleton data, 3.8.75 is deprecated, please export with a newer version of Spine.";console.error(n)}r.x=a.readFloat(),r.y=a.readFloat(),r.width=a.readFloat(),r.height=a.readFloat();var h=a.readBoolean();h&&(r.fps=a.readFloat(),r.imagesPath=a.readString(),r.audioPath=a.readString());var f=0;f=a.readInt(!0);for(var c=0;c<f;c++)a.strings.push(a.readString());f=a.readInt(!0);for(var c=0;c<f;c++){var o=a.readString(),s=c==0?null:r.bones[a.readInt(!0)],l=new _r(c,o,s);l.rotation=a.readFloat(),l.x=a.readFloat()*e,l.y=a.readFloat()*e,l.scaleX=a.readFloat(),l.scaleY=a.readFloat(),l.shearX=a.readFloat(),l.shearY=a.readFloat(),l.length=a.readFloat()*e,l.transformMode=i.TransformModeValues[a.readInt(!0)],l.skinRequired=a.readBoolean(),h&&G.rgba8888ToColor(l.color,a.readInt32()),r.bones.push(l)}f=a.readInt(!0);for(var c=0;c<f;c++){var u=a.readString(),d=r.bones[a.readInt(!0)],l=new Zr(c,u,d);G.rgba8888ToColor(l.color,a.readInt32());var v=a.readInt32();v!=-1&&G.rgb888ToColor(l.darkColor=new G,v),l.attachmentName=a.readStringRef(),l.blendMode=i.BlendModeValues[a.readInt(!0)],r.slots.push(l)}f=a.readInt(!0);for(var c=0,p=void 0;c<f;c++){var l=new Gr(a.readString());l.order=a.readInt(!0),l.skinRequired=a.readBoolean(),p=a.readInt(!0);for(var y=0;y<p;y++)l.bones.push(r.bones[a.readInt(!0)]);l.target=r.bones[a.readInt(!0)],l.mix=a.readFloat(),l.softness=a.readFloat()*e,l.bendDirection=a.readByte(),l.compress=a.readBoolean(),l.stretch=a.readBoolean(),l.uniform=a.readBoolean(),r.ikConstraints.push(l)}f=a.readInt(!0);for(var c=0,p=void 0;c<f;c++){var l=new Jr(a.readString());l.order=a.readInt(!0),l.skinRequired=a.readBoolean(),p=a.readInt(!0);for(var y=0;y<p;y++)l.bones.push(r.bones[a.readInt(!0)]);l.target=r.bones[a.readInt(!0)],l.local=a.readBoolean(),l.relative=a.readBoolean(),l.offsetRotation=a.readFloat(),l.offsetX=a.readFloat()*e,l.offsetY=a.readFloat()*e,l.offsetScaleX=a.readFloat(),l.offsetScaleY=a.readFloat(),l.offsetShearY=a.readFloat(),l.rotateMix=a.readFloat(),l.translateMix=a.readFloat(),l.scaleMix=a.readFloat(),l.shearMix=a.readFloat(),r.transformConstraints.push(l)}f=a.readInt(!0);for(var c=0,p=void 0;c<f;c++){var l=new jr(a.readString());l.order=a.readInt(!0),l.skinRequired=a.readBoolean(),p=a.readInt(!0);for(var y=0;y<p;y++)l.bones.push(r.bones[a.readInt(!0)]);l.target=r.slots[a.readInt(!0)],l.positionMode=i.PositionModeValues[a.readInt(!0)],l.spacingMode=i.SpacingModeValues[a.readInt(!0)],l.rotateMode=i.RotateModeValues[a.readInt(!0)],l.offsetRotation=a.readFloat(),l.position=a.readFloat(),l.positionMode==vt.Fixed&&(l.position*=e),l.spacing=a.readFloat(),(l.spacingMode==Ct.Length||l.spacingMode==Ct.Fixed)&&(l.spacing*=e),l.rotateMix=a.readFloat(),l.translateMix=a.readFloat(),r.pathConstraints.push(l)}var g=this.readSkin(a,r,!0,h);g!=null&&(r.defaultSkin=g,r.skins.push(g));{var c=r.skins.length;for(Y.setArraySize(r.skins,f=c+a.readInt(!0));c<f;c++)r.skins[c]=this.readSkin(a,r,!1,h)}f=this.linkedMeshes.length;for(var c=0;c<f;c++){var m=this.linkedMeshes[c],w=m.skin==null?r.defaultSkin:r.findSkin(m.skin);if(w==null)throw new Error("Skin not found: "+m.skin);var x=w.getAttachment(m.slotIndex,m.parent);if(x==null)throw new Error("Parent mesh not found: "+m.parent);m.mesh.deformAttachment=m.inheritDeform?x:m.mesh,m.mesh.setParentMesh(x)}this.linkedMeshes.length=0,f=a.readInt(!0);for(var c=0;c<f;c++){var l=new $r(a.readStringRef());l.intValue=a.readInt(!1),l.floatValue=a.readFloat(),l.stringValue=a.readString(),l.audioPath=a.readString(),l.audioPath!=null&&(l.volume=a.readFloat(),l.balance=a.readFloat()),r.events.push(l)}f=a.readInt(!0);for(var c=0;c<f;c++)r.animations.push(this.readAnimation(a,a.readString(),r));return r},i.prototype.readSkin=function(t,e,r,a){var n=null,h=0;if(r){if(h=t.readInt(!0),h==0)return null;n=new Ze("default")}else{n=new Ze(t.readStringRef()),n.bones.length=t.readInt(!0);for(var f=0,c=n.bones.length;f<c;f++)n.bones[f]=e.bones[t.readInt(!0)];for(var f=0,c=t.readInt(!0);f<c;f++)n.constraints.push(e.ikConstraints[t.readInt(!0)]);for(var f=0,c=t.readInt(!0);f<c;f++)n.constraints.push(e.transformConstraints[t.readInt(!0)]);for(var f=0,c=t.readInt(!0);f<c;f++)n.constraints.push(e.pathConstraints[t.readInt(!0)]);h=t.readInt(!0)}for(var f=0;f<h;f++)for(var o=t.readInt(!0),s=0,l=t.readInt(!0);s<l;s++){var u=t.readStringRef(),d=this.readAttachment(t,e,n,o,u,a);d!=null&&n.setAttachment(o,u,d)}return n},i.prototype.readAttachment=function(t,e,r,a,n,h){var f=this.scale,c=t.readStringRef();c==null&&(c=n);var o=t.readByte(),s=i.AttachmentTypeValues[o];switch(s){case et.Region:{var l=t.readStringRef(),u=t.readFloat(),d=t.readFloat(),v=t.readFloat(),p=t.readFloat(),y=t.readFloat(),g=t.readFloat(),m=t.readFloat(),w=t.readInt32();l==null&&(l=c);var x=this.attachmentLoader.newRegionAttachment(r,c,l);return x==null?null:(x.path=l,x.x=d*f,x.y=v*f,x.scaleX=p,x.scaleY=y,x.rotation=u,x.width=g*f,x.height=m*f,G.rgba8888ToColor(x.color,w),x)}case et.BoundingBox:{var E=t.readInt(!0),S=this.readVertices(t,E),w=h?t.readInt32():0,A=this.attachmentLoader.newBoundingBoxAttachment(r,c);return A==null?null:(A.worldVerticesLength=E<<1,A.vertices=S.vertices,A.bones=S.bones,h&&G.rgba8888ToColor(A.color,w),A)}case et.Mesh:{var l=t.readStringRef(),w=t.readInt32(),E=t.readInt(!0),T=this.readFloatArray(t,E<<1,1),C=this.readShortArray(t),S=this.readVertices(t,E),I=t.readInt(!0),P=null,g=0,m=0;h&&(P=this.readShortArray(t),g=t.readFloat(),m=t.readFloat()),l==null&&(l=c);var R=this.attachmentLoader.newMeshAttachment(r,c,l);return R==null?null:(R.path=l,G.rgba8888ToColor(R.color,w),R.bones=S.bones,R.vertices=S.vertices,R.worldVerticesLength=E<<1,R.triangles=C,R.regionUVs=new Float32Array(T),R.hullLength=I<<1,h&&(R.edges=P,R.width=g*f,R.height=m*f),R)}case et.LinkedMesh:{var l=t.readStringRef(),w=t.readInt32(),V=t.readStringRef(),k=t.readStringRef(),B=t.readBoolean(),g=0,m=0;h&&(g=t.readFloat(),m=t.readFloat()),l==null&&(l=c);var R=this.attachmentLoader.newMeshAttachment(r,c,l);return R==null?null:(R.path=l,G.rgba8888ToColor(R.color,w),h&&(R.width=g*f,R.height=m*f),this.linkedMeshes.push(new bi(R,V,a,k,B)),R)}case et.Path:{for(var D=t.readBoolean(),L=t.readBoolean(),E=t.readInt(!0),S=this.readVertices(t,E),H=Y.newArray(E/3,0),_=0,O=H.length;_<O;_++)H[_]=t.readFloat()*f;var w=h?t.readInt32():0,l=this.attachmentLoader.newPathAttachment(r,c);return l==null?null:(l.closed=D,l.constantSpeed=L,l.worldVerticesLength=E<<1,l.vertices=S.vertices,l.bones=S.bones,l.lengths=H,h&&G.rgba8888ToColor(l.color,w),l)}case et.Point:{var u=t.readFloat(),d=t.readFloat(),v=t.readFloat(),w=h?t.readInt32():0,U=this.attachmentLoader.newPointAttachment(r,c);return U==null?null:(U.x=d*f,U.y=v*f,U.rotation=u,h&&G.rgba8888ToColor(U.color,w),U)}case et.Clipping:{var W=t.readInt(!0),E=t.readInt(!0),S=this.readVertices(t,E),w=h?t.readInt32():0,N=this.attachmentLoader.newClippingAttachment(r,c);return N==null?null:(N.endSlot=e.slots[W],N.worldVerticesLength=E<<1,N.vertices=S.vertices,N.bones=S.bones,h&&G.rgba8888ToColor(N.color,w),N)}}return null},i.prototype.readVertices=function(t,e){var r=e<<1,a=new Ti,n=this.scale;if(!t.readBoolean())return a.vertices=this.readFloatArray(t,r,n),a;for(var h=new Array,f=new Array,c=0;c<e;c++){var o=t.readInt(!0);f.push(o);for(var s=0;s<o;s++)f.push(t.readInt(!0)),h.push(t.readFloat()*n),h.push(t.readFloat()*n),h.push(t.readFloat())}return a.vertices=Y.toFloatArray(h),a.bones=f,a},i.prototype.readFloatArray=function(t,e,r){var a=new Array(e);if(r==1)for(var n=0;n<e;n++)a[n]=t.readFloat();else for(var n=0;n<e;n++)a[n]=t.readFloat()*r;return a},i.prototype.readShortArray=function(t){for(var e=t.readInt(!0),r=new Array(e),a=0;a<e;a++)r[a]=t.readShort();return r},i.prototype.readAnimation=function(t,e,r){for(var a=new Array,n=this.scale,h=0,f=new G,c=new G,o=0,s=t.readInt(!0);o<s;o++)for(var l=t.readInt(!0),u=0,d=t.readInt(!0);u<d;u++){var v=t.readByte(),p=t.readInt(!0);switch(v){case i.SLOT_ATTACHMENT:{var y=new me(p);y.slotIndex=l;for(var g=0;g<p;g++)y.setFrame(g,t.readFloat(),t.readStringRef());a.push(y),h=Math.max(h,y.frames[p-1]);break}case i.SLOT_COLOR:{var y=new Ne(p);y.slotIndex=l;for(var g=0;g<p;g++){var m=t.readFloat();G.rgba8888ToColor(f,t.readInt32()),y.setFrame(g,m,f.r,f.g,f.b,f.a),g<p-1&&this.readCurve(t,g,y)}a.push(y),h=Math.max(h,y.frames[(p-1)*Ne.ENTRIES]);break}case i.SLOT_TWO_COLOR:{var y=new Oe(p);y.slotIndex=l;for(var g=0;g<p;g++){var m=t.readFloat();G.rgba8888ToColor(f,t.readInt32()),G.rgb888ToColor(c,t.readInt32()),y.setFrame(g,m,f.r,f.g,f.b,f.a,c.r,c.g,c.b),g<p-1&&this.readCurve(t,g,y)}a.push(y),h=Math.max(h,y.frames[(p-1)*Oe.ENTRIES]);break}}}for(var o=0,s=t.readInt(!0);o<s;o++)for(var w=t.readInt(!0),u=0,d=t.readInt(!0);u<d;u++){var v=t.readByte(),p=t.readInt(!0);switch(v){case i.BONE_ROTATE:{var y=new _t(p);y.boneIndex=w;for(var g=0;g<p;g++)y.setFrame(g,t.readFloat(),t.readFloat()),g<p-1&&this.readCurve(t,g,y);a.push(y),h=Math.max(h,y.frames[(p-1)*_t.ENTRIES]);break}case i.BONE_TRANSLATE:case i.BONE_SCALE:case i.BONE_SHEAR:{var y=void 0,x=1;v==i.BONE_SCALE?y=new Dr(p):v==i.BONE_SHEAR?y=new Lr(p):(y=new we(p),x=n),y.boneIndex=w;for(var g=0;g<p;g++)y.setFrame(g,t.readFloat(),t.readFloat()*x,t.readFloat()*x),g<p-1&&this.readCurve(t,g,y);a.push(y),h=Math.max(h,y.frames[(p-1)*we.ENTRIES]);break}}}for(var o=0,s=t.readInt(!0);o<s;o++){var E=t.readInt(!0),p=t.readInt(!0),y=new De(p);y.ikConstraintIndex=E;for(var g=0;g<p;g++)y.setFrame(g,t.readFloat(),t.readFloat(),t.readFloat()*n,t.readByte(),t.readBoolean(),t.readBoolean()),g<p-1&&this.readCurve(t,g,y);a.push(y),h=Math.max(h,y.frames[(p-1)*De.ENTRIES])}for(var o=0,s=t.readInt(!0);o<s;o++){var E=t.readInt(!0),p=t.readInt(!0),y=new Le(p);y.transformConstraintIndex=E;for(var g=0;g<p;g++)y.setFrame(g,t.readFloat(),t.readFloat(),t.readFloat(),t.readFloat(),t.readFloat()),g<p-1&&this.readCurve(t,g,y);a.push(y),h=Math.max(h,y.frames[(p-1)*Le.ENTRIES])}for(var o=0,s=t.readInt(!0);o<s;o++)for(var E=t.readInt(!0),S=r.pathConstraints[E],u=0,d=t.readInt(!0);u<d;u++){var v=t.readByte(),p=t.readInt(!0);switch(v){case i.PATH_POSITION:case i.PATH_SPACING:{var y=void 0,x=1;v==i.PATH_SPACING?(y=new qr(p),(S.spacingMode==Ct.Length||S.spacingMode==Ct.Fixed)&&(x=n)):(y=new Me(p),S.positionMode==vt.Fixed&&(x=n)),y.pathConstraintIndex=E;for(var g=0;g<p;g++)y.setFrame(g,t.readFloat(),t.readFloat()*x),g<p-1&&this.readCurve(t,g,y);a.push(y),h=Math.max(h,y.frames[(p-1)*Me.ENTRIES]);break}case i.PATH_MIX:{var y=new We(p);y.pathConstraintIndex=E;for(var g=0;g<p;g++)y.setFrame(g,t.readFloat(),t.readFloat(),t.readFloat()),g<p-1&&this.readCurve(t,g,y);a.push(y),h=Math.max(h,y.frames[(p-1)*We.ENTRIES]);break}}}for(var o=0,s=t.readInt(!0);o<s;o++)for(var A=r.skins[t.readInt(!0)],u=0,d=t.readInt(!0);u<d;u++)for(var l=t.readInt(!0),T=0,C=t.readInt(!0);T<C;T++){var I=A.getAttachment(l,t.readStringRef()),P=I.bones!=null,R=I.vertices,V=P?R.length/3*2:R.length,p=t.readInt(!0),y=new Wr(p);y.slotIndex=l,y.attachment=I;for(var g=0;g<p;g++){var m=t.readFloat(),k=void 0,B=t.readInt(!0);if(B==0)k=P?Y.newFloatArray(V):R;else{k=Y.newFloatArray(V);var D=t.readInt(!0);if(B+=D,n==1)for(var L=D;L<B;L++)k[L]=t.readFloat();else for(var L=D;L<B;L++)k[L]=t.readFloat()*n;if(!P)for(var L=0,H=k.length;L<H;L++)k[L]+=R[L]}y.setFrame(g,m,k),g<p-1&&this.readCurve(t,g,y)}a.push(y),h=Math.max(h,y.frames[p-1])}var _=t.readInt(!0);if(_>0){for(var y=new Ce(_),O=r.slots.length,o=0;o<_;o++){for(var m=t.readFloat(),U=t.readInt(!0),W=Y.newArray(O,0),u=O-1;u>=0;u--)W[u]=-1;for(var N=Y.newArray(O-U,0),F=0,q=0,u=0;u<U;u++){for(var l=t.readInt(!0);F!=l;)N[q++]=F++;W[F+t.readInt(!0)]=F++}for(;F<O;)N[q++]=F++;for(var u=O-1;u>=0;u--)W[u]==-1&&(W[u]=N[--q]);y.setFrame(o,m,W)}a.push(y),h=Math.max(h,y.frames[_-1])}var $=t.readInt(!0);if($>0){for(var y=new ir($),o=0;o<$;o++){var m=t.readFloat(),z=r.events[t.readInt(!0)],j=new Hr(m,z);j.intValue=t.readInt(!1),j.floatValue=t.readFloat(),j.stringValue=t.readBoolean()?t.readString():z.stringValue,j.data.audioPath!=null&&(j.volume=t.readFloat(),j.balance=t.readFloat()),y.setFrame(o,j)}a.push(y),h=Math.max(h,y.frames[$-1])}return new xt(e,a,h)},i.prototype.readCurve=function(t,e,r){switch(t.readByte()){case i.CURVE_STEPPED:r.setStepped(e);break;case i.CURVE_BEZIER:this.setCurve(r,e,t.readFloat(),t.readFloat(),t.readFloat(),t.readFloat());break}},i.prototype.setCurve=function(t,e,r,a,n,h){t.setCurve(e,r,a,n,h)},i.AttachmentTypeValues=[0,1,2,3,4,5,6],i.TransformModeValues=[Q.Normal,Q.OnlyTranslation,Q.NoRotationOrReflection,Q.NoScale,Q.NoScaleOrReflection],i.PositionModeValues=[vt.Fixed,vt.Percent],i.SpacingModeValues=[Ct.Length,Ct.Fixed,Ct.Percent],i.RotateModeValues=[gt.Tangent,gt.Chain,gt.ChainScale],i.BlendModeValues=[wt.NORMAL,wt.ADD,wt.MULTIPLY,wt.SCREEN],i.BONE_ROTATE=0,i.BONE_TRANSLATE=1,i.BONE_SCALE=2,i.BONE_SHEAR=3,i.SLOT_ATTACHMENT=0,i.SLOT_COLOR=1,i.SLOT_TWO_COLOR=2,i.PATH_POSITION=0,i.PATH_SPACING=1,i.PATH_MIX=2,i.CURVE_LINEAR=0,i.CURVE_STEPPED=1,i.CURVE_BEZIER=2,i}(),bi=function(){function i(t,e,r,a,n){this.mesh=t,this.skin=e,this.slotIndex=r,this.parent=a,this.inheritDeform=n}return i}(),Ti=function(){function i(t,e){t===void 0&&(t=null),e===void 0&&(e=null),this.bones=t,this.vertices=e}return i}(),Ci=function(i){dt(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}return t}(ar),fn=function(){function i(t){this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=t}return i.prototype.readSkeletonData=function(t){var e=this.scale,r=new zr,a=typeof t=="string"?JSON.parse(t):t,n=a.skeleton;if(n!=null){if(r.hash=n.hash,r.version=n.spine,r.version.substr(0,3)!=="3.8"){var h="Spine 3.8 loader cant load version "+n.spine+". Please configure your pixi-spine bundle";console.error(h)}if(r.version==="3.8.75"){var h="Unsupported skeleton data, 3.8.75 is deprecated, please export with a newer version of Spine.";console.error(h)}r.x=n.x,r.y=n.y,r.width=n.width,r.height=n.height,r.fps=n.fps,r.imagesPath=n.images}if(a.bones)for(var f=0;f<a.bones.length;f++){var c=a.bones[f],o=null,s=this.getValue(c,"parent",null);if(s!=null&&(o=r.findBone(s),o==null))throw new Error("Parent bone not found: "+s);var l=new _r(r.bones.length,c.name,o);l.length=this.getValue(c,"length",0)*e,l.x=this.getValue(c,"x",0)*e,l.y=this.getValue(c,"y",0)*e,l.rotation=this.getValue(c,"rotation",0),l.scaleX=this.getValue(c,"scaleX",1),l.scaleY=this.getValue(c,"scaleY",1),l.shearX=this.getValue(c,"shearX",0),l.shearY=this.getValue(c,"shearY",0),l.transformMode=i.transformModeFromString(this.getValue(c,"transform","normal")),l.skinRequired=this.getValue(c,"skin",!1),r.bones.push(l)}if(a.slots)for(var f=0;f<a.slots.length;f++){var u=a.slots[f],d=u.name,v=u.bone,p=r.findBone(v);if(p==null)throw new Error("Slot bone not found: "+v);var l=new Zr(r.slots.length,d,p),y=this.getValue(u,"color",null);y!=null&&l.color.setFromString(y);var g=this.getValue(u,"dark",null);g!=null&&(l.darkColor=new G(1,1,1,1),l.darkColor.setFromString(g)),l.attachmentName=this.getValue(u,"attachment",null),l.blendMode=i.blendModeFromString(this.getValue(u,"blend","normal")),r.slots.push(l)}if(a.ik)for(var f=0;f<a.ik.length;f++){var m=a.ik[f],l=new Gr(m.name);l.order=this.getValue(m,"order",0),l.skinRequired=this.getValue(m,"skin",!1);for(var w=0;w<m.bones.length;w++){var v=m.bones[w],x=r.findBone(v);if(x==null)throw new Error("IK bone not found: "+v);l.bones.push(x)}var E=m.target;if(l.target=r.findBone(E),l.target==null)throw new Error("IK target bone not found: "+E);l.mix=this.getValue(m,"mix",1),l.softness=this.getValue(m,"softness",0)*e,l.bendDirection=this.getValue(m,"bendPositive",!0)?1:-1,l.compress=this.getValue(m,"compress",!1),l.stretch=this.getValue(m,"stretch",!1),l.uniform=this.getValue(m,"uniform",!1),r.ikConstraints.push(l)}if(a.transform)for(var f=0;f<a.transform.length;f++){var m=a.transform[f],l=new Jr(m.name);l.order=this.getValue(m,"order",0),l.skinRequired=this.getValue(m,"skin",!1);for(var w=0;w<m.bones.length;w++){var v=m.bones[w],x=r.findBone(v);if(x==null)throw new Error("Transform constraint bone not found: "+v);l.bones.push(x)}var E=m.target;if(l.target=r.findBone(E),l.target==null)throw new Error("Transform constraint target bone not found: "+E);l.local=this.getValue(m,"local",!1),l.relative=this.getValue(m,"relative",!1),l.offsetRotation=this.getValue(m,"rotation",0),l.offsetX=this.getValue(m,"x",0)*e,l.offsetY=this.getValue(m,"y",0)*e,l.offsetScaleX=this.getValue(m,"scaleX",0),l.offsetScaleY=this.getValue(m,"scaleY",0),l.offsetShearY=this.getValue(m,"shearY",0),l.rotateMix=this.getValue(m,"rotateMix",1),l.translateMix=this.getValue(m,"translateMix",1),l.scaleMix=this.getValue(m,"scaleMix",1),l.shearMix=this.getValue(m,"shearMix",1),r.transformConstraints.push(l)}if(a.path)for(var f=0;f<a.path.length;f++){var m=a.path[f],l=new jr(m.name);l.order=this.getValue(m,"order",0),l.skinRequired=this.getValue(m,"skin",!1);for(var w=0;w<m.bones.length;w++){var v=m.bones[w],x=r.findBone(v);if(x==null)throw new Error("Transform constraint bone not found: "+v);l.bones.push(x)}var E=m.target;if(l.target=r.findSlot(E),l.target==null)throw new Error("Path target slot not found: "+E);l.positionMode=i.positionModeFromString(this.getValue(m,"positionMode","percent")),l.spacingMode=i.spacingModeFromString(this.getValue(m,"spacingMode","length")),l.rotateMode=i.rotateModeFromString(this.getValue(m,"rotateMode","tangent")),l.offsetRotation=this.getValue(m,"rotation",0),l.position=this.getValue(m,"position",0),l.positionMode==vt.Fixed&&(l.position*=e),l.spacing=this.getValue(m,"spacing",0),(l.spacingMode==Ct.Length||l.spacingMode==Ct.Fixed)&&(l.spacing*=e),l.rotateMix=this.getValue(m,"rotateMix",1),l.translateMix=this.getValue(m,"translateMix",1),r.pathConstraints.push(l)}if(a.skins)for(var f=0;f<a.skins.length;f++){var S=a.skins[f],A=new Ze(S.name);if(S.bones)for(var T=0;T<S.bones.length;T++){var x=r.findBone(S.bones[T]);if(x==null)throw new Error("Skin bone not found: "+S.bones[f]);A.bones.push(x)}if(S.ik)for(var T=0;T<S.ik.length;T++){var C=r.findIkConstraint(S.ik[T]);if(C==null)throw new Error("Skin IK constraint not found: "+S.ik[f]);A.constraints.push(C)}if(S.transform)for(var T=0;T<S.transform.length;T++){var C=r.findTransformConstraint(S.transform[T]);if(C==null)throw new Error("Skin transform constraint not found: "+S.transform[f]);A.constraints.push(C)}if(S.path)for(var T=0;T<S.path.length;T++){var C=r.findPathConstraint(S.path[T]);if(C==null)throw new Error("Skin path constraint not found: "+S.path[f]);A.constraints.push(C)}for(var d in S.attachments){var I=r.findSlot(d);if(I==null)throw new Error("Slot not found: "+d);var u=S.attachments[d];for(var P in u){var R=this.readAttachment(u[P],A,I.index,P,r);R!=null&&A.setAttachment(I.index,P,R)}}r.skins.push(A),A.name=="default"&&(r.defaultSkin=A)}for(var f=0,V=this.linkedMeshes.length;f<V;f++){var k=this.linkedMeshes[f],A=k.skin==null?r.defaultSkin:r.findSkin(k.skin);if(A==null)throw new Error("Skin not found: "+k.skin);var B=A.getAttachment(k.slotIndex,k.parent);if(B==null)throw new Error("Parent mesh not found: "+k.parent);k.mesh.deformAttachment=k.inheritDeform?B:k.mesh,k.mesh.setParentMesh(B)}if(this.linkedMeshes.length=0,a.events)for(var D in a.events){var L=a.events[D],l=new $r(D);l.intValue=this.getValue(L,"int",0),l.floatValue=this.getValue(L,"float",0),l.stringValue=this.getValue(L,"string",""),l.audioPath=this.getValue(L,"audio",null),l.audioPath!=null&&(l.volume=this.getValue(L,"volume",1),l.balance=this.getValue(L,"balance",0)),r.events.push(l)}if(a.animations)for(var H in a.animations){var _=a.animations[H];this.readAnimation(_,H,r)}return r},i.prototype.readAttachment=function(t,e,r,a,n){var h=this.scale;a=this.getValue(t,"name",a);var f=this.getValue(t,"type","region");switch(f){case"region":{var c=this.getValue(t,"path",a),o=this.attachmentLoader.newRegionAttachment(e,a,c);if(o==null)return null;o.path=c,o.x=this.getValue(t,"x",0)*h,o.y=this.getValue(t,"y",0)*h,o.scaleX=this.getValue(t,"scaleX",1),o.scaleY=this.getValue(t,"scaleY",1),o.rotation=this.getValue(t,"rotation",0),o.width=t.width*h,o.height=t.height*h;var s=this.getValue(t,"color",null);return s!=null&&o.color.setFromString(s),o}case"boundingbox":{var l=this.attachmentLoader.newBoundingBoxAttachment(e,a);if(l==null)return null;this.readVertices(t,l,t.vertexCount<<1);var s=this.getValue(t,"color",null);return s!=null&&l.color.setFromString(s),l}case"mesh":case"linkedmesh":{var c=this.getValue(t,"path",a),u=this.attachmentLoader.newMeshAttachment(e,a,c);if(u==null)return null;u.path=c;var s=this.getValue(t,"color",null);s!=null&&u.color.setFromString(s),u.width=this.getValue(t,"width",0)*h,u.height=this.getValue(t,"height",0)*h;var d=this.getValue(t,"parent",null);if(d!=null)return this.linkedMeshes.push(new Ri(u,this.getValue(t,"skin",null),r,d,this.getValue(t,"deform",!0))),u;var v=t.uvs;return this.readVertices(t,u,v.length),u.triangles=t.triangles,u.regionUVs=new Float32Array(v),u.edges=this.getValue(t,"edges",null),u.hullLength=this.getValue(t,"hull",0)*2,u}case"path":{var c=this.attachmentLoader.newPathAttachment(e,a);if(c==null)return null;c.closed=this.getValue(t,"closed",!1),c.constantSpeed=this.getValue(t,"constantSpeed",!0);var p=t.vertexCount;this.readVertices(t,c,p<<1);for(var y=Y.newArray(p/3,0),g=0;g<t.lengths.length;g++)y[g]=t.lengths[g]*h;c.lengths=y;var s=this.getValue(t,"color",null);return s!=null&&c.color.setFromString(s),c}case"point":{var m=this.attachmentLoader.newPointAttachment(e,a);if(m==null)return null;m.x=this.getValue(t,"x",0)*h,m.y=this.getValue(t,"y",0)*h,m.rotation=this.getValue(t,"rotation",0);var s=this.getValue(t,"color",null);return s!=null&&m.color.setFromString(s),m}case"clipping":{var w=this.attachmentLoader.newClippingAttachment(e,a);if(w==null)return null;var x=this.getValue(t,"end",null);if(x!=null){var E=n.findSlot(x);if(E==null)throw new Error("Clipping end slot not found: "+x);w.endSlot=E}var p=t.vertexCount;this.readVertices(t,w,p<<1);var s=this.getValue(t,"color",null);return s!=null&&w.color.setFromString(s),w}}return null},i.prototype.readVertices=function(t,e,r){var a=this.scale;e.worldVerticesLength=r;var n=t.vertices;if(r==n.length){var h=Y.toFloatArray(n);if(a!=1)for(var f=0,c=n.length;f<c;f++)h[f]*=a;e.vertices=h;return}for(var o=new Array,s=new Array,f=0,c=n.length;f<c;){var l=n[f++];s.push(l);for(var u=f+l*4;f<u;f+=4)s.push(n[f]),o.push(n[f+1]*a),o.push(n[f+2]*a),o.push(n[f+3])}e.bones=s,e.vertices=Y.toFloatArray(o)},i.prototype.readAnimation=function(t,e,r){var a=this.scale,n=new Array,h=0;if(t.slots)for(var f in t.slots){var c=t.slots[f],o=r.findSlotIndex(f);if(o==-1)throw new Error("Slot not found: "+f);for(var s in c){var l=c[s];if(s=="attachment"){var u=new me(l.length);u.slotIndex=o;for(var d=0,v=0;v<l.length;v++){var p=l[v];u.setFrame(d++,this.getValue(p,"time",0),p.name)}n.push(u),h=Math.max(h,u.frames[u.getFrameCount()-1])}else if(s=="color"){var u=new Ne(l.length);u.slotIndex=o;for(var d=0,v=0;v<l.length;v++){var p=l[v],y=new G;y.setFromString(p.color||"ffffffff"),u.setFrame(d,this.getValue(p,"time",0),y.r,y.g,y.b,y.a),this.readCurve(p,u,d),d++}n.push(u),h=Math.max(h,u.frames[(u.getFrameCount()-1)*Ne.ENTRIES])}else if(s=="twoColor"){var u=new Oe(l.length);u.slotIndex=o;for(var d=0,v=0;v<l.length;v++){var p=l[v],g=new G,m=new G;g.setFromString(p.light),m.setFromString(p.dark),u.setFrame(d,this.getValue(p,"time",0),g.r,g.g,g.b,g.a,m.r,m.g,m.b),this.readCurve(p,u,d),d++}n.push(u),h=Math.max(h,u.frames[(u.getFrameCount()-1)*Oe.ENTRIES])}else throw new Error("Invalid timeline type for a slot: "+s+" ("+f+")")}}if(t.bones)for(var w in t.bones){var x=t.bones[w],E=r.findBoneIndex(w);if(E==-1)throw new Error("Bone not found: "+w);for(var s in x){var l=x[s];if(s==="rotate"){var u=new _t(l.length);u.boneIndex=E;for(var d=0,v=0;v<l.length;v++){var p=l[v];u.setFrame(d,this.getValue(p,"time",0),this.getValue(p,"angle",0)),this.readCurve(p,u,d),d++}n.push(u),h=Math.max(h,u.frames[(u.getFrameCount()-1)*_t.ENTRIES])}else if(s==="translate"||s==="scale"||s==="shear"){var u=null,S=1,A=0;s==="scale"?(u=new Dr(l.length),A=1):s==="shear"?u=new Lr(l.length):(u=new we(l.length),S=a),u.boneIndex=E;for(var d=0,v=0;v<l.length;v++){var p=l[v],T=this.getValue(p,"x",A),C=this.getValue(p,"y",A);u.setFrame(d,this.getValue(p,"time",0),T*S,C*S),this.readCurve(p,u,d),d++}n.push(u),h=Math.max(h,u.frames[(u.getFrameCount()-1)*we.ENTRIES])}else throw new Error("Invalid timeline type for a bone: "+s+" ("+w+")")}}if(t.ik)for(var I in t.ik){var P=t.ik[I],R=r.findIkConstraint(I),u=new De(P.length);u.ikConstraintIndex=r.ikConstraints.indexOf(R);for(var d=0,v=0;v<P.length;v++){var p=P[v];u.setFrame(d,this.getValue(p,"time",0),this.getValue(p,"mix",1),this.getValue(p,"softness",0)*a,this.getValue(p,"bendPositive",!0)?1:-1,this.getValue(p,"compress",!1),this.getValue(p,"stretch",!1)),this.readCurve(p,u,d),d++}n.push(u),h=Math.max(h,u.frames[(u.getFrameCount()-1)*De.ENTRIES])}if(t.transform)for(var I in t.transform){var P=t.transform[I],R=r.findTransformConstraint(I),u=new Le(P.length);u.transformConstraintIndex=r.transformConstraints.indexOf(R);for(var d=0,v=0;v<P.length;v++){var p=P[v];u.setFrame(d,this.getValue(p,"time",0),this.getValue(p,"rotateMix",1),this.getValue(p,"translateMix",1),this.getValue(p,"scaleMix",1),this.getValue(p,"shearMix",1)),this.readCurve(p,u,d),d++}n.push(u),h=Math.max(h,u.frames[(u.getFrameCount()-1)*Le.ENTRIES])}if(t.path)for(var I in t.path){var P=t.path[I],V=r.findPathConstraintIndex(I);if(V==-1)throw new Error("Path constraint not found: "+I);var k=r.pathConstraints[V];for(var s in P){var l=P[s];if(s==="position"||s==="spacing"){var u=null,S=1;s==="spacing"?(u=new qr(l.length),(k.spacingMode==Ct.Length||k.spacingMode==Ct.Fixed)&&(S=a)):(u=new Me(l.length),k.positionMode==vt.Fixed&&(S=a)),u.pathConstraintIndex=V;for(var d=0,v=0;v<l.length;v++){var p=l[v];u.setFrame(d,this.getValue(p,"time",0),this.getValue(p,s,0)*S),this.readCurve(p,u,d),d++}n.push(u),h=Math.max(h,u.frames[(u.getFrameCount()-1)*Me.ENTRIES])}else if(s==="mix"){var u=new We(l.length);u.pathConstraintIndex=V;for(var d=0,v=0;v<l.length;v++){var p=l[v];u.setFrame(d,this.getValue(p,"time",0),this.getValue(p,"rotateMix",1),this.getValue(p,"translateMix",1)),this.readCurve(p,u,d),d++}n.push(u),h=Math.max(h,u.frames[(u.getFrameCount()-1)*We.ENTRIES])}}}if(t.deform)for(var B in t.deform){var D=t.deform[B],L=r.findSkin(B);if(L==null){if(Ht.FAIL_ON_NON_EXISTING_SKIN)throw new Error("Skin not found: "+B);continue}for(var f in D){var c=D[f],o=r.findSlotIndex(f);if(o==-1)throw new Error("Slot not found: "+c.name);for(var s in c){var l=c[s],H=L.getAttachment(o,s);if(H==null)throw new Error("Deform attachment not found: "+l.name);var _=H.bones!=null,O=H.vertices,U=_?O.length/3*2:O.length,u=new Wr(l.length);u.slotIndex=o,u.attachment=H;for(var d=0,W=0;W<l.length;W++){var p=l[W],N=void 0,F=this.getValue(p,"vertices",null);if(F==null)N=_?Y.newFloatArray(U):O;else{N=Y.newFloatArray(U);var q=this.getValue(p,"offset",0);if(Y.arrayCopy(F,0,N,q,F.length),a!=1)for(var v=q,$=v+F.length;v<$;v++)N[v]*=a;if(!_)for(var v=0;v<U;v++)N[v]+=O[v]}u.setFrame(d,this.getValue(p,"time",0),N),this.readCurve(p,u,d),d++}n.push(u),h=Math.max(h,u.frames[u.getFrameCount()-1])}}}var z=t.drawOrder;if(z==null&&(z=t.draworder),z!=null){for(var u=new Ce(z.length),j=r.slots.length,d=0,W=0;W<z.length;W++){var J=z[W],K=null,Z=this.getValue(J,"offsets",null);if(Z!=null){K=Y.newArray(j,-1);for(var tt=Y.newArray(j-Z.length,0),ht=0,it=0,v=0;v<Z.length;v++){var ut=Z[v],o=r.findSlotIndex(ut.slot);if(o==-1)throw new Error("Slot not found: "+ut.slot);for(;ht!=o;)tt[it++]=ht++;K[ht+ut.offset]=ht++}for(;ht<j;)tt[it++]=ht++;for(var v=j-1;v>=0;v--)K[v]==-1&&(K[v]=tt[--it])}u.setFrame(d++,this.getValue(J,"time",0),K)}n.push(u),h=Math.max(h,u.frames[u.getFrameCount()-1])}if(t.events){for(var u=new ir(t.events.length),d=0,v=0;v<t.events.length;v++){var ot=t.events[v],ft=r.findEvent(ot.name);if(ft==null)throw new Error("Event not found: "+ot.name);var pt=new Hr(Y.toSinglePrecision(this.getValue(ot,"time",0)),ft);pt.intValue=this.getValue(ot,"int",ft.intValue),pt.floatValue=this.getValue(ot,"float",ft.floatValue),pt.stringValue=this.getValue(ot,"string",ft.stringValue),pt.data.audioPath!=null&&(pt.volume=this.getValue(ot,"volume",1),pt.balance=this.getValue(ot,"balance",0)),u.setFrame(d++,pt)}n.push(u),h=Math.max(h,u.frames[u.getFrameCount()-1])}if(isNaN(h))throw new Error("Error while parsing animation, duration is NaN");r.animations.push(new xt(e,n,h))},i.prototype.readCurve=function(t,e,r){if(t.hasOwnProperty("curve"))if(t.curve==="stepped")e.setStepped(r);else{var a=t.curve;e.setCurve(r,a,this.getValue(t,"c2",0),this.getValue(t,"c3",1),this.getValue(t,"c4",1))}},i.prototype.getValue=function(t,e,r){return t[e]!==void 0?t[e]:r},i.blendModeFromString=function(t){if(t=t.toLowerCase(),t=="normal")return wt.NORMAL;if(t=="additive")return wt.ADD;if(t=="multiply")return wt.MULTIPLY;if(t=="screen")return wt.SCREEN;throw new Error("Unknown blend mode: "+t)},i.positionModeFromString=function(t){if(t=t.toLowerCase(),t=="fixed")return vt.Fixed;if(t=="percent")return vt.Percent;throw new Error("Unknown position mode: "+t)},i.spacingModeFromString=function(t){if(t=t.toLowerCase(),t=="length")return Ct.Length;if(t=="fixed")return Ct.Fixed;if(t=="percent")return Ct.Percent;throw new Error("Unknown position mode: "+t)},i.rotateModeFromString=function(t){if(t=t.toLowerCase(),t=="tangent")return gt.Tangent;if(t=="chain")return gt.Chain;if(t=="chainscale")return gt.ChainScale;throw new Error("Unknown rotate mode: "+t)},i.transformModeFromString=function(t){if(t=t.toLowerCase(),t=="normal")return Q.Normal;if(t=="onlytranslation")return Q.OnlyTranslation;if(t=="norotationorreflection")return Q.NoRotationOrReflection;if(t=="noscale")return Q.NoScale;if(t=="noscaleorreflection")return Q.NoScaleOrReflection;throw new Error("Unknown transform mode: "+t)},i}(),Ri=function(){function i(t,e,r,a,n){this.mesh=t,this.skin=e,this.slotIndex=r,this.parent=a,this.inheritDeform=n}return i}(),Mi=function(i){dt(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}return t.prototype.createSkeleton=function(e){this.skeleton=new hn(e),this.skeleton.updateWorldTransform(),this.stateData=new an(e),this.state=new tn(this.stateData)},t}($e);const Ii=Object.freeze(Object.defineProperty({__proto__:null,Animation:xt,AnimationState:tn,AnimationStateAdapter:Ai,AnimationStateData:an,AtlasAttachmentLoader:Ur,Attachment:Xr,AttachmentTimeline:me,Bone:Sr,BoneData:_r,BoundingBoxAttachment:Ja,ClippingAttachment:Ka,ColorTimeline:Ne,ConstraintData:sr,CurveTimeline:ae,DeformTimeline:Wr,DrawOrderTimeline:Ce,Event:Hr,EventData:$r,EventQueue:rn,EventTimeline:ir,get EventType(){return Nt},IkConstraint:nn,IkConstraintData:Gr,IkConstraintTimeline:De,JitterEffect:Ei,MeshAttachment:nr,PathAttachment:Xe,PathConstraint:sn,PathConstraintData:jr,PathConstraintMixTimeline:We,PathConstraintPositionTimeline:Me,PathConstraintSpacingTimeline:qr,PointAttachment:Qa,RegionAttachment:Or,RotateTimeline:_t,ScaleTimeline:Dr,ShearTimeline:Lr,Skeleton:hn,SkeletonBinary:ln,SkeletonBounds:Ci,SkeletonData:zr,SkeletonJson:fn,Skin:Ze,SkinEntry:Ar,Slot:Nr,SlotData:Zr,get SpacingMode(){return Ct},Spine:Mi,SwirlEffect:Si,get TimelineType(){return It},TrackEntry:en,TransformConstraint:on,TransformConstraintData:Jr,TransformConstraintTimeline:Le,TranslateTimeline:we,TwoColorTimeline:Oe,VertexAttachment:xe},Symbol.toStringTag,{value:"Module"}));/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var br=function(i,t){return br=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])},br(i,t)};function Et(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");br(i,t);function e(){this.constructor=i}i.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var Kr=function(){function i(t){if(t==null)throw new Error("name cannot be null.");this.name=t}return i}(),Ee=function(i){Et(t,i);function t(e){var r=i.call(this,e)||this;return r.id=(t.nextID++&65535)<<11,r.worldVerticesLength=0,r}return t.prototype.computeWorldVerticesOld=function(e,r){this.computeWorldVertices(e,0,this.worldVerticesLength,r,0,2)},t.prototype.computeWorldVertices=function(e,r,a,n,h,f){a=h+(a>>1)*f;var c=e.bone.skeleton,o=e.attachmentVertices,s=this.vertices,l=this.bones;if(l==null){o.length>0&&(s=o);for(var u=e.bone.matrix,d=u.tx,v=u.ty,p=u.a,y=u.c,g=u.b,m=u.d,w=r,x=h;x<a;w+=2,x+=f){var E=s[w],S=s[w+1];n[x]=E*p+S*y+d,n[x+1]=E*g+S*m+v}return}for(var A=0,T=0,C=0;C<r;C+=2){var I=l[A];A+=I+1,T+=I}var P=c.bones;if(o.length==0)for(var x=h,y=T*3;x<a;x+=f){var R=0,V=0,I=l[A++];for(I+=A;A<I;A++,y+=3){var u=P[l[A]].matrix,E=s[y],S=s[y+1],k=s[y+2];R+=(E*u.a+S*u.c+u.tx)*k,V+=(E*u.b+S*u.d+u.ty)*k}n[x]=R,n[x+1]=V}else for(var B=o,x=h,y=T*3,D=T<<1;x<a;x+=f){var R=0,V=0,I=l[A++];for(I+=A;A<I;A++,y+=3,D+=2){var u=P[l[A]].matrix,E=s[y]+B[D],S=s[y+1]+B[D+1],k=s[y+2];R+=(E*u.a+S*u.c+u.tx)*k,V+=(E*u.b+S*u.d+u.ty)*k}n[x]=R,n[x+1]=V}},t.prototype.applyDeform=function(e){return this==e},t.nextID=0,t}(Kr),un=function(i){Et(t,i);function t(e){var r=i.call(this,e)||this;return r.type=et.BoundingBox,r.color=new G(1,1,1,1),r}return t}(Ee),cn=function(i){Et(t,i);function t(e){var r=i.call(this,e)||this;return r.type=et.Clipping,r.color=new G(.2275,.2275,.8078,1),r}return t}(Ee),Qr=function(i){Et(t,i);function t(e){var r=i.call(this,e)||this;return r.type=et.Mesh,r.color=new G(1,1,1,1),r.inheritDeform=!1,r.tempColor=new G(0,0,0,0),r}return t.prototype.applyDeform=function(e){return this==e||this.inheritDeform&&this.parentMesh==e},t.prototype.getParentMesh=function(){return this.parentMesh},t.prototype.setParentMesh=function(e){this.parentMesh=e,e!=null&&(this.bones=e.bones,this.vertices=e.vertices,this.worldVerticesLength=e.worldVerticesLength,this.regionUVs=e.regionUVs,this.triangles=e.triangles,this.hullLength=e.hullLength,this.worldVerticesLength=e.worldVerticesLength)},t}(Ee),qe=function(i){Et(t,i);function t(e){var r=i.call(this,e)||this;return r.type=et.Path,r.closed=!1,r.constantSpeed=!1,r.color=new G(1,1,1,1),r}return t}(Ee),vn=function(i){Et(t,i);function t(e){var r=i.call(this,e)||this;return r.type=et.Point,r.color=new G(.38,.94,0,1),r}return t.prototype.computeWorldPosition=function(e,r){var a=e.matrix;return r.x=this.x*a.a+this.y*a.c+e.worldX,r.y=this.x*a.b+this.y*a.d+e.worldY,r},t.prototype.computeWorldRotation=function(e){var r=e.matrix,a=M.cosDeg(this.rotation),n=M.sinDeg(this.rotation),h=a*r.a+n*r.c,f=a*r.b+n*r.d;return Math.atan2(f,h)*M.radDeg},t}(Ee),ta=function(){function i(t,e){if(this.attachmentVertices=new Array,t==null)throw new Error("data cannot be null.");if(e==null)throw new Error("bone cannot be null.");this.data=t,this.bone=e,this.color=new G,this.darkColor=t.darkColor==null?null:new G,this.setToSetupPose(),this.blendMode=this.data.blendMode}return i.prototype.getAttachment=function(){return this.attachment},i.prototype.setAttachment=function(t){this.attachment!=t&&(this.attachment=t,this.attachmentTime=this.bone.skeleton.time,this.attachmentVertices.length=0)},i.prototype.setAttachmentTime=function(t){this.attachmentTime=this.bone.skeleton.time-t},i.prototype.getAttachmentTime=function(){return this.bone.skeleton.time-this.attachmentTime},i.prototype.setToSetupPose=function(){this.color.setFromColor(this.data.color),this.darkColor!=null&&this.darkColor.setFromColor(this.data.darkColor),this.data.attachmentName==null?this.attachment=null:(this.attachment=null,this.setAttachment(this.bone.skeleton.getAttachment(this.data.index,this.data.attachmentName)))},i}(),ea=function(i){Et(t,i);function t(e){var r=i.call(this,e)||this;return r.type=et.Region,r.x=0,r.y=0,r.scaleX=1,r.scaleY=1,r.rotation=0,r.width=0,r.height=0,r.color=new G(1,1,1,1),r.offset=Y.newFloatArray(8),r.uvs=Y.newFloatArray(8),r.tempColor=new G(1,1,1,1),r}return t.prototype.updateOffset=function(){var e=this.width/this.region.originalWidth*this.scaleX,r=this.height/this.region.originalHeight*this.scaleY,a=-this.width/2*this.scaleX+this.region.offsetX*e,n=-this.height/2*this.scaleY+this.region.offsetY*r,h=a+this.region.width*e,f=n+this.region.height*r,c=this.rotation*Math.PI/180,o=Math.cos(c),s=Math.sin(c),l=a*o+this.x,u=a*s,d=n*o+this.y,v=n*s,p=h*o+this.x,y=h*s,g=f*o+this.y,m=f*s,w=this.offset;w[t.OX1]=l-v,w[t.OY1]=d+u,w[t.OX2]=l-m,w[t.OY2]=g+u,w[t.OX3]=p-m,w[t.OY3]=g+y,w[t.OX4]=p-v,w[t.OY4]=d+y},t.prototype.setRegion=function(e){this.region=e;var r=this.uvs;e.rotate?(r[2]=e.u,r[3]=e.v2,r[4]=e.u,r[5]=e.v,r[6]=e.u2,r[7]=e.v,r[0]=e.u2,r[1]=e.v2):(r[0]=e.u,r[1]=e.v2,r[2]=e.u,r[3]=e.v,r[4]=e.u2,r[5]=e.v,r[6]=e.u2,r[7]=e.v2)},t.prototype.computeWorldVertices=function(e,r,a,n){var h=this.offset,f=e instanceof ta?e.bone.matrix:e.matrix,c=f.tx,o=f.ty,s=f.a,l=f.c,u=f.b,d=f.d,v=0,p=0;v=h[t.OX1],p=h[t.OY1],r[a]=v*s+p*l+c,r[a+1]=v*u+p*d+o,a+=n,v=h[t.OX2],p=h[t.OY2],r[a]=v*s+p*l+c,r[a+1]=v*u+p*d+o,a+=n,v=h[t.OX3],p=h[t.OY3],r[a]=v*s+p*l+c,r[a+1]=v*u+p*d+o,a+=n,v=h[t.OX4],p=h[t.OY4],r[a]=v*s+p*l+c,r[a+1]=v*u+p*d+o},t.OX1=0,t.OY1=1,t.OX2=2,t.OY2=3,t.OX3=4,t.OY3=5,t.OX4=6,t.OY4=7,t.X1=0,t.Y1=1,t.C1R=2,t.C1G=3,t.C1B=4,t.C1A=5,t.U1=6,t.V1=7,t.X2=8,t.Y2=9,t.C2R=10,t.C2G=11,t.C2B=12,t.C2A=13,t.U2=14,t.V2=15,t.X3=16,t.Y3=17,t.C3R=18,t.C3G=19,t.C3B=20,t.C3A=21,t.U3=22,t.V3=23,t.X4=24,t.Y4=25,t.C4R=26,t.C4G=27,t.C4B=28,t.C4A=29,t.U4=30,t.V4=31,t}(Kr),ki=function(){function i(t,e){this.jitterX=0,this.jitterY=0,this.jitterX=t,this.jitterY=e}return i.prototype.begin=function(t){},i.prototype.transform=function(t,e,r,a){t.x+=M.randomTriangular(-this.jitterX,this.jitterY),t.y+=M.randomTriangular(-this.jitterX,this.jitterY)},i.prototype.end=function(){},i}(),Pi=function(){function i(t){this.centerX=0,this.centerY=0,this.radius=0,this.angle=0,this.worldX=0,this.worldY=0,this.radius=t}return i.prototype.begin=function(t){this.worldX=t.x+this.centerX,this.worldY=t.y+this.centerY},i.prototype.transform=function(t,e,r,a){var n=this.angle*M.degreesToRadians,h=t.x-this.worldX,f=t.y-this.worldY,c=Math.sqrt(h*h+f*f);if(c<this.radius){var o=i.interpolation.apply(0,n,(this.radius-c)/this.radius),s=Math.cos(o),l=Math.sin(o);t.x=s*h-l*f+this.worldX,t.y=l*h+s*f+this.worldY}},i.prototype.end=function(){},i.interpolation=new Za(2),i}(),Rt=function(){function i(t,e,r){if(t==null)throw new Error("name cannot be null.");if(e==null)throw new Error("timelines cannot be null.");this.name=t,this.timelines=e,this.duration=r}return i.prototype.apply=function(t,e,r,a,n,h,f,c){if(t==null)throw new Error("skeleton cannot be null.");a&&this.duration!=0&&(r%=this.duration,e>0&&(e%=this.duration));for(var o=this.timelines,s=0,l=o.length;s<l;s++)o[s].apply(t,e,r,n,h,f,c)},i.binarySearch=function(t,e,r){r===void 0&&(r=1);var a=0,n=t.length/r-2;if(n==0)return r;for(var h=n>>>1;;){if(t[(h+1)*r]<=e?a=h+1:n=h,a==n)return(a+1)*r;h=a+n>>>1}},i.linearSearch=function(t,e,r){for(var a=0,n=t.length-r;a<=n;a+=r)if(t[a]>e)return a;return-1},i}(),kt;(function(i){i[i.rotate=0]="rotate",i[i.translate=1]="translate",i[i.scale=2]="scale",i[i.shear=3]="shear",i[i.attachment=4]="attachment",i[i.color=5]="color",i[i.deform=6]="deform",i[i.event=7]="event",i[i.drawOrder=8]="drawOrder",i[i.ikConstraint=9]="ikConstraint",i[i.transformConstraint=10]="transformConstraint",i[i.pathConstraintPosition=11]="pathConstraintPosition",i[i.pathConstraintSpacing=12]="pathConstraintSpacing",i[i.pathConstraintMix=13]="pathConstraintMix",i[i.twoColor=14]="twoColor"})(kt||(kt={}));var ne=function(){function i(t){if(t<=0)throw new Error("frameCount must be > 0: "+t);this.curves=Y.newFloatArray((t-1)*i.BEZIER_SIZE)}return i.prototype.getFrameCount=function(){return this.curves.length/i.BEZIER_SIZE+1},i.prototype.setLinear=function(t){this.curves[t*i.BEZIER_SIZE]=i.LINEAR},i.prototype.setStepped=function(t){this.curves[t*i.BEZIER_SIZE]=i.STEPPED},i.prototype.getCurveType=function(t){var e=t*i.BEZIER_SIZE;if(e==this.curves.length)return i.LINEAR;var r=this.curves[e];return r==i.LINEAR?i.LINEAR:r==i.STEPPED?i.STEPPED:i.BEZIER},i.prototype.setCurve=function(t,e,r,a,n){var h=(-e*2+a)*.03,f=(-r*2+n)*.03,c=((e-a)*3+1)*.006,o=((r-n)*3+1)*.006,s=h*2+c,l=f*2+o,u=e*.3+h+c*.16666667,d=r*.3+f+o*.16666667,v=t*i.BEZIER_SIZE,p=this.curves;p[v++]=i.BEZIER;for(var y=u,g=d,m=v+i.BEZIER_SIZE-1;v<m;v+=2)p[v]=y,p[v+1]=g,u+=s,d+=l,s+=c,l+=o,y+=u,g+=d},i.prototype.getCurvePercent=function(t,e){e=M.clamp(e,0,1);var r=this.curves,a=t*i.BEZIER_SIZE,n=r[a];if(n==i.LINEAR)return e;if(n==i.STEPPED)return 0;a++;for(var h=0,f=a,c=a+i.BEZIER_SIZE-1;a<c;a+=2)if(h=r[a],h>=e){var o=void 0,s=void 0;return a==f?(o=0,s=0):(o=r[a-2],s=r[a-1]),s+(r[a+1]-s)*(e-o)/(h-o)}var l=r[a-1];return l+(1-l)*(e-h)/(1-h)},i.LINEAR=0,i.STEPPED=1,i.BEZIER=2,i.BEZIER_SIZE=10*2-1,i}(),Jt=function(i){Et(t,i);function t(e){var r=i.call(this,e)||this;return r.frames=Y.newFloatArray(e<<1),r}return t.prototype.getPropertyId=function(){return(kt.rotate<<24)+this.boneIndex},t.prototype.setFrame=function(e,r,a){e<<=1,this.frames[e]=r,this.frames[e+t.ROTATION]=a},t.prototype.apply=function(e,r,a,n,h,f,c){var o=this.frames,s=e.bones[this.boneIndex];if(a<o[0]){switch(f){case b.setup:s.rotation=s.data.rotation;return;case b.first:var l=s.data.rotation-s.rotation;s.rotation+=(l-(16384-(16384.499999999996-l/360|0))*360)*h}return}if(a>=o[o.length-t.ENTRIES]){var u=o[o.length+t.PREV_ROTATION];switch(f){case b.setup:s.rotation=s.data.rotation+u*h;break;case b.first:case b.replace:u+=s.data.rotation-s.rotation,u-=(16384-(16384.499999999996-u/360|0))*360;case b.add:s.rotation+=u*h}return}var d=Rt.binarySearch(o,a,t.ENTRIES),v=o[d+t.PREV_ROTATION],p=o[d],y=this.getCurvePercent((d>>1)-1,1-(a-p)/(o[d+t.PREV_TIME]-p)),g=o[d+t.ROTATION]-v;switch(g=v+(g-(16384-(16384.499999999996-g/360|0))*360)*y,f){case b.setup:s.rotation=s.data.rotation+(g-(16384-(16384.499999999996-g/360|0))*360)*h;break;case b.first:case b.replace:g+=s.data.rotation-s.rotation;case b.add:s.rotation+=(g-(16384-(16384.499999999996-g/360|0))*360)*h}},t.ENTRIES=2,t.PREV_TIME=-2,t.PREV_ROTATION=-1,t.ROTATION=1,t}(ne),Ue=function(i){Et(t,i);function t(e){var r=i.call(this,e)||this;return r.frames=Y.newFloatArray(e*t.ENTRIES),r}return t.prototype.getPropertyId=function(){return(kt.translate<<24)+this.boneIndex},t.prototype.setFrame=function(e,r,a,n){e*=t.ENTRIES,this.frames[e]=r,this.frames[e+t.X]=a,this.frames[e+t.Y]=n},t.prototype.apply=function(e,r,a,n,h,f,c){var o=this.frames,s=e.bones[this.boneIndex];if(a<o[0]){switch(f){case b.setup:s.x=s.data.x,s.y=s.data.y;return;case b.first:s.x+=(s.data.x-s.x)*h,s.y+=(s.data.y-s.y)*h}return}var l=0,u=0;if(a>=o[o.length-t.ENTRIES])l=o[o.length+t.PREV_X],u=o[o.length+t.PREV_Y];else{var d=Rt.binarySearch(o,a,t.ENTRIES);l=o[d+t.PREV_X],u=o[d+t.PREV_Y];var v=o[d],p=this.getCurvePercent(d/t.ENTRIES-1,1-(a-v)/(o[d+t.PREV_TIME]-v));l+=(o[d+t.X]-l)*p,u+=(o[d+t.Y]-u)*p}switch(f){case b.setup:s.x=s.data.x+l*h,s.y=s.data.y+u*h;break;case b.first:case b.replace:s.x+=(s.data.x+l-s.x)*h,s.y+=(s.data.y+u-s.y)*h;break;case b.add:s.x+=l*h,s.y+=u*h}},t.ENTRIES=3,t.PREV_TIME=-3,t.PREV_X=-2,t.PREV_Y=-1,t.X=1,t.Y=2,t}(ne),dn=function(i){Et(t,i);function t(e){return i.call(this,e)||this}return t.prototype.getPropertyId=function(){return(kt.scale<<24)+this.boneIndex},t.prototype.apply=function(e,r,a,n,h,f,c){var o=this.frames,s=e.bones[this.boneIndex];if(a<o[0]){switch(f){case b.setup:s.scaleX=s.data.scaleX,s.scaleY=s.data.scaleY;return;case b.first:s.scaleX+=(s.data.scaleX-s.scaleX)*h,s.scaleY+=(s.data.scaleY-s.scaleY)*h}return}var l=0,u=0;if(a>=o[o.length-t.ENTRIES])l=o[o.length+t.PREV_X]*s.data.scaleX,u=o[o.length+t.PREV_Y]*s.data.scaleY;else{var d=Rt.binarySearch(o,a,t.ENTRIES);l=o[d+t.PREV_X],u=o[d+t.PREV_Y];var v=o[d],p=this.getCurvePercent(d/t.ENTRIES-1,1-(a-v)/(o[d+t.PREV_TIME]-v));l=(l+(o[d+t.X]-l)*p)*s.data.scaleX,u=(u+(o[d+t.Y]-u)*p)*s.data.scaleY}if(h==1)f==b.add?(s.scaleX+=l-s.data.scaleX,s.scaleY+=u-s.data.scaleY):(s.scaleX=l,s.scaleY=u);else{var y=0,g=0;if(c==rt.mixOut)switch(f){case b.setup:y=s.data.scaleX,g=s.data.scaleY,s.scaleX=y+(Math.abs(l)*M.signum(y)-y)*h,s.scaleY=g+(Math.abs(u)*M.signum(g)-g)*h;break;case b.first:case b.replace:y=s.scaleX,g=s.scaleY,s.scaleX=y+(Math.abs(l)*M.signum(y)-y)*h,s.scaleY=g+(Math.abs(u)*M.signum(g)-g)*h;break;case b.add:y=s.scaleX,g=s.scaleY,s.scaleX=y+(Math.abs(l)*M.signum(y)-s.data.scaleX)*h,s.scaleY=g+(Math.abs(u)*M.signum(g)-s.data.scaleY)*h}else switch(f){case b.setup:y=Math.abs(s.data.scaleX)*M.signum(l),g=Math.abs(s.data.scaleY)*M.signum(u),s.scaleX=y+(l-y)*h,s.scaleY=g+(u-g)*h;break;case b.first:case b.replace:y=Math.abs(s.scaleX)*M.signum(l),g=Math.abs(s.scaleY)*M.signum(u),s.scaleX=y+(l-y)*h,s.scaleY=g+(u-g)*h;break;case b.add:y=M.signum(l),g=M.signum(u),s.scaleX=Math.abs(s.scaleX)*y+(l-Math.abs(s.data.scaleX)*y)*h,s.scaleY=Math.abs(s.scaleY)*g+(u-Math.abs(s.data.scaleY)*g)*h}}},t}(Ue),pn=function(i){Et(t,i);function t(e){return i.call(this,e)||this}return t.prototype.getPropertyId=function(){return(kt.shear<<24)+this.boneIndex},t.prototype.apply=function(e,r,a,n,h,f,c){var o=this.frames,s=e.bones[this.boneIndex];if(a<o[0]){switch(f){case b.setup:s.shearX=s.data.shearX,s.shearY=s.data.shearY;return;case b.first:s.shearX+=(s.data.shearX-s.shearX)*h,s.shearY+=(s.data.shearY-s.shearY)*h}return}var l=0,u=0;if(a>=o[o.length-t.ENTRIES])l=o[o.length+t.PREV_X],u=o[o.length+t.PREV_Y];else{var d=Rt.binarySearch(o,a,t.ENTRIES);l=o[d+t.PREV_X],u=o[d+t.PREV_Y];var v=o[d],p=this.getCurvePercent(d/t.ENTRIES-1,1-(a-v)/(o[d+t.PREV_TIME]-v));l=l+(o[d+t.X]-l)*p,u=u+(o[d+t.Y]-u)*p}switch(f){case b.setup:s.shearX=s.data.shearX+l*h,s.shearY=s.data.shearY+u*h;break;case b.first:case b.replace:s.shearX+=(s.data.shearX+l-s.shearX)*h,s.shearY+=(s.data.shearY+u-s.shearY)*h;break;case b.add:s.shearX+=l*h,s.shearY+=u*h}},t}(Ue),Tr=function(i){Et(t,i);function t(e){var r=i.call(this,e)||this;return r.frames=Y.newFloatArray(e*t.ENTRIES),r}return t.prototype.getPropertyId=function(){return(kt.color<<24)+this.slotIndex},t.prototype.setFrame=function(e,r,a,n,h,f){e*=t.ENTRIES,this.frames[e]=r,this.frames[e+t.R]=a,this.frames[e+t.G]=n,this.frames[e+t.B]=h,this.frames[e+t.A]=f},t.prototype.apply=function(e,r,a,n,h,f,c){var o=e.slots[this.slotIndex],s=this.frames;if(a<s[0]){switch(f){case b.setup:o.color.setFromColor(o.data.color);return;case b.first:var l=o.color,u=o.data.color;l.add((u.r-l.r)*h,(u.g-l.g)*h,(u.b-l.b)*h,(u.a-l.a)*h)}return}var d=0,v=0,p=0,y=0;if(a>=s[s.length-t.ENTRIES]){var g=s.length;d=s[g+t.PREV_R],v=s[g+t.PREV_G],p=s[g+t.PREV_B],y=s[g+t.PREV_A]}else{var m=Rt.binarySearch(s,a,t.ENTRIES);d=s[m+t.PREV_R],v=s[m+t.PREV_G],p=s[m+t.PREV_B],y=s[m+t.PREV_A];var w=s[m],x=this.getCurvePercent(m/t.ENTRIES-1,1-(a-w)/(s[m+t.PREV_TIME]-w));d+=(s[m+t.R]-d)*x,v+=(s[m+t.G]-v)*x,p+=(s[m+t.B]-p)*x,y+=(s[m+t.A]-y)*x}if(h==1)o.color.set(d,v,p,y);else{var l=o.color;f==b.setup&&l.setFromColor(o.data.color),l.add((d-l.r)*h,(v-l.g)*h,(p-l.b)*h,(y-l.a)*h)}},t.ENTRIES=5,t.PREV_TIME=-5,t.PREV_R=-4,t.PREV_G=-3,t.PREV_B=-2,t.PREV_A=-1,t.R=1,t.G=2,t.B=3,t.A=4,t}(ne),Cr=function(i){Et(t,i);function t(e){var r=i.call(this,e)||this;return r.frames=Y.newFloatArray(e*t.ENTRIES),r}return t.prototype.getPropertyId=function(){return(kt.twoColor<<24)+this.slotIndex},t.prototype.setFrame=function(e,r,a,n,h,f,c,o,s){e*=t.ENTRIES,this.frames[e]=r,this.frames[e+t.R]=a,this.frames[e+t.G]=n,this.frames[e+t.B]=h,this.frames[e+t.A]=f,this.frames[e+t.R2]=c,this.frames[e+t.G2]=o,this.frames[e+t.B2]=s},t.prototype.apply=function(e,r,a,n,h,f,c){var o=e.slots[this.slotIndex],s=this.frames;if(a<s[0]){switch(f){case b.setup:o.color.setFromColor(o.data.color),o.darkColor.setFromColor(o.data.darkColor);return;case b.first:var l=o.color,u=o.darkColor,d=o.data.color,v=o.data.darkColor;l.add((d.r-l.r)*h,(d.g-l.g)*h,(d.b-l.b)*h,(d.a-l.a)*h),u.add((v.r-u.r)*h,(v.g-u.g)*h,(v.b-u.b)*h,0)}return}var p=0,y=0,g=0,m=0,w=0,x=0,E=0;if(a>=s[s.length-t.ENTRIES]){var S=s.length;p=s[S+t.PREV_R],y=s[S+t.PREV_G],g=s[S+t.PREV_B],m=s[S+t.PREV_A],w=s[S+t.PREV_R2],x=s[S+t.PREV_G2],E=s[S+t.PREV_B2]}else{var A=Rt.binarySearch(s,a,t.ENTRIES);p=s[A+t.PREV_R],y=s[A+t.PREV_G],g=s[A+t.PREV_B],m=s[A+t.PREV_A],w=s[A+t.PREV_R2],x=s[A+t.PREV_G2],E=s[A+t.PREV_B2];var T=s[A],C=this.getCurvePercent(A/t.ENTRIES-1,1-(a-T)/(s[A+t.PREV_TIME]-T));p+=(s[A+t.R]-p)*C,y+=(s[A+t.G]-y)*C,g+=(s[A+t.B]-g)*C,m+=(s[A+t.A]-m)*C,w+=(s[A+t.R2]-w)*C,x+=(s[A+t.G2]-x)*C,E+=(s[A+t.B2]-E)*C}if(h==1)o.color.set(p,y,g,m),o.darkColor.set(w,x,E,1);else{var l=o.color,u=o.darkColor;f==b.setup&&(l.setFromColor(o.data.color),u.setFromColor(o.data.darkColor)),l.add((p-l.r)*h,(y-l.g)*h,(g-l.b)*h,(m-l.a)*h),u.add((w-u.r)*h,(x-u.g)*h,(E-u.b)*h,0)}},t.ENTRIES=8,t.PREV_TIME=-8,t.PREV_R=-7,t.PREV_G=-6,t.PREV_B=-5,t.PREV_A=-4,t.PREV_R2=-3,t.PREV_G2=-2,t.PREV_B2=-1,t.R=1,t.G=2,t.B=3,t.A=4,t.R2=5,t.G2=6,t.B2=7,t}(ne),Je=function(){function i(t){this.frames=Y.newFloatArray(t),this.attachmentNames=new Array(t)}return i.prototype.getPropertyId=function(){return(kt.attachment<<24)+this.slotIndex},i.prototype.getFrameCount=function(){return this.frames.length},i.prototype.setFrame=function(t,e,r){this.frames[t]=e,this.attachmentNames[t]=r},i.prototype.apply=function(t,e,r,a,n,h,f){var c=t.slots[this.slotIndex];if(f==rt.mixOut&&h==b.setup){var o=c.data.attachmentName;c.setAttachment(o==null?null:t.getAttachment(this.slotIndex,o));return}var s=this.frames;if(r<s[0]){if(h==b.setup||h==b.first){var l=c.data.attachmentName;c.setAttachment(l==null?null:t.getAttachment(this.slotIndex,l))}return}var u=0;r>=s[s.length-1]?u=s.length-1:u=Rt.binarySearch(s,r,1)-1;var d=this.attachmentNames[u];t.slots[this.slotIndex].setAttachment(d==null?null:t.getAttachment(this.slotIndex,d))},i}(),qa=null,gn=function(i){Et(t,i);function t(e){var r=i.call(this,e)||this;return r.frames=Y.newFloatArray(e),r.frameVertices=new Array(e),qa==null&&(qa=Y.newFloatArray(64)),r}return t.prototype.getPropertyId=function(){return(kt.deform<<27)+ +this.attachment.id+this.slotIndex},t.prototype.setFrame=function(e,r,a){this.frames[e]=r,this.frameVertices[e]=a},t.prototype.apply=function(e,r,a,n,h,f,c){var o=e.slots[this.slotIndex],s=o.getAttachment();if(!(!(s instanceof Ee)||!s.applyDeform(this.attachment))){var l=o.attachmentVertices;l.length==0&&(f=b.setup);var u=this.frameVertices,d=u[0].length,v=this.frames;if(a<v[0]){var p=s;switch(f){case b.setup:l.length=0;return;case b.first:if(h==1){l.length=0;break}var y=Y.setArraySize(l,d);if(p.bones==null)for(var g=p.vertices,m=0;m<d;m++)y[m]+=(g[m]-y[m])*h;else{h=1-h;for(var m=0;m<d;m++)y[m]*=h}}return}var w=Y.setArraySize(l,d);if(a>=v[v.length-1]){var x=u[v.length-1];if(h==1)if(f==b.add){var p=s;if(p.bones==null)for(var g=p.vertices,m=0;m<d;m++)w[m]+=x[m]-g[m];else for(var m=0;m<d;m++)w[m]+=x[m]}else Y.arrayCopy(x,0,w,0,d);else switch(f){case b.setup:{var E=s;if(E.bones==null)for(var g=E.vertices,m=0;m<d;m++){var S=g[m];w[m]=S+(x[m]-S)*h}else for(var m=0;m<d;m++)w[m]=x[m]*h;break}case b.first:case b.replace:for(var m=0;m<d;m++)w[m]+=(x[m]-w[m])*h;case b.add:var p=s;if(p.bones==null)for(var g=p.vertices,m=0;m<d;m++)w[m]+=(x[m]-g[m])*h;else for(var m=0;m<d;m++)w[m]+=x[m]*h}return}var A=Rt.binarySearch(v,a),T=u[A-1],C=u[A],I=v[A],P=this.getCurvePercent(A-1,1-(a-I)/(v[A-1]-I));if(h==1)if(f==b.add){var p=s;if(p.bones==null)for(var g=p.vertices,m=0;m<d;m++){var R=T[m];w[m]+=R+(C[m]-R)*P-g[m]}else for(var m=0;m<d;m++){var R=T[m];w[m]+=R+(C[m]-R)*P}}else for(var m=0;m<d;m++){var R=T[m];w[m]=R+(C[m]-R)*P}else switch(f){case b.setup:{var V=s;if(V.bones==null)for(var g=V.vertices,m=0;m<d;m++){var R=T[m],S=g[m];w[m]=S+(R+(C[m]-R)*P-S)*h}else for(var m=0;m<d;m++){var R=T[m];w[m]=(R+(C[m]-R)*P)*h}break}case b.first:case b.replace:for(var m=0;m<d;m++){var R=T[m];w[m]+=(R+(C[m]-R)*P-w[m])*h}break;case b.add:var p=s;if(p.bones==null)for(var g=p.vertices,m=0;m<d;m++){var R=T[m];w[m]+=(R+(C[m]-R)*P-g[m])*h}else for(var m=0;m<d;m++){var R=T[m];w[m]+=(R+(C[m]-R)*P)*h}}}},t}(ne),mn=function(){function i(t){this.frames=Y.newFloatArray(t),this.events=new Array(t)}return i.prototype.getPropertyId=function(){return kt.event<<24},i.prototype.getFrameCount=function(){return this.frames.length},i.prototype.setFrame=function(t,e){this.frames[t]=e.time,this.events[t]=e},i.prototype.apply=function(t,e,r,a,n,h,f){if(a!=null){var c=this.frames,o=this.frames.length;if(e>r)this.apply(t,e,Number.MAX_VALUE,a,n,h,f),e=-1;else if(e>=c[o-1])return;if(!(r<c[0])){var s=0;if(e<c[0])s=0;else{s=Rt.binarySearch(c,e);for(var l=c[s];s>0&&c[s-1]==l;)s--}for(;s<o&&r>=c[s];s++)a.push(this.events[s])}}},i}(),Ke=function(){function i(t){this.frames=Y.newFloatArray(t),this.drawOrders=new Array(t)}return i.prototype.getPropertyId=function(){return kt.drawOrder<<24},i.prototype.getFrameCount=function(){return this.frames.length},i.prototype.setFrame=function(t,e,r){this.frames[t]=e,this.drawOrders[t]=r},i.prototype.apply=function(t,e,r,a,n,h,f){var c=t.drawOrder,o=t.slots;if(f==rt.mixOut&&h==b.setup){Y.arrayCopy(t.slots,0,t.drawOrder,0,t.slots.length);return}var s=this.frames;if(r<s[0]){(h==b.setup||h==b.first)&&Y.arrayCopy(t.slots,0,t.drawOrder,0,t.slots.length);return}var l=0;r>=s[s.length-1]?l=s.length-1:l=Rt.binarySearch(s,r)-1;var u=this.drawOrders[l];if(u==null)Y.arrayCopy(o,0,c,0,o.length);else for(var d=0,v=u.length;d<v;d++)c[d]=o[u[d]]},i}(),Rr=function(i){Et(t,i);function t(e){var r=i.call(this,e)||this;return r.frames=Y.newFloatArray(e*t.ENTRIES),r}return t.prototype.getPropertyId=function(){return(kt.ikConstraint<<24)+this.ikConstraintIndex},t.prototype.setFrame=function(e,r,a,n,h,f){e*=t.ENTRIES,this.frames[e]=r,this.frames[e+t.MIX]=a,this.frames[e+t.BEND_DIRECTION]=n,this.frames[e+t.COMPRESS]=h?1:0,this.frames[e+t.STRETCH]=f?1:0},t.prototype.apply=function(e,r,a,n,h,f,c){var o=this.frames,s=e.ikConstraints[this.ikConstraintIndex];if(a<o[0]){switch(f){case b.setup:s.mix=s.data.mix,s.bendDirection=s.data.bendDirection,s.compress=s.data.compress,s.stretch=s.data.stretch;return;case b.first:s.mix+=(s.data.mix-s.mix)*h,s.bendDirection=s.data.bendDirection,s.compress=s.data.compress,s.stretch=s.data.stretch}return}if(a>=o[o.length-t.ENTRIES]){f==b.setup?(s.mix=s.data.mix+(o[o.length+t.PREV_MIX]-s.data.mix)*h,c==rt.mixOut?(s.bendDirection=s.data.bendDirection,s.compress=s.data.compress,s.stretch=s.data.stretch):(s.bendDirection=o[o.length+t.PREV_BEND_DIRECTION],s.compress=o[o.length+t.PREV_COMPRESS]!=0,s.stretch=o[o.length+t.PREV_STRETCH]!=0)):(s.mix+=(o[o.length+t.PREV_MIX]-s.mix)*h,c==rt.mixIn&&(s.bendDirection=o[o.length+t.PREV_BEND_DIRECTION],s.compress=o[o.length+t.PREV_COMPRESS]!=0,s.stretch=o[o.length+t.PREV_STRETCH]!=0));return}var l=Rt.binarySearch(o,a,t.ENTRIES),u=o[l+t.PREV_MIX],d=o[l],v=this.getCurvePercent(l/t.ENTRIES-1,1-(a-d)/(o[l+t.PREV_TIME]-d));f==b.setup?(s.mix=s.data.mix+(u+(o[l+t.MIX]-u)*v-s.data.mix)*h,c==rt.mixOut?(s.bendDirection=s.data.bendDirection,s.compress=s.data.compress,s.stretch=s.data.stretch):(s.bendDirection=o[l+t.PREV_BEND_DIRECTION],s.compress=o[l+t.PREV_COMPRESS]!=0,s.stretch=o[l+t.PREV_STRETCH]!=0)):(s.mix+=(u+(o[l+t.MIX]-u)*v-s.mix)*h,c==rt.mixIn&&(s.bendDirection=o[l+t.PREV_BEND_DIRECTION],s.compress=o[l+t.PREV_COMPRESS]!=0,s.stretch=o[l+t.PREV_STRETCH]!=0))},t.ENTRIES=5,t.PREV_TIME=-5,t.PREV_MIX=-4,t.PREV_BEND_DIRECTION=-3,t.PREV_COMPRESS=-2,t.PREV_STRETCH=-1,t.MIX=1,t.BEND_DIRECTION=2,t.COMPRESS=3,t.STRETCH=4,t}(ne),Mr=function(i){Et(t,i);function t(e){var r=i.call(this,e)||this;return r.frames=Y.newFloatArray(e*t.ENTRIES),r}return t.prototype.getPropertyId=function(){return(kt.transformConstraint<<24)+this.transformConstraintIndex},t.prototype.setFrame=function(e,r,a,n,h,f){e*=t.ENTRIES,this.frames[e]=r,this.frames[e+t.ROTATE]=a,this.frames[e+t.TRANSLATE]=n,this.frames[e+t.SCALE]=h,this.frames[e+t.SHEAR]=f},t.prototype.apply=function(e,r,a,n,h,f,c){var o=this.frames,s=e.transformConstraints[this.transformConstraintIndex];if(a<o[0]){var l=s.data;switch(f){case b.setup:s.rotateMix=l.rotateMix,s.translateMix=l.translateMix,s.scaleMix=l.scaleMix,s.shearMix=l.shearMix;return;case b.first:s.rotateMix+=(l.rotateMix-s.rotateMix)*h,s.translateMix+=(l.translateMix-s.translateMix)*h,s.scaleMix+=(l.scaleMix-s.scaleMix)*h,s.shearMix+=(l.shearMix-s.shearMix)*h}return}var u=0,d=0,v=0,p=0;if(a>=o[o.length-t.ENTRIES]){var y=o.length;u=o[y+t.PREV_ROTATE],d=o[y+t.PREV_TRANSLATE],v=o[y+t.PREV_SCALE],p=o[y+t.PREV_SHEAR]}else{var g=Rt.binarySearch(o,a,t.ENTRIES);u=o[g+t.PREV_ROTATE],d=o[g+t.PREV_TRANSLATE],v=o[g+t.PREV_SCALE],p=o[g+t.PREV_SHEAR];var m=o[g],w=this.getCurvePercent(g/t.ENTRIES-1,1-(a-m)/(o[g+t.PREV_TIME]-m));u+=(o[g+t.ROTATE]-u)*w,d+=(o[g+t.TRANSLATE]-d)*w,v+=(o[g+t.SCALE]-v)*w,p+=(o[g+t.SHEAR]-p)*w}if(f==b.setup){var l=s.data;s.rotateMix=l.rotateMix+(u-l.rotateMix)*h,s.translateMix=l.translateMix+(d-l.translateMix)*h,s.scaleMix=l.scaleMix+(v-l.scaleMix)*h,s.shearMix=l.shearMix+(p-l.shearMix)*h}else s.rotateMix+=(u-s.rotateMix)*h,s.translateMix+=(d-s.translateMix)*h,s.scaleMix+=(v-s.scaleMix)*h,s.shearMix+=(p-s.shearMix)*h},t.ENTRIES=5,t.PREV_TIME=-5,t.PREV_ROTATE=-4,t.PREV_TRANSLATE=-3,t.PREV_SCALE=-2,t.PREV_SHEAR=-1,t.ROTATE=1,t.TRANSLATE=2,t.SCALE=3,t.SHEAR=4,t}(ne),Qe=function(i){Et(t,i);function t(e){var r=i.call(this,e)||this;return r.frames=Y.newFloatArray(e*t.ENTRIES),r}return t.prototype.getPropertyId=function(){return(kt.pathConstraintPosition<<24)+this.pathConstraintIndex},t.prototype.setFrame=function(e,r,a){e*=t.ENTRIES,this.frames[e]=r,this.frames[e+t.VALUE]=a},t.prototype.apply=function(e,r,a,n,h,f,c){var o=this.frames,s=e.pathConstraints[this.pathConstraintIndex];if(a<o[0]){switch(f){case b.setup:s.position=s.data.position;return;case b.first:s.position+=(s.data.position-s.position)*h}return}var l=0;if(a>=o[o.length-t.ENTRIES])l=o[o.length+t.PREV_VALUE];else{var u=Rt.binarySearch(o,a,t.ENTRIES);l=o[u+t.PREV_VALUE];var d=o[u],v=this.getCurvePercent(u/t.ENTRIES-1,1-(a-d)/(o[u+t.PREV_TIME]-d));l+=(o[u+t.VALUE]-l)*v}f==b.setup?s.position=s.data.position+(l-s.data.position)*h:s.position+=(l-s.position)*h},t.ENTRIES=2,t.PREV_TIME=-2,t.PREV_VALUE=-1,t.VALUE=1,t}(ne),yn=function(i){Et(t,i);function t(e){return i.call(this,e)||this}return t.prototype.getPropertyId=function(){return(kt.pathConstraintSpacing<<24)+this.pathConstraintIndex},t.prototype.apply=function(e,r,a,n,h,f,c){var o=this.frames,s=e.pathConstraints[this.pathConstraintIndex];if(a<o[0]){switch(f){case b.setup:s.spacing=s.data.spacing;return;case b.first:s.spacing+=(s.data.spacing-s.spacing)*h}return}var l=0;if(a>=o[o.length-t.ENTRIES])l=o[o.length+t.PREV_VALUE];else{var u=Rt.binarySearch(o,a,t.ENTRIES);l=o[u+t.PREV_VALUE];var d=o[u],v=this.getCurvePercent(u/t.ENTRIES-1,1-(a-d)/(o[u+t.PREV_TIME]-d));l+=(o[u+t.VALUE]-l)*v}f==b.setup?s.spacing=s.data.spacing+(l-s.data.spacing)*h:s.spacing+=(l-s.spacing)*h},t}(Qe),Ir=function(i){Et(t,i);function t(e){var r=i.call(this,e)||this;return r.frames=Y.newFloatArray(e*t.ENTRIES),r}return t.prototype.getPropertyId=function(){return(kt.pathConstraintMix<<24)+this.pathConstraintIndex},t.prototype.setFrame=function(e,r,a,n){e*=t.ENTRIES,this.frames[e]=r,this.frames[e+t.ROTATE]=a,this.frames[e+t.TRANSLATE]=n},t.prototype.apply=function(e,r,a,n,h,f,c){var o=this.frames,s=e.pathConstraints[this.pathConstraintIndex];if(a<o[0]){switch(f){case b.setup:s.rotateMix=s.data.rotateMix,s.translateMix=s.data.translateMix;return;case b.first:s.rotateMix+=(s.data.rotateMix-s.rotateMix)*h,s.translateMix+=(s.data.translateMix-s.translateMix)*h}return}var l=0,u=0;if(a>=o[o.length-t.ENTRIES])l=o[o.length+t.PREV_ROTATE],u=o[o.length+t.PREV_TRANSLATE];else{var d=Rt.binarySearch(o,a,t.ENTRIES);l=o[d+t.PREV_ROTATE],u=o[d+t.PREV_TRANSLATE];var v=o[d],p=this.getCurvePercent(d/t.ENTRIES-1,1-(a-v)/(o[d+t.PREV_TIME]-v));l+=(o[d+t.ROTATE]-l)*p,u+=(o[d+t.TRANSLATE]-u)*p}f==b.setup?(s.rotateMix=s.data.rotateMix+(l-s.data.rotateMix)*h,s.translateMix=s.data.translateMix+(u-s.data.translateMix)*h):(s.rotateMix+=(l-s.rotateMix)*h,s.translateMix+=(u-s.translateMix)*h)},t.ENTRIES=3,t.PREV_TIME=-3,t.PREV_ROTATE=-2,t.PREV_TRANSLATE=-1,t.ROTATE=1,t.TRANSLATE=2,t}(ne),wn=function(){function i(t){this.tracks=new Array,this.events=new Array,this.listeners=new Array,this.queue=new En(this),this.propertyIDs=new ja,this.animationsChanged=!1,this.timeScale=1,this.trackEntryPool=new rr(function(){return new xn}),this.data=t}return i.prototype.update=function(t){t*=this.timeScale;for(var e=this.tracks,r=0,a=e.length;r<a;r++){var n=e[r];if(n!=null){n.animationLast=n.nextAnimationLast,n.trackLast=n.nextTrackLast;var h=t*n.timeScale;if(n.delay>0){if(n.delay-=h,n.delay>0)continue;h=-n.delay,n.delay=0}var f=n.next;if(f!=null){var c=n.trackLast-f.delay;if(c>=0){for(f.delay=0,f.trackTime=n.timeScale==0?0:(c/n.timeScale+t)*f.timeScale,n.trackTime+=h,this.setCurrent(r,f,!0);f.mixingFrom!=null;)f.mixTime+=t,f=f.mixingFrom;continue}}else if(n.trackLast>=n.trackEnd&&n.mixingFrom==null){e[r]=null,this.queue.end(n),this.disposeNext(n);continue}if(n.mixingFrom!=null&&this.updateMixingFrom(n,t)){var o=n.mixingFrom;for(n.mixingFrom=null,o!=null&&(o.mixingTo=null);o!=null;)this.queue.end(o),o=o.mixingFrom}n.trackTime+=h}}this.queue.drain()},i.prototype.updateMixingFrom=function(t,e){var r=t.mixingFrom;if(r==null)return!0;var a=this.updateMixingFrom(r,e);return r.animationLast=r.nextAnimationLast,r.trackLast=r.nextTrackLast,t.mixTime>0&&t.mixTime>=t.mixDuration?((r.totalAlpha==0||t.mixDuration==0)&&(t.mixingFrom=r.mixingFrom,r.mixingFrom!=null&&(r.mixingFrom.mixingTo=t),t.interruptAlpha=r.interruptAlpha,this.queue.end(r)),a):(r.trackTime+=e*r.timeScale,t.mixTime+=e,!1)},i.prototype.apply=function(t){if(t==null)throw new Error("skeleton cannot be null.");this.animationsChanged&&this._animationsChanged();for(var e=this.events,r=this.tracks,a=!1,n=0,h=r.length;n<h;n++){var f=r[n];if(!(f==null||f.delay>0)){a=!0;var c=n==0?b.first:f.mixBlend,o=f.alpha;f.mixingFrom!=null?o*=this.applyMixingFrom(f,t,c):f.trackTime>=f.trackEnd&&f.next==null&&(o=0);var s=f.animationLast,l=f.getAnimationTime(),u=f.animation.timelines.length,d=f.animation.timelines;if(n==0&&o==1||c==b.add)for(var v=0;v<u;v++)Y.webkit602BugfixHelper(o,c),d[v].apply(t,s,l,e,o,c,rt.mixIn);else{var p=f.timelineMode,y=f.timelinesRotation.length==0;y&&Y.setArraySize(f.timelinesRotation,u<<1,null);for(var g=f.timelinesRotation,v=0;v<u;v++){var m=d[v],w=p[v]==i.SUBSEQUENT?c:b.setup;m instanceof Jt?this.applyRotateTimeline(m,t,l,o,w,g,v<<1,y):(Y.webkit602BugfixHelper(o,c),m.apply(t,s,l,e,o,w,rt.mixIn))}}this.queueEvents(f,l),e.length=0,f.nextAnimationLast=l,f.nextTrackLast=f.trackTime}}return this.queue.drain(),a},i.prototype.applyMixingFrom=function(t,e,r){var a=t.mixingFrom;a.mixingFrom!=null&&this.applyMixingFrom(a,e,r);var n=0;t.mixDuration==0?(n=1,r==b.first&&(r=b.setup)):(n=t.mixTime/t.mixDuration,n>1&&(n=1),r!=b.first&&(r=a.mixBlend));var h=n<a.eventThreshold?this.events:null,f=n<a.attachmentThreshold,c=n<a.drawOrderThreshold,o=a.animationLast,s=a.getAnimationTime(),l=a.animation.timelines.length,u=a.animation.timelines,d=a.alpha*t.interruptAlpha,v=d*(1-n);if(r==b.add)for(var p=0;p<l;p++)u[p].apply(e,o,s,h,v,r,rt.mixOut);else{var y=a.timelineMode,g=a.timelineHoldMix,m=a.timelinesRotation.length==0;m&&Y.setArraySize(a.timelinesRotation,l<<1,null);var w=a.timelinesRotation;a.totalAlpha=0;for(var p=0;p<l;p++){var x=u[p],E=rt.mixOut,S=void 0,A=0;switch(y[p]){case i.SUBSEQUENT:if(!f&&x instanceof Je||!c&&x instanceof Ke)continue;S=r,A=v;break;case i.FIRST:S=b.setup,A=v;break;case i.HOLD:S=b.setup,A=d;break;default:S=b.setup;var T=g[p];A=d*Math.max(0,1-T.mixTime/T.mixDuration);break}a.totalAlpha+=A,x instanceof Jt?this.applyRotateTimeline(x,e,s,A,S,w,p<<1,m):(Y.webkit602BugfixHelper(A,r),S==b.setup&&(x instanceof Je?f&&(E=rt.mixOut):x instanceof Ke&&c&&(E=rt.mixOut)),x.apply(e,o,s,h,A,S,E))}}return t.mixDuration>0&&this.queueEvents(a,s),this.events.length=0,a.nextAnimationLast=s,a.nextTrackLast=a.trackTime,n},i.prototype.applyRotateTimeline=function(t,e,r,a,n,h,f,c){if(c&&(h[f]=0),a==1){t.apply(e,0,r,null,1,n,rt.mixIn);return}var o=t,s=o.frames,l=e.bones[o.boneIndex],u=0,d=0;if(r<s[0])switch(n){case b.setup:l.rotation=l.data.rotation;default:return;case b.first:u=l.rotation,d=l.data.rotation}else if(u=n==b.setup?l.data.rotation:l.rotation,r>=s[s.length-Jt.ENTRIES])d=l.data.rotation+s[s.length+Jt.PREV_ROTATION];else{var v=Rt.binarySearch(s,r,Jt.ENTRIES),p=s[v+Jt.PREV_ROTATION],y=s[v],g=o.getCurvePercent((v>>1)-1,1-(r-y)/(s[v+Jt.PREV_TIME]-y));d=s[v+Jt.ROTATION]-p,d-=(16384-(16384.499999999996-d/360|0))*360,d=p+d*g+l.data.rotation,d-=(16384-(16384.499999999996-d/360|0))*360}var m=0,w=d-u;if(w-=(16384-(16384.499999999996-w/360|0))*360,w==0)m=h[f];else{var x=0,E=0;c?(x=0,E=w):(x=h[f],E=h[f+1]);var S=w>0,A=x>=0;M.signum(E)!=M.signum(w)&&Math.abs(E)<=90&&(Math.abs(x)>180&&(x+=360*M.signum(x)),A=S),m=w+x-x%360,A!=S&&(m+=360*M.signum(x)),h[f]=m}h[f+1]=w,u+=m*a,l.rotation=u-(16384-(16384.499999999996-u/360|0))*360},i.prototype.queueEvents=function(t,e){for(var r=t.animationStart,a=t.animationEnd,n=a-r,h=t.trackLast%n,f=this.events,c=0,o=f.length;c<o;c++){var s=f[c];if(s.time<h)break;s.time>a||this.queue.event(t,s)}var l=!1;for(t.loop?l=n==0||h>t.trackTime%n:l=e>=a&&t.animationLast<a,l&&this.queue.complete(t);c<o;c++){var u=f[c];u.time<r||this.queue.event(t,f[c])}},i.prototype.clearTracks=function(){var t=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(var e=0,r=this.tracks.length;e<r;e++)this.clearTrack(e);this.tracks.length=0,this.queue.drainDisabled=t,this.queue.drain()},i.prototype.clearTrack=function(t){if(!(t>=this.tracks.length)){var e=this.tracks[t];if(e!=null){this.queue.end(e),this.disposeNext(e);for(var r=e;;){var a=r.mixingFrom;if(a==null)break;this.queue.end(a),r.mixingFrom=null,r.mixingTo=null,r=a}this.tracks[e.trackIndex]=null,this.queue.drain()}}},i.prototype.setCurrent=function(t,e,r){var a=this.expandToIndex(t);this.tracks[t]=e,a!=null&&(r&&this.queue.interrupt(a),e.mixingFrom=a,a.mixingTo=e,e.mixTime=0,a.mixingFrom!=null&&a.mixDuration>0&&(e.interruptAlpha*=Math.min(1,a.mixTime/a.mixDuration)),a.timelinesRotation.length=0),this.queue.start(e)},i.prototype.setAnimation=function(t,e,r){var a=this.data.skeletonData.findAnimation(e);if(a==null)throw new Error("Animation not found: "+e);return this.setAnimationWith(t,a,r)},i.prototype.setAnimationWith=function(t,e,r){if(e==null)throw new Error("animation cannot be null.");var a=!0,n=this.expandToIndex(t);n!=null&&(n.nextTrackLast==-1?(this.tracks[t]=n.mixingFrom,this.queue.interrupt(n),this.queue.end(n),this.disposeNext(n),n=n.mixingFrom,a=!1):this.disposeNext(n));var h=this.trackEntry(t,e,r,n);return this.setCurrent(t,h,a),this.queue.drain(),h},i.prototype.addAnimation=function(t,e,r,a){var n=this.data.skeletonData.findAnimation(e);if(n==null)throw new Error("Animation not found: "+e);return this.addAnimationWith(t,n,r,a)},i.prototype.addAnimationWith=function(t,e,r,a){if(e==null)throw new Error("animation cannot be null.");var n=this.expandToIndex(t);if(n!=null)for(;n.next!=null;)n=n.next;var h=this.trackEntry(t,e,r,n);if(n==null)this.setCurrent(t,h,!0),this.queue.drain();else if(n.next=h,a<=0){var f=n.animationEnd-n.animationStart;f!=0?(n.loop?a+=f*(1+(n.trackTime/f|0)):a+=Math.max(f,n.trackTime),a-=this.data.getMix(n.animation,e)):a=n.trackTime}return h.delay=a,h},i.prototype.setEmptyAnimation=function(t,e){var r=this.setAnimationWith(t,i.emptyAnimation,!1);return r.mixDuration=e,r.trackEnd=e,r},i.prototype.addEmptyAnimation=function(t,e,r){r<=0&&(r-=e);var a=this.addAnimationWith(t,i.emptyAnimation,!1,r);return a.mixDuration=e,a.trackEnd=e,a},i.prototype.setEmptyAnimations=function(t){var e=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(var r=0,a=this.tracks.length;r<a;r++){var n=this.tracks[r];n!=null&&this.setEmptyAnimation(n.trackIndex,t)}this.queue.drainDisabled=e,this.queue.drain()},i.prototype.expandToIndex=function(t){return t<this.tracks.length?this.tracks[t]:(Y.ensureArrayCapacity(this.tracks,t-this.tracks.length+1,null),this.tracks.length=t+1,null)},i.prototype.trackEntry=function(t,e,r,a){var n=this.trackEntryPool.obtain();return n.trackIndex=t,n.animation=e,n.loop=r,n.holdPrevious=!1,n.eventThreshold=0,n.attachmentThreshold=0,n.drawOrderThreshold=0,n.animationStart=0,n.animationEnd=e.duration,n.animationLast=-1,n.nextAnimationLast=-1,n.delay=0,n.trackTime=0,n.trackLast=-1,n.nextTrackLast=-1,n.trackEnd=Number.MAX_VALUE,n.timeScale=1,n.alpha=1,n.interruptAlpha=1,n.mixTime=0,n.mixDuration=a==null?0:this.data.getMix(a.animation,e),n},i.prototype.disposeNext=function(t){for(var e=t.next;e!=null;)this.queue.dispose(e),e=e.next;t.next=null},i.prototype._animationsChanged=function(){this.animationsChanged=!1,this.propertyIDs.clear();for(var t=0,e=this.tracks.length;t<e;t++){var r=this.tracks[t];if(r!=null){for(;r.mixingFrom!=null;)r=r.mixingFrom;do(r.mixingFrom==null||r.mixBlend!=b.add)&&this.setTimelineModes(r),r=r.mixingTo;while(r!=null)}}},i.prototype.setTimelineModes=function(t){var e=t.mixingTo,r=t.animation.timelines,a=t.animation.timelines.length,n=Y.setArraySize(t.timelineMode,a);t.timelineHoldMix.length=0;var h=Y.setArraySize(t.timelineHoldMix,a),f=this.propertyIDs;if(e!=null&&e.holdPrevious){for(var c=0;c<a;c++)f.add(r[c].getPropertyId()),n[c]=i.HOLD;return}t:for(var c=0;c<a;c++){var o=r[c].getPropertyId();if(!f.add(o))n[c]=i.SUBSEQUENT;else if(e==null||!this.hasTimeline(e,o))n[c]=i.FIRST;else{for(var s=e.mixingTo;s!=null;s=s.mixingTo)if(!this.hasTimeline(s,o)){if(t.mixDuration>0){n[c]=i.HOLD_MIX,h[c]=s;continue t}break}n[c]=i.HOLD}}},i.prototype.hasTimeline=function(t,e){for(var r=t.animation.timelines,a=0,n=r.length;a<n;a++)if(r[a].getPropertyId()==e)return!0;return!1},i.prototype.getCurrent=function(t){return t>=this.tracks.length?null:this.tracks[t]},i.prototype.addListener=function(t){if(t==null)throw new Error("listener cannot be null.");this.listeners.push(t)},i.prototype.removeListener=function(t){var e=this.listeners.indexOf(t);e>=0&&this.listeners.splice(e,1)},i.prototype.clearListeners=function(){this.listeners.length=0},i.prototype.clearListenerNotifications=function(){this.queue.clear()},i.prototype.setAnimationByName=function(t,e,r){i.deprecatedWarning1||(i.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: AnimationState.setAnimationByName is deprecated, please use setAnimation from now on.")),this.setAnimation(t,e,r)},i.prototype.addAnimationByName=function(t,e,r,a){i.deprecatedWarning2||(i.deprecatedWarning2=!0,console.warn("Spine Deprecation Warning: AnimationState.addAnimationByName is deprecated, please use addAnimation from now on.")),this.addAnimation(t,e,r,a)},i.prototype.hasAnimation=function(t){var e=this.data.skeletonData.findAnimation(t);return e!==null},i.prototype.hasAnimationByName=function(t){return i.deprecatedWarning3||(i.deprecatedWarning3=!0,console.warn("Spine Deprecation Warning: AnimationState.hasAnimationByName is deprecated, please use hasAnimation from now on.")),this.hasAnimation(t)},i.emptyAnimation=new Rt("<empty>",[],0),i.SUBSEQUENT=0,i.FIRST=1,i.HOLD=2,i.HOLD_MIX=3,i.deprecatedWarning1=!1,i.deprecatedWarning2=!1,i.deprecatedWarning3=!1,i}(),xn=function(){function i(){this.mixBlend=b.replace,this.timelineMode=new Array,this.timelineHoldMix=new Array,this.timelinesRotation=new Array}return i.prototype.reset=function(){this.next=null,this.mixingFrom=null,this.mixingTo=null,this.animation=null,this.listener=null,this.timelineMode.length=0,this.timelineHoldMix.length=0,this.timelinesRotation.length=0},i.prototype.getAnimationTime=function(){if(this.loop){var t=this.animationEnd-this.animationStart;return t==0?this.animationStart:this.trackTime%t+this.animationStart}return Math.min(this.trackTime+this.animationStart,this.animationEnd)},i.prototype.setAnimationLast=function(t){this.animationLast=t,this.nextAnimationLast=t},i.prototype.isComplete=function(){return this.trackTime>=this.animationEnd-this.animationStart},i.prototype.resetRotationDirections=function(){this.timelinesRotation.length=0},Object.defineProperty(i.prototype,"time",{get:function(){return i.deprecatedWarning1||(i.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: TrackEntry.time is deprecated, please use trackTime from now on.")),this.trackTime},set:function(t){i.deprecatedWarning1||(i.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: TrackEntry.time is deprecated, please use trackTime from now on.")),this.trackTime=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"endTime",{get:function(){return i.deprecatedWarning2||(i.deprecatedWarning2=!0,console.warn("Spine Deprecation Warning: TrackEntry.endTime is deprecated, please use trackEnd from now on.")),this.trackTime},set:function(t){i.deprecatedWarning2||(i.deprecatedWarning2=!0,console.warn("Spine Deprecation Warning: TrackEntry.endTime is deprecated, please use trackEnd from now on.")),this.trackTime=t},enumerable:!1,configurable:!0}),i.prototype.loopsCount=function(){return Math.floor(this.trackTime/this.trackEnd)},i.deprecatedWarning1=!1,i.deprecatedWarning2=!1,i}(),En=function(){function i(t){this.objects=[],this.drainDisabled=!1,this.animState=t}return i.prototype.start=function(t){this.objects.push(Ot.start),this.objects.push(t),this.animState.animationsChanged=!0},i.prototype.interrupt=function(t){this.objects.push(Ot.interrupt),this.objects.push(t)},i.prototype.end=function(t){this.objects.push(Ot.end),this.objects.push(t),this.animState.animationsChanged=!0},i.prototype.dispose=function(t){this.objects.push(Ot.dispose),this.objects.push(t)},i.prototype.complete=function(t){this.objects.push(Ot.complete),this.objects.push(t)},i.prototype.event=function(t,e){this.objects.push(Ot.event),this.objects.push(t),this.objects.push(e)},i.prototype.deprecateStuff=function(){return i.deprecatedWarning1||(i.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: onComplete, onStart, onEnd, onEvent art deprecated, please use listeners from now on. 'state.addListener({ complete: function(track, event) { } })'")),!0},i.prototype.drain=function(){if(!this.drainDisabled){this.drainDisabled=!0;for(var t=this.objects,e=this.animState.listeners,r=0;r<t.length;r+=2){var a=t[r],n=t[r+1];switch(a){case Ot.start:n.listener!=null&&n.listener.start&&n.listener.start(n);for(var h=0;h<e.length;h++)e[h].start&&e[h].start(n);n.onStart&&this.deprecateStuff()&&n.onStart(n.trackIndex),this.animState.onStart&&this.deprecateStuff()&&this.deprecateStuff&&this.animState.onStart(n.trackIndex);break;case Ot.interrupt:n.listener!=null&&n.listener.interrupt&&n.listener.interrupt(n);for(var h=0;h<e.length;h++)e[h].interrupt&&e[h].interrupt(n);break;case Ot.end:n.listener!=null&&n.listener.end&&n.listener.end(n);for(var h=0;h<e.length;h++)e[h].end&&e[h].end(n);n.onEnd&&this.deprecateStuff()&&n.onEnd(n.trackIndex),this.animState.onEnd&&this.deprecateStuff()&&this.animState.onEnd(n.trackIndex);case Ot.dispose:n.listener!=null&&n.listener.dispose&&n.listener.dispose(n);for(var h=0;h<e.length;h++)e[h].dispose&&e[h].dispose(n);this.animState.trackEntryPool.free(n);break;case Ot.complete:n.listener!=null&&n.listener.complete&&n.listener.complete(n);for(var h=0;h<e.length;h++)e[h].complete&&e[h].complete(n);var f=M.toInt(n.loopsCount());n.onComplete&&this.deprecateStuff()&&n.onComplete(n.trackIndex,f),this.animState.onComplete&&this.deprecateStuff()&&this.animState.onComplete(n.trackIndex,f);break;case Ot.event:var c=t[r+++2];n.listener!=null&&n.listener.event&&n.listener.event(n,c);for(var h=0;h<e.length;h++)e[h].event&&e[h].event(n,c);n.onEvent&&this.deprecateStuff()&&n.onEvent(n.trackIndex,c),this.animState.onEvent&&this.deprecateStuff()&&this.animState.onEvent(n.trackIndex,c);break}}this.clear(),this.drainDisabled=!1}},i.prototype.clear=function(){this.objects.length=0},i.deprecatedWarning1=!1,i}(),Ot;(function(i){i[i.start=0]="start",i[i.interrupt=1]="interrupt",i[i.end=2]="end",i[i.dispose=3]="dispose",i[i.complete=4]="complete",i[i.event=5]="event"})(Ot||(Ot={}));var Vi=function(){function i(){}return i.prototype.start=function(t){},i.prototype.interrupt=function(t){},i.prototype.end=function(t){},i.prototype.dispose=function(t){},i.prototype.complete=function(t){},i.prototype.event=function(t,e){},i}(),Sn=function(){function i(t){if(this.animationToMixTime={},this.defaultMix=0,t==null)throw new Error("skeletonData cannot be null.");this.skeletonData=t}return i.prototype.setMix=function(t,e,r){var a=this.skeletonData.findAnimation(t);if(a==null)throw new Error("Animation not found: "+t);var n=this.skeletonData.findAnimation(e);if(n==null)throw new Error("Animation not found: "+e);this.setMixWith(a,n,r)},i.prototype.setMixByName=function(t,e,r){i.deprecatedWarning1||(i.deprecatedWarning1=!0,console.warn("Deprecation Warning: AnimationStateData.setMixByName is deprecated, please use setMix from now on.")),this.setMix(t,e,r)},i.prototype.setMixWith=function(t,e,r){if(t==null)throw new Error("from cannot be null.");if(e==null)throw new Error("to cannot be null.");var a=t.name+"."+e.name;this.animationToMixTime[a]=r},i.prototype.getMix=function(t,e){var r=t.name+"."+e.name,a=this.animationToMixTime[r];return a===void 0?this.defaultMix:a},i.deprecatedWarning1=!1,i}(),An=function(){function i(t){this.atlas=t}return i.prototype.newRegionAttachment=function(t,e,r){var a=this.atlas.findRegion(r);if(a==null)throw new Error("Region not found in atlas: "+r+" (region attachment: "+e+")");var n=new ea(e);return n.region=a,n},i.prototype.newMeshAttachment=function(t,e,r){var a=this.atlas.findRegion(r);if(a==null)throw new Error("Region not found in atlas: "+r+" (mesh attachment: "+e+")");var n=new Qr(e);return n.region=a,n},i.prototype.newBoundingBoxAttachment=function(t,e){return new un(e)},i.prototype.newPathAttachment=function(t,e){return new qe(e)},i.prototype.newPointAttachment=function(t,e){return new vn(e)},i.prototype.newClippingAttachment=function(t,e){return new cn(e)},i}(),kr=function(){function i(t,e,r){if(this.matrix=new Br,this.children=new Array,this.x=0,this.y=0,this.rotation=0,this.scaleX=0,this.scaleY=0,this.shearX=0,this.shearY=0,this.ax=0,this.ay=0,this.arotation=0,this.ascaleX=0,this.ascaleY=0,this.ashearX=0,this.ashearY=0,this.appliedValid=!1,this.sorted=!1,this.active=!0,t==null)throw new Error("data cannot be null.");if(e==null)throw new Error("skeleton cannot be null.");this.data=t,this.skeleton=e,this.parent=r,this.setToSetupPose()}return Object.defineProperty(i.prototype,"worldX",{get:function(){return this.matrix.tx},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"worldY",{get:function(){return this.matrix.ty},enumerable:!1,configurable:!0}),i.prototype.update=function(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)},i.prototype.updateWorldTransform=function(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)},i.prototype.updateWorldTransformWith=function(t,e,r,a,n,h,f){this.ax=t,this.ay=e,this.arotation=r,this.ascaleX=a,this.ascaleY=n,this.ashearX=h,this.ashearY=f,this.appliedValid=!0;var c=this.parent,o=this.matrix,s=this.skeleton.scaleX,l=Ht.yDown?-this.skeleton.scaleY:this.skeleton.scaleY;if(c==null){var u=this.skeleton,d=r+90+f;o.a=M.cosDeg(r+h)*a*s,o.c=M.cosDeg(d)*n*s,o.b=M.sinDeg(r+h)*a*l,o.d=M.sinDeg(d)*n*l,o.tx=t*s+u.x,o.ty=e*l+u.y;return}var v=c.matrix.a,p=c.matrix.c,y=c.matrix.b,g=c.matrix.d;switch(o.tx=v*t+p*e+c.matrix.tx,o.ty=y*t+g*e+c.matrix.ty,this.data.transformMode){case Q.Normal:{var d=r+90+f,m=M.cosDeg(r+h)*a,w=M.cosDeg(d)*n,x=M.sinDeg(r+h)*a,E=M.sinDeg(d)*n;o.a=v*m+p*x,o.c=v*w+p*E,o.b=y*m+g*x,o.d=y*w+g*E;return}case Q.OnlyTranslation:{var d=r+90+f;o.a=M.cosDeg(r+h)*a,o.c=M.cosDeg(d)*n,o.b=M.sinDeg(r+h)*a,o.d=M.sinDeg(d)*n;break}case Q.NoRotationOrReflection:{var S=v*v+y*y,A=0;S>1e-4?(S=Math.abs(v*g-p*y)/S,p=y*S,g=v*S,A=Math.atan2(y,v)*M.radDeg):(v=0,y=0,A=90-Math.atan2(g,p)*M.radDeg);var T=r+h-A,C=r+f-A+90,m=M.cosDeg(T)*a,w=M.cosDeg(C)*n,x=M.sinDeg(T)*a,E=M.sinDeg(C)*n;o.a=v*m-p*x,o.c=v*w-p*E,o.b=y*m+g*x,o.d=y*w+g*E;break}case Q.NoScale:case Q.NoScaleOrReflection:{var I=M.cosDeg(r),P=M.sinDeg(r),R=(v*I+p*P)/s,V=(y*I+g*P)/l,S=Math.sqrt(R*R+V*V);S>1e-5&&(S=1/S),R*=S,V*=S,S=Math.sqrt(R*R+V*V),this.data.transformMode==Q.NoScale&&v*g-p*y<0!=(Ht.yDown?this.skeleton.scaleX<0!=this.skeleton.scaleY>0:this.skeleton.scaleX<0!=this.skeleton.scaleY<0)&&(S=-S);var k=Math.PI/2+Math.atan2(V,R),B=Math.cos(k)*S,D=Math.sin(k)*S,m=M.cosDeg(h)*a,w=M.cosDeg(90+f)*n,x=M.sinDeg(h)*a,E=M.sinDeg(90+f)*n;o.a=R*m+B*x,o.c=R*w+B*E,o.b=V*m+D*x,o.d=V*w+D*E;break}}o.a*=s,o.c*=s,o.b*=l,o.d*=l},i.prototype.setToSetupPose=function(){var t=this.data;this.x=t.x,this.y=t.y,this.rotation=t.rotation,this.scaleX=t.scaleX,this.scaleY=t.scaleY,this.shearX=t.shearX,this.shearY=t.shearY},i.prototype.getWorldRotationX=function(){return Math.atan2(this.matrix.b,this.matrix.a)*M.radDeg},i.prototype.getWorldRotationY=function(){return Math.atan2(this.matrix.d,this.matrix.c)*M.radDeg},i.prototype.getWorldScaleX=function(){var t=this.matrix;return Math.sqrt(t.a*t.a+t.c*t.c)},i.prototype.getWorldScaleY=function(){var t=this.matrix;return Math.sqrt(t.b*t.b+t.d*t.d)},i.prototype.updateAppliedTransform=function(){this.appliedValid=!0;var t=this.parent,e=this.matrix;if(t==null){this.ax=e.tx,this.ay=e.ty,this.arotation=Math.atan2(e.b,e.a)*M.radDeg,this.ascaleX=Math.sqrt(e.a*e.a+e.b*e.b),this.ascaleY=Math.sqrt(e.c*e.c+e.d*e.d),this.ashearX=0,this.ashearY=Math.atan2(e.a*e.c+e.b*e.d,e.a*e.d-e.b*e.c)*M.radDeg;return}var r=t.matrix,a=1/(r.a*r.d-r.b*r.c),n=e.tx-r.tx,h=e.ty-r.ty;this.ax=n*r.d*a-h*r.c*a,this.ay=h*r.a*a-n*r.b*a;var f=a*r.d,c=a*r.a,o=a*r.c,s=a*r.b,l=f*e.a-o*e.b,u=f*e.c-o*e.d,d=c*e.b-s*e.a,v=c*e.d-s*e.c;if(this.ashearX=0,this.ascaleX=Math.sqrt(l*l+d*d),this.ascaleX>1e-4){var p=l*v-u*d;this.ascaleY=p/this.ascaleX,this.ashearY=Math.atan2(l*u+d*v,p)*M.radDeg,this.arotation=Math.atan2(d,l)*M.radDeg}else this.ascaleX=0,this.ascaleY=Math.sqrt(u*u+v*v),this.ashearY=0,this.arotation=90-Math.atan2(v,u)*M.radDeg},i.prototype.worldToLocal=function(t){var e=this.matrix,r=e.a,a=e.c,n=e.b,h=e.d,f=1/(r*h-a*n),c=t.x-e.tx,o=t.y-e.ty;return t.x=c*h*f-o*a*f,t.y=o*r*f-c*n*f,t},i.prototype.localToWorld=function(t){var e=this.matrix,r=t.x,a=t.y;return t.x=r*e.a+a*e.c+e.tx,t.y=r*e.b+a*e.d+e.ty,t},i.prototype.worldToLocalRotation=function(t){var e=M.sinDeg(t),r=M.cosDeg(t),a=this.matrix;return Math.atan2(a.a*e-a.b*r,a.d*r-a.c*e)*M.radDeg},i.prototype.localToWorldRotation=function(t){var e=M.sinDeg(t),r=M.cosDeg(t),a=this.matrix;return Math.atan2(r*a.b+e*a.d,r*a.a+e*a.c)*M.radDeg},i.prototype.rotateWorld=function(t){var e=this.matrix,r=e.a,a=e.c,n=e.b,h=e.d,f=M.cosDeg(t),c=M.sinDeg(t);e.a=f*r-c*n,e.c=f*a-c*h,e.b=c*r+f*n,e.d=c*a+f*h,this.appliedValid=!1},i}(),bn=function(){function i(t,e,r){if(this.x=0,this.y=0,this.rotation=0,this.scaleX=1,this.scaleY=1,this.shearX=0,this.shearY=0,this.transformMode=Q.Normal,t<0)throw new Error("index must be >= 0.");if(e==null)throw new Error("name cannot be null.");this.index=t,this.name=e,this.parent=r}return i}(),Tn=function(){function i(t,e){if(e==null)throw new Error("data cannot be null.");this.time=t,this.data=e}return i}(),Cn=function(){function i(t){this.name=t}return i}(),Rn=function(){function i(t,e){if(this.bendDirection=0,this.compress=!1,this.stretch=!1,this.mix=1,t==null)throw new Error("data cannot be null.");if(e==null)throw new Error("skeleton cannot be null.");this.data=t,this.mix=t.mix,this.bendDirection=t.bendDirection,this.compress=t.compress,this.stretch=t.stretch,this.bones=new Array;for(var r=0;r<t.bones.length;r++)this.bones.push(e.findBone(t.bones[r].name));this.target=e.findBone(t.target.name)}return i.prototype.getOrder=function(){return this.data.order},i.prototype.apply=function(){this.update()},i.prototype.update=function(){var t=this.target,e=this.bones;switch(e.length){case 1:this.apply1(e[0],t.worldX,t.worldY,this.compress,this.stretch,this.data.uniform,this.mix);break;case 2:this.apply2(e[0],e[1],t.worldX,t.worldY,this.bendDirection,this.stretch,this.mix);break}},i.prototype.apply1=function(t,e,r,a,n,h,f){t.appliedValid||t.updateAppliedTransform();var c=t.parent.matrix,o=1/(c.a*c.d-c.b*c.c),s=e-c.tx,l=r-c.ty,u=(s*c.d-l*c.c)*o-t.ax,d=(l*c.a-s*c.b)*o-t.ay,v=Math.atan2(d,u)*M.radDeg-t.ashearX-t.arotation;t.ascaleX<0&&(v+=180),v>180?v-=360:v<-180&&(v+=360);var p=t.ascaleX,y=t.ascaleY;if(a||n){var g=t.data.length*p,m=Math.sqrt(u*u+d*d);if(a&&m<g||n&&m>g&&g>1e-4){var w=(m/g-1)*f+1;p*=w,h&&(y*=w)}}t.updateWorldTransformWith(t.ax,t.ay,t.arotation+v*f,p,y,t.ashearX,t.ashearY)},i.prototype.apply2=function(t,e,r,a,n,h,f){if(f==0){e.updateWorldTransform();return}t.appliedValid||t.updateAppliedTransform(),e.appliedValid||e.updateAppliedTransform();var c=t.ax,o=t.ay,s=t.ascaleX,l=s,u=t.ascaleY,d=e.ascaleX,v=t.matrix,p=0,y=0,g=0;s<0?(s=-s,p=180,g=-1):(p=0,g=1),u<0&&(u=-u,g=-g),d<0?(d=-d,y=180):y=0;var m=e.ax,w=0,x=0,E=0,S=v.a,A=v.c,T=v.b,C=v.d,I=Math.abs(s-u)<=1e-4;I?(w=e.ay,x=S*m+A*w+v.tx,E=T*m+C*w+v.ty):(w=0,x=S*m+v.tx,E=T*m+v.ty);var P=t.parent.matrix;S=P.a,A=P.c,T=P.b,C=P.d;var R=1/(S*C-A*T),V=r-P.tx,k=a-P.ty,B=(V*C-k*A)*R-c,D=(k*S-V*T)*R-o,L=B*B+D*D;V=x-P.tx,k=E-P.ty;var H=(V*C-k*A)*R-c,_=(k*S-V*T)*R-o,O=Math.sqrt(H*H+_*_),U=e.data.length*d,W=0,N=0;t:if(I){U*=s;var F=(L-O*O-U*U)/(2*O*U);F<-1?F=-1:F>1&&(F=1,h&&O+U>1e-4&&(l*=(Math.sqrt(L)/(O+U)-1)*f+1)),N=Math.acos(F)*n,S=O+U*F,A=U*Math.sin(N),W=Math.atan2(D*S-B*A,B*S+D*A)}else{S=s*U,A=u*U;var q=S*S,$=A*A,z=Math.atan2(D,B);T=$*O*O+q*L-q*$;var j=-2*$*O,J=$-q;if(C=j*j-4*J*T,C>=0){var K=Math.sqrt(C);j<0&&(K=-K),K=-(j+K)/2;var Z=K/J,tt=T/K,ht=Math.abs(Z)<Math.abs(tt)?Z:tt;if(ht*ht<=L){k=Math.sqrt(L-ht*ht)*n,W=z-Math.atan2(k,ht),N=Math.atan2(k/u,(ht-O)/s);break t}}var it=M.PI,ut=O-S,ot=ut*ut,ft=0,pt=0,yt=O+S,Pt=yt*yt,Ft=0;T=-S*O/(q-$),T>=-1&&T<=1&&(T=Math.acos(T),V=S*Math.cos(T)+O,k=A*Math.sin(T),C=V*V+k*k,C<ot&&(it=T,ot=C,ut=V,ft=k),C>Pt&&(pt=T,Pt=C,yt=V,Ft=k)),L<=(ot+Pt)/2?(W=z-Math.atan2(ft*n,ut),N=it*n):(W=z-Math.atan2(Ft*n,yt),N=pt*n)}var Yt=Math.atan2(w,m)*g,St=t.arotation;W=(W-Yt)*M.radDeg+p-St,W>180?W-=360:W<-180&&(W+=360),t.updateWorldTransformWith(c,o,St+W*f,l,t.ascaleY,0,0),St=e.arotation,N=((N+Yt)*M.radDeg-e.ashearX)*g+y-St,N>180?N-=360:N<-180&&(N+=360),e.updateWorldTransformWith(m,w,St+N*f,e.ascaleX,e.ascaleY,e.ashearX,e.ashearY)},i}(),Mn=function(){function i(t){this.order=0,this.bones=new Array,this.bendDirection=1,this.compress=!1,this.stretch=!1,this.uniform=!1,this.mix=1,this.name=t}return i}(),In=function(){function i(t){this.order=0,this.bones=new Array,this.name=t}return i}(),jt;(function(i){i[i.Length=0]="Length",i[i.Fixed=1]="Fixed",i[i.Percent=2]="Percent"})(jt||(jt={}));var kn=function(){function i(t,e){if(this.position=0,this.spacing=0,this.rotateMix=0,this.translateMix=0,this.spaces=new Array,this.positions=new Array,this.world=new Array,this.curves=new Array,this.lengths=new Array,this.segments=new Array,t==null)throw new Error("data cannot be null.");if(e==null)throw new Error("skeleton cannot be null.");this.data=t,this.bones=new Array;for(var r=0,a=t.bones.length;r<a;r++)this.bones.push(e.findBone(t.bones[r].name));this.target=e.findSlot(t.target.name),this.position=t.position,this.spacing=t.spacing,this.rotateMix=t.rotateMix,this.translateMix=t.translateMix}return i.prototype.apply=function(){this.update()},i.prototype.update=function(){var t=this.target.getAttachment();if(t instanceof qe){var e=this.rotateMix,r=this.translateMix,a=r>0,n=e>0;if(!(!a&&!n)){var h=this.data,f=h.spacingMode,c=f==jt.Length,o=h.rotateMode,s=o==gt.Tangent,l=o==gt.ChainScale,u=this.bones.length,d=s?u:u+1,v=this.bones,p=Y.setArraySize(this.spaces,d),y=null,g=this.spacing;if(l||c){l&&(y=Y.setArraySize(this.lengths,u));for(var m=0,w=d-1;m<w;){var x=v[m],E=x.data.length;if(E<i.epsilon)l&&(y[m]=0),p[++m]=0;else{var S=E*x.matrix.a,A=E*x.matrix.b,T=Math.sqrt(S*S+A*A);l&&(y[m]=T),p[++m]=(c?E+g:g)*T/E}}}else for(var m=1;m<d;m++)p[m]=g;var C=this.computeWorldPositions(t,d,s,h.positionMode==vt.Percent,f==jt.Percent),I=C[0],P=C[1],R=h.offsetRotation,V=!1;if(R==0)V=o==gt.Chain;else{V=!1;var k=this.target.bone.matrix;R*=k.a*k.d-k.b*k.c>0?M.degRad:-M.degRad}for(var m=0,k=3;m<u;m++,k+=3){var x=v[m],B=x.matrix;B.tx+=(I-B.tx)*r,B.ty+=(P-B.ty)*r;var S=C[k],A=C[k+1],D=S-I,L=A-P;if(l){var H=y[m];if(H!=0){var _=(Math.sqrt(D*D+L*L)/H-1)*e+1;B.a*=_,B.b*=_}}if(I=S,P=A,n){var O=B.a,U=B.c,W=B.b,N=B.d,F=0,q=0,$=0;if(s?F=C[k-1]:p[m+1]==0?F=C[k+2]:F=Math.atan2(L,D),F-=Math.atan2(W,O),V){q=Math.cos(F),$=Math.sin(F);var z=x.data.length;I+=(z*(q*O-$*W)-D)*e,P+=(z*($*O+q*W)-L)*e}else F+=R;F>M.PI?F-=M.PI2:F<-M.PI&&(F+=M.PI2),F*=e,q=Math.cos(F),$=Math.sin(F),B.a=q*O-$*W,B.c=q*U-$*N,B.b=$*O+q*W,B.d=$*U+q*N}x.appliedValid=!1}}}},i.prototype.computeWorldPositions=function(t,e,r,a,n){var h=this.target,f=this.position,c=this.spaces,o=Y.setArraySize(this.positions,e*3+2),s=null,l=t.closed,u=t.worldVerticesLength,d=u/6,v=i.NONE;if(!t.constantSpeed){var p=t.lengths;d-=l?1:2;var y=p[d];if(a&&(f*=y),n)for(var g=0;g<e;g++)c[g]*=y;s=Y.setArraySize(this.world,8);for(var g=0,m=0,w=0;g<e;g++,m+=3){var x=c[g];f+=x;var E=f;if(l)E%=y,E<0&&(E+=y),w=0;else if(E<0){v!=i.BEFORE&&(v=i.BEFORE,t.computeWorldVertices(h,2,4,s,0,2)),this.addBeforePosition(E,s,0,o,m);continue}else if(E>y){v!=i.AFTER&&(v=i.AFTER,t.computeWorldVertices(h,u-6,4,s,0,2)),this.addAfterPosition(E-y,s,0,o,m);continue}for(;;w++){var S=p[w];if(!(E>S)){if(w==0)E/=S;else{var A=p[w-1];E=(E-A)/(S-A)}break}}w!=v&&(v=w,l&&w==d?(t.computeWorldVertices(h,u-4,4,s,0,2),t.computeWorldVertices(h,0,4,s,4,2)):t.computeWorldVertices(h,w*6+2,8,s,0,2)),this.addCurvePosition(E,s[0],s[1],s[2],s[3],s[4],s[5],s[6],s[7],o,m,r||g>0&&x==0)}return o}l?(u+=2,s=Y.setArraySize(this.world,u),t.computeWorldVertices(h,2,u-4,s,0,2),t.computeWorldVertices(h,0,2,s,u-4,2),s[u-2]=s[0],s[u-1]=s[1]):(d--,u-=4,s=Y.setArraySize(this.world,u),t.computeWorldVertices(h,2,u,s,0,2));for(var T=Y.setArraySize(this.curves,d),C=0,I=s[0],P=s[1],R=0,V=0,k=0,B=0,D=0,L=0,H=0,_=0,O=0,U=0,W=0,N=0,F=0,q=0,g=0,$=2;g<d;g++,$+=6)R=s[$],V=s[$+1],k=s[$+2],B=s[$+3],D=s[$+4],L=s[$+5],H=(I-R*2+k)*.1875,_=(P-V*2+B)*.1875,O=((R-k)*3-I+D)*.09375,U=((V-B)*3-P+L)*.09375,W=H*2+O,N=_*2+U,F=(R-I)*.75+H+O*.16666667,q=(V-P)*.75+_+U*.16666667,C+=Math.sqrt(F*F+q*q),F+=W,q+=N,W+=O,N+=U,C+=Math.sqrt(F*F+q*q),F+=W,q+=N,C+=Math.sqrt(F*F+q*q),F+=W+O,q+=N+U,C+=Math.sqrt(F*F+q*q),T[g]=C,I=D,P=L;if(a&&(f*=C),n)for(var g=0;g<e;g++)c[g]*=C;for(var z=this.segments,j=0,g=0,m=0,w=0,J=0;g<e;g++,m+=3){var x=c[g];f+=x;var E=f;if(l)E%=C,E<0&&(E+=C),w=0;else if(E<0){this.addBeforePosition(E,s,0,o,m);continue}else if(E>C){this.addAfterPosition(E-C,s,u-4,o,m);continue}for(;;w++){var K=T[w];if(!(E>K)){if(w==0)E/=K;else{var A=T[w-1];E=(E-A)/(K-A)}break}}if(w!=v){v=w;var Z=w*6;for(I=s[Z],P=s[Z+1],R=s[Z+2],V=s[Z+3],k=s[Z+4],B=s[Z+5],D=s[Z+6],L=s[Z+7],H=(I-R*2+k)*.03,_=(P-V*2+B)*.03,O=((R-k)*3-I+D)*.006,U=((V-B)*3-P+L)*.006,W=H*2+O,N=_*2+U,F=(R-I)*.3+H+O*.16666667,q=(V-P)*.3+_+U*.16666667,j=Math.sqrt(F*F+q*q),z[0]=j,Z=1;Z<8;Z++)F+=W,q+=N,W+=O,N+=U,j+=Math.sqrt(F*F+q*q),z[Z]=j;F+=W,q+=N,j+=Math.sqrt(F*F+q*q),z[8]=j,F+=W+O,q+=N+U,j+=Math.sqrt(F*F+q*q),z[9]=j,J=0}for(E*=j;;J++){var tt=z[J];if(!(E>tt)){if(J==0)E/=tt;else{var A=z[J-1];E=J+(E-A)/(tt-A)}break}}this.addCurvePosition(E*.1,I,P,R,V,k,B,D,L,o,m,r||g>0&&x==0)}return o},i.prototype.addBeforePosition=function(t,e,r,a,n){var h=e[r],f=e[r+1],c=e[r+2]-h,o=e[r+3]-f,s=Math.atan2(o,c);a[n]=h+t*Math.cos(s),a[n+1]=f+t*Math.sin(s),a[n+2]=s},i.prototype.addAfterPosition=function(t,e,r,a,n){var h=e[r+2],f=e[r+3],c=h-e[r],o=f-e[r+1],s=Math.atan2(o,c);a[n]=h+t*Math.cos(s),a[n+1]=f+t*Math.sin(s),a[n+2]=s},i.prototype.addCurvePosition=function(t,e,r,a,n,h,f,c,o,s,l,u){(t==0||isNaN(t))&&(t=1e-4);var d=t*t,v=d*t,p=1-t,y=p*p,g=y*p,m=p*t,w=m*3,x=p*w,E=w*t,S=e*g+a*x+h*E+c*v,A=r*g+n*x+f*E+o*v;s[l]=S,s[l+1]=A,u&&(s[l+2]=Math.atan2(A-(r*y+n*m*2+f*d),S-(e*y+a*m*2+h*d)))},i.prototype.getOrder=function(){return this.data.order},i.NONE=-1,i.BEFORE=-2,i.AFTER=-3,i.epsilon=1e-5,i}(),Pn=function(){function i(t,e){if(this.rotateMix=0,this.translateMix=0,this.scaleMix=0,this.shearMix=0,this.temp=new Be,t==null)throw new Error("data cannot be null.");if(e==null)throw new Error("skeleton cannot be null.");this.data=t,this.rotateMix=t.rotateMix,this.translateMix=t.translateMix,this.scaleMix=t.scaleMix,this.shearMix=t.shearMix,this.bones=new Array;for(var r=0;r<t.bones.length;r++)this.bones.push(e.findBone(t.bones[r].name));this.target=e.findBone(t.target.name)}return i.prototype.apply=function(){this.update()},i.prototype.update=function(){this.data.local?this.data.relative?this.applyRelativeLocal():this.applyAbsoluteLocal():this.data.relative?this.applyRelativeWorld():this.applyAbsoluteWorld()},i.prototype.applyAbsoluteWorld=function(){for(var t=this.rotateMix,e=this.translateMix,r=this.scaleMix,a=this.shearMix,n=this.target,h=n.matrix,f=h.a,c=h.c,o=h.b,s=h.d,l=f*s-c*o>0?M.degRad:-M.degRad,u=this.data.offsetRotation*l,d=this.data.offsetShearY*l,v=this.bones,p=0,y=v.length;p<y;p++){var g=v[p],m=!1,w=g.matrix;if(t!=0){var x=w.a,E=w.c,S=w.b,A=w.d,T=Math.atan2(o,f)-Math.atan2(S,x)+u;T>M.PI?T-=M.PI2:T<-M.PI&&(T+=M.PI2),T*=t;var C=Math.cos(T),I=Math.sin(T);w.a=C*x-I*S,w.c=C*E-I*A,w.b=I*x+C*S,w.d=I*E+C*A,m=!0}if(e!=0){var P=this.temp;n.localToWorld(P.set(this.data.offsetX,this.data.offsetY)),w.tx+=(P.x-w.tx)*e,w.ty+=(P.y-w.ty)*e,m=!0}if(r>0){var R=Math.sqrt(w.a*w.a+w.b*w.b),V=Math.sqrt(f*f+o*o);R>1e-5&&(R=(R+(V-R+this.data.offsetScaleX)*r)/R),w.a*=R,w.b*=R,R=Math.sqrt(w.c*w.c+w.d*w.d),V=Math.sqrt(c*c+s*s),R>1e-5&&(R=(R+(V-R+this.data.offsetScaleY)*r)/R),w.c*=R,w.d*=R,m=!0}if(a>0){var E=w.c,A=w.d,k=Math.atan2(A,E),T=Math.atan2(s,c)-Math.atan2(o,f)-(k-Math.atan2(w.b,w.a));T>M.PI?T-=M.PI2:T<-M.PI&&(T+=M.PI2),T=k+(T+d)*a;var R=Math.sqrt(E*E+A*A);w.c=Math.cos(T)*R,w.d=Math.sin(T)*R,m=!0}m&&(g.appliedValid=!1)}},i.prototype.applyRelativeWorld=function(){for(var t=this.rotateMix,e=this.translateMix,r=this.scaleMix,a=this.shearMix,n=this.target,h=n.matrix,f=h.a,c=h.c,o=h.b,s=h.d,l=f*s-c*o>0?M.degRad:-M.degRad,u=this.data.offsetRotation*l,d=this.data.offsetShearY*l,v=this.bones,p=0,y=v.length;p<y;p++){var g=v[p],m=!1,w=g.matrix;if(t!=0){var x=w.a,E=w.c,S=w.b,A=w.d,T=Math.atan2(o,f)+u;T>M.PI?T-=M.PI2:T<-M.PI&&(T+=M.PI2),T*=t;var C=Math.cos(T),I=Math.sin(T);w.a=C*x-I*S,w.c=C*E-I*A,w.b=I*x+C*S,w.d=I*E+C*A,m=!0}if(e!=0){var P=this.temp;n.localToWorld(P.set(this.data.offsetX,this.data.offsetY)),w.tx+=P.x*e,w.ty+=P.y*e,m=!0}if(r>0){var R=(Math.sqrt(f*f+o*o)-1+this.data.offsetScaleX)*r+1;w.a*=R,w.b*=R,R=(Math.sqrt(c*c+s*s)-1+this.data.offsetScaleY)*r+1,w.c*=R,w.d*=R,m=!0}if(a>0){var T=Math.atan2(s,c)-Math.atan2(o,f);T>M.PI?T-=M.PI2:T<-M.PI&&(T+=M.PI2);var E=w.c,A=w.d;T=Math.atan2(A,E)+(T-M.PI/2+d)*a;var R=Math.sqrt(E*E+A*A);w.c=Math.cos(T)*R,w.d=Math.sin(T)*R,m=!0}m&&(g.appliedValid=!1)}},i.prototype.applyAbsoluteLocal=function(){var t=this.rotateMix,e=this.translateMix,r=this.scaleMix,a=this.shearMix,n=this.target;n.appliedValid||n.updateAppliedTransform();for(var h=this.bones,f=0,c=h.length;f<c;f++){var o=h[f];o.appliedValid||o.updateAppliedTransform();var s=o.arotation;if(t!=0){var l=n.arotation-s+this.data.offsetRotation;l-=(16384-(16384.499999999996-l/360|0))*360,s+=l*t}var u=o.ax,d=o.ay;e!=0&&(u+=(n.ax-u+this.data.offsetX)*e,d+=(n.ay-d+this.data.offsetY)*e);var v=o.ascaleX,p=o.ascaleY;r>0&&(v>1e-5&&(v=(v+(n.ascaleX-v+this.data.offsetScaleX)*r)/v),p>1e-5&&(p=(p+(n.ascaleY-p+this.data.offsetScaleY)*r)/p));var y=o.ashearY;if(a>0){var l=n.ashearY-y+this.data.offsetShearY;l-=(16384-(16384.499999999996-l/360|0))*360,o.shearY+=l*a}o.updateWorldTransformWith(u,d,s,v,p,o.ashearX,y)}},i.prototype.applyRelativeLocal=function(){var t=this.rotateMix,e=this.translateMix,r=this.scaleMix,a=this.shearMix,n=this.target;n.appliedValid||n.updateAppliedTransform();for(var h=this.bones,f=0,c=h.length;f<c;f++){var o=h[f];o.appliedValid||o.updateAppliedTransform();var s=o.arotation;t!=0&&(s+=(n.arotation+this.data.offsetRotation)*t);var l=o.ax,u=o.ay;e!=0&&(l+=(n.ax+this.data.offsetX)*e,u+=(n.ay+this.data.offsetY)*e);var d=o.ascaleX,v=o.ascaleY;r>0&&(d>1e-5&&(d*=(n.ascaleX-1+this.data.offsetScaleX)*r+1),v>1e-5&&(v*=(n.ascaleY-1+this.data.offsetScaleY)*r+1));var p=o.ashearY;a>0&&(p+=(n.ashearY+this.data.offsetShearY)*a),o.updateWorldTransformWith(l,u,s,d,v,o.ashearX,p)}},i.prototype.getOrder=function(){return this.data.order},i}(),Vn=function(){function i(t){if(this._updateCache=new Array,this.updateCacheReset=new Array,this.time=0,this.scaleX=1,this.scaleY=1,this.x=0,this.y=0,t==null)throw new Error("data cannot be null.");this.data=t,this.bones=new Array;for(var e=0;e<t.bones.length;e++){var r=t.bones[e],a=void 0;if(r.parent==null)a=new kr(r,this,null);else{var n=this.bones[r.parent.index];a=new kr(r,this,n),n.children.push(a)}this.bones.push(a)}this.slots=new Array,this.drawOrder=new Array;for(var e=0;e<t.slots.length;e++){var h=t.slots[e],a=this.bones[h.boneData.index],f=new ta(h,a);this.slots.push(f),this.drawOrder.push(f)}this.ikConstraints=new Array;for(var e=0;e<t.ikConstraints.length;e++){var c=t.ikConstraints[e];this.ikConstraints.push(new Rn(c,this))}this.transformConstraints=new Array;for(var e=0;e<t.transformConstraints.length;e++){var o=t.transformConstraints[e];this.transformConstraints.push(new Pn(o,this))}this.pathConstraints=new Array;for(var e=0;e<t.pathConstraints.length;e++){var s=t.pathConstraints[e];this.pathConstraints.push(new kn(s,this))}this.color=new G(1,1,1,1),this.updateCache()}return i.prototype.updateCache=function(){var t=this._updateCache;t.length=0,this.updateCacheReset.length=0;for(var e=this.bones,r=0,a=e.length;r<a;r++)e[r].sorted=!1;var n=this.ikConstraints,h=this.transformConstraints,f=this.pathConstraints,c=n.length,o=h.length,s=f.length,l=c+o+s;t:for(var r=0;r<l;r++){for(var u=0;u<c;u++){var d=n[u];if(d.data.order==r){this.sortIkConstraint(d);continue t}}for(var u=0;u<o;u++){var d=h[u];if(d.data.order==r){this.sortTransformConstraint(d);continue t}}for(var u=0;u<s;u++){var d=f[u];if(d.data.order==r){this.sortPathConstraint(d);continue t}}}for(var r=0,a=e.length;r<a;r++)this.sortBone(e[r])},i.prototype.sortIkConstraint=function(t){var e=t.target;this.sortBone(e);var r=t.bones,a=r[0];if(this.sortBone(a),r.length>1){var n=r[r.length-1];this._updateCache.indexOf(n)>-1||this.updateCacheReset.push(n)}this._updateCache.push(t),this.sortReset(a.children),r[r.length-1].sorted=!0},i.prototype.sortPathConstraint=function(t){var e=t.target,r=e.data.index,a=e.bone;this.skin!=null&&this.sortPathConstraintAttachment(this.skin,r,a),this.data.defaultSkin!=null&&this.data.defaultSkin!=this.skin&&this.sortPathConstraintAttachment(this.data.defaultSkin,r,a);for(var n=0,h=this.data.skins.length;n<h;n++)this.sortPathConstraintAttachment(this.data.skins[n],r,a);var f=e.getAttachment();f instanceof qe&&this.sortPathConstraintAttachmentWith(f,a);for(var c=t.bones,o=c.length,n=0;n<o;n++)this.sortBone(c[n]);this._updateCache.push(t);for(var n=0;n<o;n++)this.sortReset(c[n].children);for(var n=0;n<o;n++)c[n].sorted=!0},i.prototype.sortTransformConstraint=function(t){this.sortBone(t.target);var e=t.bones,r=e.length;if(t.data.local)for(var a=0;a<r;a++){var n=e[a];this.sortBone(n.parent),this._updateCache.indexOf(n)>-1||this.updateCacheReset.push(n)}else for(var a=0;a<r;a++)this.sortBone(e[a]);this._updateCache.push(t);for(var h=0;h<r;h++)this.sortReset(e[h].children);for(var h=0;h<r;h++)e[h].sorted=!0},i.prototype.sortPathConstraintAttachment=function(t,e,r){var a=t.attachments[e];if(a)for(var n in a)this.sortPathConstraintAttachmentWith(a[n],r)},i.prototype.sortPathConstraintAttachmentWith=function(t,e){if(t instanceof qe){var r=t.bones;if(r==null)this.sortBone(e);else for(var a=this.bones,n=0;n<r.length;)for(var h=r[n++],f=n+h;n<f;n++){var c=r[n];this.sortBone(a[c])}}},i.prototype.sortBone=function(t){if(!t.sorted){var e=t.parent;e!=null&&this.sortBone(e),t.sorted=!0,this._updateCache.push(t)}},i.prototype.sortReset=function(t){for(var e=0,r=t.length;e<r;e++){var a=t[e];a.sorted&&this.sortReset(a.children),a.sorted=!1}},i.prototype.updateWorldTransform=function(){for(var t=this.updateCacheReset,e=0,r=t.length;e<r;e++){var a=t[e];a.ax=a.x,a.ay=a.y,a.arotation=a.rotation,a.ascaleX=a.scaleX,a.ascaleY=a.scaleY,a.ashearX=a.shearX,a.ashearY=a.shearY,a.appliedValid=!0}for(var n=this._updateCache,e=0,r=n.length;e<r;e++)n[e].update()},i.prototype.setToSetupPose=function(){this.setBonesToSetupPose(),this.setSlotsToSetupPose()},i.prototype.setBonesToSetupPose=function(){for(var t=this.bones,e=0,r=t.length;e<r;e++)t[e].setToSetupPose();for(var a=this.ikConstraints,e=0,r=a.length;e<r;e++){var n=a[e];n.bendDirection=n.data.bendDirection,n.mix=n.data.mix}for(var h=this.transformConstraints,e=0,r=h.length;e<r;e++){var n=h[e],f=n.data;n.rotateMix=f.rotateMix,n.translateMix=f.translateMix,n.scaleMix=f.scaleMix,n.shearMix=f.shearMix}for(var c=this.pathConstraints,e=0,r=c.length;e<r;e++){var n=c[e],f=n.data;n.position=f.position,n.spacing=f.spacing,n.rotateMix=f.rotateMix,n.translateMix=f.translateMix}},i.prototype.setSlotsToSetupPose=function(){var t=this.slots;Y.arrayCopy(t,0,this.drawOrder,0,t.length);for(var e=0,r=t.length;e<r;e++)t[e].setToSetupPose()},i.prototype.getRootBone=function(){return this.bones.length==0?null:this.bones[0]},i.prototype.findBone=function(t){if(t==null)throw new Error("boneName cannot be null.");for(var e=this.bones,r=0,a=e.length;r<a;r++){var n=e[r];if(n.data.name==t)return n}return null},i.prototype.findBoneIndex=function(t){if(t==null)throw new Error("boneName cannot be null.");for(var e=this.bones,r=0,a=e.length;r<a;r++)if(e[r].data.name==t)return r;return-1},i.prototype.findSlot=function(t){if(t==null)throw new Error("slotName cannot be null.");for(var e=this.slots,r=0,a=e.length;r<a;r++){var n=e[r];if(n.data.name==t)return n}return null},i.prototype.findSlotIndex=function(t){if(t==null)throw new Error("slotName cannot be null.");for(var e=this.slots,r=0,a=e.length;r<a;r++)if(e[r].data.name==t)return r;return-1},i.prototype.setSkinByName=function(t){var e=this.data.findSkin(t);if(e==null)throw new Error("Skin not found: "+t);this.setSkin(e)},i.prototype.setSkin=function(t){if(t!=null)if(this.skin!=null)t.attachAll(this,this.skin);else for(var e=this.slots,r=0,a=e.length;r<a;r++){var n=e[r],h=n.data.attachmentName;if(h!=null){var f=t.getAttachment(r,h);f!=null&&n.setAttachment(f)}}this.skin=t},i.prototype.getAttachmentByName=function(t,e){return this.getAttachment(this.data.findSlotIndex(t),e)},i.prototype.getAttachment=function(t,e){if(e==null)throw new Error("attachmentName cannot be null.");if(this.skin!=null){var r=this.skin.getAttachment(t,e);if(r!=null)return r}return this.data.defaultSkin!=null?this.data.defaultSkin.getAttachment(t,e):null},i.prototype.setAttachment=function(t,e){if(t==null)throw new Error("slotName cannot be null.");for(var r=this.slots,a=0,n=r.length;a<n;a++){var h=r[a];if(h.data.name==t){var f=null;if(e!=null&&(f=this.getAttachment(a,e),f==null))throw new Error("Attachment not found: "+e+", for slot: "+t);h.setAttachment(f);return}}throw new Error("Slot not found: "+t)},i.prototype.findIkConstraint=function(t){if(t==null)throw new Error("constraintName cannot be null.");for(var e=this.ikConstraints,r=0,a=e.length;r<a;r++){var n=e[r];if(n.data.name==t)return n}return null},i.prototype.findTransformConstraint=function(t){if(t==null)throw new Error("constraintName cannot be null.");for(var e=this.transformConstraints,r=0,a=e.length;r<a;r++){var n=e[r];if(n.data.name==t)return n}return null},i.prototype.findPathConstraint=function(t){if(t==null)throw new Error("constraintName cannot be null.");for(var e=this.pathConstraints,r=0,a=e.length;r<a;r++){var n=e[r];if(n.data.name==t)return n}return null},i.prototype.getBounds=function(t,e,r){if(t==null)throw new Error("offset cannot be null.");if(e==null)throw new Error("size cannot be null.");for(var a=this.drawOrder,n=Number.POSITIVE_INFINITY,h=Number.POSITIVE_INFINITY,f=Number.NEGATIVE_INFINITY,c=Number.NEGATIVE_INFINITY,o=0,s=a.length;o<s;o++){var l=a[o],u=0,d=null,v=l.getAttachment();if(v instanceof ea)u=8,d=Y.setArraySize(r,u,0),v.computeWorldVertices(l.bone,d,0,2);else if(v instanceof Qr){var p=v;u=p.worldVerticesLength,d=Y.setArraySize(r,u,0),p.computeWorldVertices(l,0,u,d,0,2)}if(d!=null)for(var y=0,g=d.length;y<g;y+=2){var m=d[y],w=d[y+1];n=Math.min(n,m),h=Math.min(h,w),f=Math.max(f,m),c=Math.max(c,w)}}t.set(n,h),e.set(f-n,c-h)},i.prototype.update=function(t){this.time+=t},Object.defineProperty(i.prototype,"flipX",{get:function(){return this.scaleX==-1},set:function(t){i.deprecatedWarning1||(i.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: `Skeleton.flipX/flipY` was deprecated, please use scaleX/scaleY")),this.scaleX=t?1:-1},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"flipY",{get:function(){return this.scaleY==-1},set:function(t){i.deprecatedWarning1||(i.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: `Skeleton.flipX/flipY` was deprecated, please use scaleX/scaleY")),this.scaleY=t?1:-1},enumerable:!1,configurable:!0}),i.deprecatedWarning1=!1,i}(),Fi=function(i){Et(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}return t}(ar),Fn=function(){function i(){this.bones=new Array,this.slots=new Array,this.skins=new Array,this.events=new Array,this.animations=new Array,this.ikConstraints=new Array,this.transformConstraints=new Array,this.pathConstraints=new Array,this.fps=0}return i.prototype.findBone=function(t){if(t==null)throw new Error("boneName cannot be null.");for(var e=this.bones,r=0,a=e.length;r<a;r++){var n=e[r];if(n.name==t)return n}return null},i.prototype.findBoneIndex=function(t){if(t==null)throw new Error("boneName cannot be null.");for(var e=this.bones,r=0,a=e.length;r<a;r++)if(e[r].name==t)return r;return-1},i.prototype.findSlot=function(t){if(t==null)throw new Error("slotName cannot be null.");for(var e=this.slots,r=0,a=e.length;r<a;r++){var n=e[r];if(n.name==t)return n}return null},i.prototype.findSlotIndex=function(t){if(t==null)throw new Error("slotName cannot be null.");for(var e=this.slots,r=0,a=e.length;r<a;r++)if(e[r].name==t)return r;return-1},i.prototype.findSkin=function(t){if(t==null)throw new Error("skinName cannot be null.");for(var e=this.skins,r=0,a=e.length;r<a;r++){var n=e[r];if(n.name==t)return n}return null},i.prototype.findEvent=function(t){if(t==null)throw new Error("eventDataName cannot be null.");for(var e=this.events,r=0,a=e.length;r<a;r++){var n=e[r];if(n.name==t)return n}return null},i.prototype.findAnimation=function(t){if(t==null)throw new Error("animationName cannot be null.");for(var e=this.animations,r=0,a=e.length;r<a;r++){var n=e[r];if(n.name==t)return n}return null},i.prototype.findIkConstraint=function(t){if(t==null)throw new Error("constraintName cannot be null.");for(var e=this.ikConstraints,r=0,a=e.length;r<a;r++){var n=e[r];if(n.name==t)return n}return null},i.prototype.findTransformConstraint=function(t){if(t==null)throw new Error("constraintName cannot be null.");for(var e=this.transformConstraints,r=0,a=e.length;r<a;r++){var n=e[r];if(n.name==t)return n}return null},i.prototype.findPathConstraint=function(t){if(t==null)throw new Error("constraintName cannot be null.");for(var e=this.pathConstraints,r=0,a=e.length;r<a;r++){var n=e[r];if(n.name==t)return n}return null},i.prototype.findPathConstraintIndex=function(t){if(t==null)throw new Error("pathConstraintName cannot be null.");for(var e=this.pathConstraints,r=0,a=e.length;r<a;r++)if(e[r].name==t)return r;return-1},i}(),Yn=function(){function i(t,e,r){if(this.color=new G(1,1,1,1),t<0)throw new Error("index must be >= 0.");if(e==null)throw new Error("name cannot be null.");if(r==null)throw new Error("boneData cannot be null.");this.index=t,this.name=e,this.boneData=r}return i}(),Bn=function(){function i(t){if(this.order=0,this.bones=new Array,this.rotateMix=0,this.translateMix=0,this.scaleMix=0,this.shearMix=0,this.offsetRotation=0,this.offsetX=0,this.offsetY=0,this.offsetScaleX=0,this.offsetScaleY=0,this.offsetShearY=0,this.relative=!1,this.local=!1,t==null)throw new Error("name cannot be null.");this.name=t}return i}(),Xn=function(){function i(t){if(this.attachments=new Array,t==null)throw new Error("name cannot be null.");this.name=t}return i.prototype.addAttachment=function(t,e,r){if(r==null)throw new Error("attachment cannot be null.");var a=this.attachments;t>=a.length&&(a.length=t+1),a[t]||(a[t]={}),a[t][e]=r},i.prototype.getAttachment=function(t,e){var r=this.attachments[t];return r?r[e]:null},i.prototype.attachAll=function(t,e){for(var r=0,a=0;a<t.slots.length;a++){var n=t.slots[a],h=n.getAttachment();if(h&&r<e.attachments.length){var f=e.attachments[r];for(var c in f){var o=f[c];if(h==o){var s=this.getAttachment(r,c);s!=null&&n.setAttachment(s);break}}}r++}},i}(),Nn=function(){function i(t){this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=t}return i.prototype.readSkeletonData=function(t){var e=this.scale,r=new Fn,a=typeof t=="string"?JSON.parse(t):t,n=a.skeleton;if(n!=null&&(r.hash=n.hash,r.version=n.spine,r.width=n.width,r.height=n.height,r.fps=n.fps,r.imagesPath=n.images),a.bones)for(var h=0;h<a.bones.length;h++){var f=a.bones[h],c=null,o=this.getValue(f,"parent",null);if(o!=null&&(c=r.findBone(o),c==null))throw new Error("Parent bone not found: "+o);var s=new bn(r.bones.length,f.name,c);s.length=this.getValue(f,"length",0)*e,s.x=this.getValue(f,"x",0)*e,s.y=this.getValue(f,"y",0)*e,s.rotation=this.getValue(f,"rotation",0),s.scaleX=this.getValue(f,"scaleX",1),s.scaleY=this.getValue(f,"scaleY",1),s.shearX=this.getValue(f,"shearX",0),s.shearY=this.getValue(f,"shearY",0),s.transformMode=i.transformModeFromString(this.getValue(f,"transform","normal")),r.bones.push(s)}if(a.slots)for(var h=0;h<a.slots.length;h++){var l=a.slots[h],u=l.name,d=l.bone,v=r.findBone(d);if(v==null)throw new Error("Slot bone not found: "+d);var s=new Yn(r.slots.length,u,v),p=this.getValue(l,"color",null);p!=null&&s.color.setFromString(p);var y=this.getValue(l,"dark",null);y!=null&&(s.darkColor=new G(1,1,1,1),s.darkColor.setFromString(y)),s.attachmentName=this.getValue(l,"attachment",null),s.blendMode=i.blendModeFromString(this.getValue(l,"blend","normal")),r.slots.push(s)}if(a.ik)for(var h=0;h<a.ik.length;h++){var g=a.ik[h],s=new Mn(g.name);s.order=this.getValue(g,"order",0);for(var m=0;m<g.bones.length;m++){var d=g.bones[m],w=r.findBone(d);if(w==null)throw new Error("IK bone not found: "+d);s.bones.push(w)}var x=g.target;if(s.target=r.findBone(x),s.target==null)throw new Error("IK target bone not found: "+x);s.bendDirection=this.getValue(g,"bendPositive",!0)?1:-1,s.mix=this.getValue(g,"mix",1),r.ikConstraints.push(s)}if(a.transform)for(var h=0;h<a.transform.length;h++){var g=a.transform[h],s=new Bn(g.name);s.order=this.getValue(g,"order",0);for(var m=0;m<g.bones.length;m++){var d=g.bones[m],w=r.findBone(d);if(w==null)throw new Error("Transform constraint bone not found: "+d);s.bones.push(w)}var x=g.target;if(s.target=r.findBone(x),s.target==null)throw new Error("Transform constraint target bone not found: "+x);s.local=this.getValue(g,"local",!1),s.relative=this.getValue(g,"relative",!1),s.offsetRotation=this.getValue(g,"rotation",0),s.offsetX=this.getValue(g,"x",0)*e,s.offsetY=this.getValue(g,"y",0)*e,s.offsetScaleX=this.getValue(g,"scaleX",0),s.offsetScaleY=this.getValue(g,"scaleY",0),s.offsetShearY=this.getValue(g,"shearY",0),s.rotateMix=this.getValue(g,"rotateMix",1),s.translateMix=this.getValue(g,"translateMix",1),s.scaleMix=this.getValue(g,"scaleMix",1),s.shearMix=this.getValue(g,"shearMix",1),r.transformConstraints.push(s)}if(a.path)for(var h=0;h<a.path.length;h++){var g=a.path[h],s=new In(g.name);s.order=this.getValue(g,"order",0);for(var m=0;m<g.bones.length;m++){var d=g.bones[m],w=r.findBone(d);if(w==null)throw new Error("Transform constraint bone not found: "+d);s.bones.push(w)}var x=g.target;if(s.target=r.findSlot(x),s.target==null)throw new Error("Path target slot not found: "+x);s.positionMode=i.positionModeFromString(this.getValue(g,"positionMode","percent")),s.spacingMode=i.spacingModeFromString(this.getValue(g,"spacingMode","length")),s.rotateMode=i.rotateModeFromString(this.getValue(g,"rotateMode","tangent")),s.offsetRotation=this.getValue(g,"rotation",0),s.position=this.getValue(g,"position",0),s.positionMode==vt.Fixed&&(s.position*=e),s.spacing=this.getValue(g,"spacing",0),(s.spacingMode==jt.Length||s.spacingMode==jt.Fixed)&&(s.spacing*=e),s.rotateMix=this.getValue(g,"rotateMix",1),s.translateMix=this.getValue(g,"translateMix",1),r.pathConstraints.push(s)}if(a.skins)for(var E in a.skins){var S=a.skins[E],A=new Xn(E);for(var u in S){var T=r.findSlotIndex(u);if(T==-1)throw new Error("Slot not found: "+u);var l=S[u];for(var C in l){var I=this.readAttachment(l[C],A,T,C,r);I!=null&&A.addAttachment(T,C,I)}}r.skins.push(A),A.name=="default"&&(r.defaultSkin=A)}for(var h=0,P=this.linkedMeshes.length;h<P;h++){var R=this.linkedMeshes[h],A=R.skin==null?r.defaultSkin:r.findSkin(R.skin);if(A==null)throw new Error("Skin not found: "+R.skin);var V=A.getAttachment(R.slotIndex,R.parent);if(V==null)throw new Error("Parent mesh not found: "+R.parent);R.mesh.setParentMesh(V)}if(this.linkedMeshes.length=0,a.events)for(var k in a.events){var B=a.events[k],s=new Cn(k);s.intValue=this.getValue(B,"int",0),s.floatValue=this.getValue(B,"float",0),s.stringValue=this.getValue(B,"string",""),s.audioPath=this.getValue(B,"audio",null),s.audioPath!=null&&(s.volume=this.getValue(B,"volume",1),s.balance=this.getValue(B,"balance",0)),r.events.push(s)}if(a.animations)for(var D in a.animations){var L=a.animations[D];this.readAnimation(L,D,r)}return r},i.prototype.readAttachment=function(t,e,r,a,n){var h=this.scale;a=this.getValue(t,"name",a);var f=this.getValue(t,"type","region");switch(f){case"region":{var c=this.getValue(t,"path",a),o=this.attachmentLoader.newRegionAttachment(e,a,c);if(o==null)return null;o.path=c,o.x=this.getValue(t,"x",0)*h,o.y=this.getValue(t,"y",0)*h,o.scaleX=this.getValue(t,"scaleX",1),o.scaleY=this.getValue(t,"scaleY",1),o.rotation=this.getValue(t,"rotation",0),o.width=t.width*h,o.height=t.height*h;var s=this.getValue(t,"color",null);return s!=null&&o.color.setFromString(s),o}case"boundingbox":{var l=this.attachmentLoader.newBoundingBoxAttachment(e,a);if(l==null)return null;this.readVertices(t,l,t.vertexCount<<1);var s=this.getValue(t,"color",null);return s!=null&&l.color.setFromString(s),l}case"mesh":case"linkedmesh":{var c=this.getValue(t,"path",a),u=this.attachmentLoader.newMeshAttachment(e,a,c);if(u==null)return null;u.path=c;var s=this.getValue(t,"color",null);s!=null&&u.color.setFromString(s);var d=this.getValue(t,"parent",null);if(d!=null)return u.inheritDeform=this.getValue(t,"deform",!0),this.linkedMeshes.push(new Yi(u,this.getValue(t,"skin",null),r,d)),u;var v=t.uvs;return this.readVertices(t,u,v.length),u.triangles=t.triangles,u.regionUVs=new Float32Array(v),u.hullLength=this.getValue(t,"hull",0)*2,u}case"path":{var c=this.attachmentLoader.newPathAttachment(e,a);if(c==null)return null;c.closed=this.getValue(t,"closed",!1),c.constantSpeed=this.getValue(t,"constantSpeed",!0);var p=t.vertexCount;this.readVertices(t,c,p<<1);for(var y=Y.newArray(p/3,0),g=0;g<t.lengths.length;g++)y[g]=t.lengths[g]*h;c.lengths=y;var s=this.getValue(t,"color",null);return s!=null&&c.color.setFromString(s),c}case"point":{var m=this.attachmentLoader.newPointAttachment(e,a);if(m==null)return null;m.x=this.getValue(t,"x",0)*h,m.y=this.getValue(t,"y",0)*h,m.rotation=this.getValue(t,"rotation",0);var s=this.getValue(t,"color",null);return s!=null&&m.color.setFromString(s),m}case"clipping":{var w=this.attachmentLoader.newClippingAttachment(e,a);if(w==null)return null;var x=this.getValue(t,"end",null);if(x!=null){var E=n.findSlot(x);if(E==null)throw new Error("Clipping end slot not found: "+x);w.endSlot=E}var p=t.vertexCount;this.readVertices(t,w,p<<1);var s=this.getValue(t,"color",null);return s!=null&&w.color.setFromString(s),w}}return null},i.prototype.readVertices=function(t,e,r){var a=this.scale;e.worldVerticesLength=r;var n=t.vertices;if(r==n.length){var h=Y.toFloatArray(n);if(a!=1)for(var f=0,c=n.length;f<c;f++)h[f]*=a;e.vertices=h;return}for(var o=new Array,s=new Array,f=0,c=n.length;f<c;){var l=n[f++];s.push(l);for(var u=f+l*4;f<u;f+=4)s.push(n[f]),o.push(n[f+1]*a),o.push(n[f+2]*a),o.push(n[f+3])}e.bones=s,e.vertices=Y.toFloatArray(o)},i.prototype.readAnimation=function(t,e,r){var a=this.scale,n=new Array,h=0;if(t.slots)for(var f in t.slots){var c=t.slots[f],o=r.findSlotIndex(f);if(o==-1)throw new Error("Slot not found: "+f);for(var s in c){var l=c[s];if(s=="attachment"){var u=new Je(l.length);u.slotIndex=o;for(var d=0,v=0;v<l.length;v++){var p=l[v];u.setFrame(d++,p.time,p.name)}n.push(u),h=Math.max(h,u.frames[u.getFrameCount()-1])}else if(s=="color"){var u=new Tr(l.length);u.slotIndex=o;for(var d=0,v=0;v<l.length;v++){var p=l[v],y=new G;y.setFromString(p.color||"ffffffff"),u.setFrame(d,p.time,y.r,y.g,y.b,y.a),this.readCurve(p,u,d),d++}n.push(u),h=Math.max(h,u.frames[(u.getFrameCount()-1)*Tr.ENTRIES])}else if(s=="twoColor"){var u=new Cr(l.length);u.slotIndex=o;for(var d=0,v=0;v<l.length;v++){var p=l[v],g=new G,m=new G;g.setFromString(p.light),m.setFromString(p.dark),u.setFrame(d,p.time,g.r,g.g,g.b,g.a,m.r,m.g,m.b),this.readCurve(p,u,d),d++}n.push(u),h=Math.max(h,u.frames[(u.getFrameCount()-1)*Cr.ENTRIES])}else throw new Error("Invalid timeline type for a slot: "+s+" ("+f+")")}}if(t.bones)for(var w in t.bones){var x=t.bones[w],E=r.findBoneIndex(w);if(E==-1)throw new Error("Bone not found: "+w);for(var s in x){var l=x[s];if(s==="rotate"){var u=new Jt(l.length);u.boneIndex=E;for(var d=0,v=0;v<l.length;v++){var p=l[v];u.setFrame(d,p.time,p.angle),this.readCurve(p,u,d),d++}n.push(u),h=Math.max(h,u.frames[(u.getFrameCount()-1)*Jt.ENTRIES])}else if(s==="translate"||s==="scale"||s==="shear"){var u=null,S=1;s==="scale"?u=new dn(l.length):s==="shear"?u=new pn(l.length):(u=new Ue(l.length),S=a),u.boneIndex=E;for(var d=0,v=0;v<l.length;v++){var p=l[v],A=this.getValue(p,"x",0),T=this.getValue(p,"y",0);u.setFrame(d,p.time,A*S,T*S),this.readCurve(p,u,d),d++}n.push(u),h=Math.max(h,u.frames[(u.getFrameCount()-1)*Ue.ENTRIES])}else throw new Error("Invalid timeline type for a bone: "+s+" ("+w+")")}}if(t.ik)for(var C in t.ik){var I=t.ik[C],P=r.findIkConstraint(C),u=new Rr(I.length);u.ikConstraintIndex=r.ikConstraints.indexOf(P);for(var d=0,v=0;v<I.length;v++){var p=I[v];u.setFrame(d,p.time,this.getValue(p,"mix",1),this.getValue(p,"bendPositive",!0)?1:-1,this.getValue(p,"compress",!1),this.getValue(p,"stretch",!1)),this.readCurve(p,u,d),d++}n.push(u),h=Math.max(h,u.frames[(u.getFrameCount()-1)*Rr.ENTRIES])}if(t.transform)for(var C in t.transform){var I=t.transform[C],P=r.findTransformConstraint(C),u=new Mr(I.length);u.transformConstraintIndex=r.transformConstraints.indexOf(P);for(var d=0,v=0;v<I.length;v++){var p=I[v];u.setFrame(d,p.time,this.getValue(p,"rotateMix",1),this.getValue(p,"translateMix",1),this.getValue(p,"scaleMix",1),this.getValue(p,"shearMix",1)),this.readCurve(p,u,d),d++}n.push(u),h=Math.max(h,u.frames[(u.getFrameCount()-1)*Mr.ENTRIES])}if(t.paths)for(var C in t.paths){var I=t.paths[C],R=r.findPathConstraintIndex(C);if(R==-1)throw new Error("Path constraint not found: "+C);var V=r.pathConstraints[R];for(var s in I){var l=I[s];if(s==="position"||s==="spacing"){var u=null,S=1;s==="spacing"?(u=new yn(l.length),(V.spacingMode==jt.Length||V.spacingMode==jt.Fixed)&&(S=a)):(u=new Qe(l.length),V.positionMode==vt.Fixed&&(S=a)),u.pathConstraintIndex=R;for(var d=0,v=0;v<l.length;v++){var p=l[v];u.setFrame(d,p.time,this.getValue(p,s,0)*S),this.readCurve(p,u,d),d++}n.push(u),h=Math.max(h,u.frames[(u.getFrameCount()-1)*Qe.ENTRIES])}else if(s==="mix"){var u=new Ir(l.length);u.pathConstraintIndex=R;for(var d=0,v=0;v<l.length;v++){var p=l[v];u.setFrame(d,p.time,this.getValue(p,"rotateMix",1),this.getValue(p,"translateMix",1)),this.readCurve(p,u,d),d++}n.push(u),h=Math.max(h,u.frames[(u.getFrameCount()-1)*Ir.ENTRIES])}}}if(t.deform)for(var k in t.deform){var B=t.deform[k],D=r.findSkin(k);if(D==null){if(Ht.FAIL_ON_NON_EXISTING_SKIN)throw new Error("Skin not found: "+k);continue}for(var f in B){var c=B[f],o=r.findSlotIndex(f);if(o==-1)throw new Error("Slot not found: "+c.name);for(var s in c){var l=c[s],L=D.getAttachment(o,s);if(L==null)throw new Error("Deform attachment not found: "+l.name);var H=L.bones!=null,_=L.vertices,O=H?_.length/3*2:_.length,u=new gn(l.length);u.slotIndex=o,u.attachment=L;for(var d=0,U=0;U<l.length;U++){var p=l[U],W=void 0,N=this.getValue(p,"vertices",null);if(N==null)W=H?Y.newFloatArray(O):_;else{W=Y.newFloatArray(O);var F=this.getValue(p,"offset",0);if(Y.arrayCopy(N,0,W,F,N.length),a!=1)for(var v=F,q=v+N.length;v<q;v++)W[v]*=a;if(!H)for(var v=0;v<O;v++)W[v]+=_[v]}u.setFrame(d,p.time,W),this.readCurve(p,u,d),d++}n.push(u),h=Math.max(h,u.frames[u.getFrameCount()-1])}}}var $=t.drawOrder;if($==null&&($=t.draworder),$!=null){for(var u=new Ke($.length),z=r.slots.length,d=0,U=0;U<$.length;U++){var j=$[U],J=null,K=this.getValue(j,"offsets",null);if(K!=null){J=Y.newArray(z,-1);for(var Z=Y.newArray(z-K.length,0),tt=0,ht=0,v=0;v<K.length;v++){var it=K[v],o=r.findSlotIndex(it.slot);if(o==-1)throw new Error("Slot not found: "+it.slot);for(;tt!=o;)Z[ht++]=tt++;J[tt+it.offset]=tt++}for(;tt<z;)Z[ht++]=tt++;for(var v=z-1;v>=0;v--)J[v]==-1&&(J[v]=Z[--ht])}u.setFrame(d++,j.time,J)}n.push(u),h=Math.max(h,u.frames[u.getFrameCount()-1])}if(t.events){for(var u=new mn(t.events.length),d=0,v=0;v<t.events.length;v++){var ut=t.events[v],ot=r.findEvent(ut.name);if(ot==null)throw new Error("Event not found: "+ut.name);var ft=new Tn(Y.toSinglePrecision(ut.time),ot);ft.intValue=this.getValue(ut,"int",ot.intValue),ft.floatValue=this.getValue(ut,"float",ot.floatValue),ft.stringValue=this.getValue(ut,"string",ot.stringValue),ft.data.audioPath!=null&&(ft.volume=this.getValue(ut,"volume",1),ft.balance=this.getValue(ut,"balance",0)),u.setFrame(d++,ft)}n.push(u),h=Math.max(h,u.frames[u.getFrameCount()-1])}if(isNaN(h))throw new Error("Error while parsing animation, duration is NaN");r.animations.push(new Rt(e,n,h))},i.prototype.readCurve=function(t,e,r){if(t.curve){if(t.curve==="stepped")e.setStepped(r);else if(Object.prototype.toString.call(t.curve)==="[object Array]"){var a=t.curve;e.setCurve(r,a[0],a[1],a[2],a[3])}}},i.prototype.getValue=function(t,e,r){return t[e]!==void 0?t[e]:r},i.blendModeFromString=function(t){if(t=t.toLowerCase(),t=="normal")return wt.NORMAL;if(t=="additive")return wt.ADD;if(t=="multiply")return wt.MULTIPLY;if(t=="screen")return wt.SCREEN;throw new Error("Unknown blend mode: "+t)},i.positionModeFromString=function(t){if(t=t.toLowerCase(),t=="fixed")return vt.Fixed;if(t=="percent")return vt.Percent;throw new Error("Unknown position mode: "+t)},i.spacingModeFromString=function(t){if(t=t.toLowerCase(),t=="length")return jt.Length;if(t=="fixed")return jt.Fixed;if(t=="percent")return jt.Percent;throw new Error("Unknown position mode: "+t)},i.rotateModeFromString=function(t){if(t=t.toLowerCase(),t=="tangent")return gt.Tangent;if(t=="chain")return gt.Chain;if(t=="chainscale")return gt.ChainScale;throw new Error("Unknown rotate mode: "+t)},i.transformModeFromString=function(t){if(t=t.toLowerCase(),t=="normal")return Q.Normal;if(t=="onlytranslation")return Q.OnlyTranslation;if(t=="norotationorreflection")return Q.NoRotationOrReflection;if(t=="noscale")return Q.NoScale;if(t=="noscaleorreflection")return Q.NoScaleOrReflection;throw new Error("Unknown transform mode: "+t)},i}(),Yi=function(){function i(t,e,r,a){this.mesh=t,this.skin=e,this.slotIndex=r,this.parent=a}return i}(),Bi=function(i){Et(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}return t.prototype.createSkeleton=function(e){this.skeleton=new Vn(e),this.skeleton.updateWorldTransform(),this.stateData=new Sn(e),this.state=new wn(this.stateData)},t}($e);const Xi=Object.freeze(Object.defineProperty({__proto__:null,Animation:Rt,AnimationState:wn,AnimationStateAdapter2:Vi,AnimationStateData:Sn,AtlasAttachmentLoader:An,Attachment:Kr,AttachmentTimeline:Je,Bone:kr,BoneData:bn,BoundingBoxAttachment:un,ClippingAttachment:cn,ColorTimeline:Tr,CurveTimeline:ne,DeformTimeline:gn,DrawOrderTimeline:Ke,Event:Tn,EventData:Cn,EventQueue:En,EventTimeline:mn,get EventType(){return Ot},IkConstraint:Rn,IkConstraintData:Mn,IkConstraintTimeline:Rr,JitterEffect:ki,MeshAttachment:Qr,PathAttachment:qe,PathConstraint:kn,PathConstraintData:In,PathConstraintMixTimeline:Ir,PathConstraintPositionTimeline:Qe,PathConstraintSpacingTimeline:yn,PointAttachment:vn,RegionAttachment:ea,RotateTimeline:Jt,ScaleTimeline:dn,ShearTimeline:pn,Skeleton:Vn,SkeletonBounds:Fi,SkeletonData:Fn,SkeletonJson:Nn,Skin:Xn,Slot:ta,SlotData:Yn,get SpacingMode(){return jt},Spine:Bi,SwirlEffect:Pi,get TimelineType(){return kt},TrackEntry:xn,TransformConstraint:Pn,TransformConstraintData:Bn,TransformConstraintTimeline:Mr,TranslateTimeline:Ue,TwoColorTimeline:Cr,VertexAttachment:Ee},Symbol.toStringTag,{value:"Module"}));/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Pr=function(i,t){return Pr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])},Pr(i,t)};function at(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Pr(i,t);function e(){this.constructor=i}i.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var ra=function(){function i(t){if(!t)throw new Error("name cannot be null.");this.name=t}return i}(),re=function(i){at(t,i);function t(e){var r=i.call(this,e)||this;return r.id=t.nextID++,r.bones=null,r.vertices=[],r.worldVerticesLength=0,r.timelineAttachment=r,r}return t.prototype.computeWorldVerticesOld=function(e,r){this.computeWorldVertices(e,0,this.worldVerticesLength,r,0,2)},t.prototype.computeWorldVertices=function(e,r,a,n,h,f){a=h+(a>>1)*f;var c=e.bone.skeleton,o=e.deform,s=this.vertices,l=this.bones;if(!l){o.length>0&&(s=o);for(var u=e.bone.matrix,d=u.tx,v=u.ty,p=u.a,y=u.c,g=u.b,m=u.d,w=r,x=h;x<a;w+=2,x+=f){var E=s[w],S=s[w+1];n[x]=E*p+S*y+d,n[x+1]=E*g+S*m+v}return}for(var A=0,T=0,C=0;C<r;C+=2){var I=l[A];A+=I+1,T+=I}var P=c.bones;if(o.length==0)for(var x=h,y=T*3;x<a;x+=f){var R=0,V=0,I=l[A++];for(I+=A;A<I;A++,y+=3){var u=P[l[A]].matrix,E=s[y],S=s[y+1],k=s[y+2];R+=(E*u.a+S*u.c+u.tx)*k,V+=(E*u.b+S*u.d+u.ty)*k}n[x]=R,n[x+1]=V}else for(var B=o,x=h,y=T*3,D=T<<1;x<a;x+=f){var R=0,V=0,I=l[A++];for(I+=A;A<I;A++,y+=3,D+=2){var u=P[l[A]].matrix,E=s[y]+B[D],S=s[y+1]+B[D+1],k=s[y+2];R+=(E*u.a+S*u.c+u.tx)*k,V+=(E*u.b+S*u.d+u.ty)*k}n[x]=R,n[x+1]=V}},t.prototype.copyTo=function(e){this.bones?(e.bones=new Array(this.bones.length),Y.arrayCopy(this.bones,0,e.bones,0,this.bones.length)):e.bones=null,this.vertices&&(e.vertices=Y.newFloatArray(this.vertices.length),Y.arrayCopy(this.vertices,0,e.vertices,0,this.vertices.length)),e.worldVerticesLength=this.worldVerticesLength,e.timelineAttachment=this.timelineAttachment},t.nextID=0,t}(ra),On=function(i){at(t,i);function t(e){var r=i.call(this,e)||this;return r.type=et.BoundingBox,r.color=new G(1,1,1,1),r}return t.prototype.copy=function(){var e=new t(this.name);return this.copyTo(e),e.color.setFromColor(this.color),e},t}(re),Dn=function(i){at(t,i);function t(e){var r=i.call(this,e)||this;return r.type=et.Clipping,r.endSlot=null,r.color=new G(.2275,.2275,.8078,1),r}return t.prototype.copy=function(){var e=new t(this.name);return this.copyTo(e),e.endSlot=this.endSlot,e.color.setFromColor(this.color),e},t}(re),or=function(i){at(t,i);function t(e,r){var a=i.call(this,e)||this;return a.type=et.Mesh,a.region=null,a.triangles=[],a.color=new G(1,1,1,1),a.width=0,a.height=0,a.hullLength=0,a.edges=[],a.parentMesh=null,a.sequence=null,a.tempColor=new G(0,0,0,0),a.path=r,a}return t.prototype.getParentMesh=function(){return this.parentMesh},t.prototype.setParentMesh=function(e){this.parentMesh=e,e&&(this.bones=e.bones,this.vertices=e.vertices,this.worldVerticesLength=e.worldVerticesLength,this.regionUVs=e.regionUVs,this.triangles=e.triangles,this.hullLength=e.hullLength,this.worldVerticesLength=e.worldVerticesLength)},t.prototype.copy=function(){if(this.parentMesh)return this.newLinkedMesh();var e=new t(this.name,this.path);return e.region=this.region,e.color.setFromColor(this.color),this.copyTo(e),e.regionUVs=new Float32Array(this.regionUVs.length),Y.arrayCopy(this.regionUVs,0,e.regionUVs,0,this.regionUVs.length),e.triangles=new Array(this.triangles.length),Y.arrayCopy(this.triangles,0,e.triangles,0,this.triangles.length),e.hullLength=this.hullLength,e.sequence=this.sequence!=null?this.sequence.copy():null,this.edges&&(e.edges=new Array(this.edges.length),Y.arrayCopy(this.edges,0,e.edges,0,this.edges.length)),e.width=this.width,e.height=this.height,e},t.prototype.computeWorldVertices=function(e,r,a,n,h,f){this.sequence!=null&&this.sequence.apply(e,this),i.prototype.computeWorldVertices.call(this,e,r,a,n,h,f)},t.prototype.newLinkedMesh=function(){var e=new t(this.name,this.path);return e.region=this.region,e.color.setFromColor(this.color),e.timelineAttachment=this.timelineAttachment,e.setParentMesh(this.parentMesh?this.parentMesh:this),e},t}(re),_e=function(i){at(t,i);function t(e){var r=i.call(this,e)||this;return r.type=et.Path,r.lengths=[],r.closed=!1,r.constantSpeed=!1,r.color=new G(1,1,1,1),r}return t.prototype.copy=function(){var e=new t(this.name);return this.copyTo(e),e.lengths=new Array(this.lengths.length),Y.arrayCopy(this.lengths,0,e.lengths,0,this.lengths.length),e.closed=closed,e.constantSpeed=this.constantSpeed,e.color.setFromColor(this.color),e},t}(re),Ln=function(i){at(t,i);function t(e){var r=i.call(this,e)||this;return r.type=et.Point,r.x=0,r.y=0,r.rotation=0,r.color=new G(.38,.94,0,1),r}return t.prototype.computeWorldPosition=function(e,r){var a=e.matrix;return r.x=this.x*a.a+this.y*a.c+e.worldX,r.y=this.x*a.b+this.y*a.d+e.worldY,r},t.prototype.computeWorldRotation=function(e){var r=e.matrix,a=M.cosDeg(this.rotation),n=M.sinDeg(this.rotation),h=a*r.a+n*r.c,f=a*r.b+n*r.d;return Math.atan2(f,h)*M.radDeg},t.prototype.copy=function(){var e=new t(this.name);return e.x=this.x,e.y=this.y,e.rotation=this.rotation,e.color.setFromColor(this.color),e},t}(re),aa=function(i){at(t,i);function t(e,r){var a=i.call(this,e)||this;return a.type=et.Region,a.x=0,a.y=0,a.scaleX=1,a.scaleY=1,a.rotation=0,a.width=0,a.height=0,a.color=new G(1,1,1,1),a.rendererObject=null,a.region=null,a.sequence=null,a.offset=Y.newFloatArray(8),a.uvs=Y.newFloatArray(8),a.tempColor=new G(1,1,1,1),a.path=r,a}return t.prototype.updateRegion=function(){if(!this.region)throw new Error("Region not set.");var e=this.region,r=this.width/this.region.originalWidth*this.scaleX,a=this.height/this.region.originalHeight*this.scaleY,n=-this.width/2*this.scaleX+this.region.offsetX*r,h=-this.height/2*this.scaleY+this.region.offsetY*a,f=n+this.region.width*r,c=h+this.region.height*a,o=this.rotation*Math.PI/180,s=Math.cos(o),l=Math.sin(o),u=this.x,d=this.y,v=n*s+u,p=n*l,y=h*s+d,g=h*l,m=f*s+u,w=f*l,x=c*s+d,E=c*l,S=this.offset;S[0]=v-g,S[1]=y+p,S[2]=v-E,S[3]=x+p,S[4]=m-E,S[5]=x+w,S[6]=m-g,S[7]=y+w;var A=this.uvs;e.degrees==90?(A[2]=e.u,A[3]=e.v2,A[4]=e.u,A[5]=e.v,A[6]=e.u2,A[7]=e.v,A[0]=e.u2,A[1]=e.v2):(A[0]=e.u,A[1]=e.v2,A[2]=e.u,A[3]=e.v,A[4]=e.u2,A[5]=e.v,A[6]=e.u2,A[7]=e.v2)},t.prototype.computeWorldVertices=function(e,r,a,n){this.sequence!=null&&this.sequence.apply(e,this);var h=e.bone,f=this.offset,c=h.matrix,o=c.tx,s=c.ty,l=c.a,u=c.c,d=c.b,v=c.d,p=0,y=0;p=f[0],y=f[1],r[a]=p*l+y*u+o,r[a+1]=p*d+y*v+s,a+=n,p=f[2],y=f[3],r[a]=p*l+y*u+o,r[a+1]=p*d+y*v+s,a+=n,p=f[4],y=f[5],r[a]=p*l+y*u+o,r[a+1]=p*d+y*v+s,a+=n,p=f[6],y=f[7],r[a]=p*l+y*u+o,r[a+1]=p*d+y*v+s},t.prototype.copy=function(){var e=new t(this.name,this.path);return e.region=this.region,e.rendererObject=this.rendererObject,e.x=this.x,e.y=this.y,e.scaleX=this.scaleX,e.scaleY=this.scaleY,e.rotation=this.rotation,e.width=this.width,e.height=this.height,Y.arrayCopy(this.uvs,0,e.uvs,0,8),Y.arrayCopy(this.offset,0,e.offset,0,8),e.color.setFromColor(this.color),e.sequence=this.sequence!=null?this.sequence.copy():null,e},t.X1=0,t.Y1=1,t.C1R=2,t.C1G=3,t.C1B=4,t.C1A=5,t.U1=6,t.V1=7,t.X2=8,t.Y2=9,t.C2R=10,t.C2G=11,t.C2B=12,t.C2A=13,t.U2=14,t.V2=15,t.X3=16,t.Y3=17,t.C3R=18,t.C3G=19,t.C3B=20,t.C3A=21,t.U3=22,t.V3=23,t.X4=24,t.Y4=25,t.C4R=26,t.C4G=27,t.C4B=28,t.C4A=29,t.U4=30,t.V4=31,t}(ra),na=function(){function i(t){this.id=i.nextID(),this.start=0,this.digits=0,this.setupIndex=0,this.regions=new Array(t)}return i.prototype.copy=function(){var t=new i(this.regions.length);return Y.arrayCopy(this.regions,0,t.regions,0,this.regions.length),t.start=this.start,t.digits=this.digits,t.setupIndex=this.setupIndex,t},i.prototype.apply=function(t,e){var r=t.sequenceIndex;r==-1&&(r=this.setupIndex),r>=this.regions.length&&(r=this.regions.length-1);var a=this.regions[r];e.region!=a&&(e.region=a)},i.prototype.getPath=function(t,e){for(var r=t,a=(this.start+e).toString(),n=this.digits-a.length;n>0;n--)r+="0";return r+=a,r},i.nextID=function(){return i._nextID++},i._nextID=0,i}(),Mt;(function(i){i[i.hold=0]="hold",i[i.once=1]="once",i[i.loop=2]="loop",i[i.pingpong=3]="pingpong",i[i.onceReverse=4]="onceReverse",i[i.loopReverse=5]="loopReverse",i[i.pingpongReverse=6]="pingpongReverse"})(Mt||(Mt={}));var ia=[Mt.hold,Mt.once,Mt.loop,Mt.pingpong,Mt.onceReverse,Mt.loopReverse,Mt.pingpongReverse],hr=function(){function i(t,e,r){if(this.timelines=[],this.timelineIds=new za,!t)throw new Error("name cannot be null.");this.name=t,this.setTimelines(e),this.duration=r}return i.prototype.setTimelines=function(t){if(!t)throw new Error("timelines cannot be null.");this.timelines=t,this.timelineIds.clear();for(var e=0;e<t.length;e++)this.timelineIds.addAll(t[e].getPropertyIds())},i.prototype.hasTimeline=function(t){for(var e=0;e<t.length;e++)if(this.timelineIds.contains(t[e]))return!0;return!1},i.prototype.apply=function(t,e,r,a,n,h,f,c){if(!t)throw new Error("skeleton cannot be null.");a&&this.duration!=0&&(r%=this.duration,e>0&&(e%=this.duration));for(var o=this.timelines,s=0,l=o.length;s<l;s++)o[s].apply(t,e,r,n,h,f,c)},i}(),lt={rotate:0,x:1,y:2,scaleX:3,scaleY:4,shearX:5,shearY:6,rgb:7,alpha:8,rgb2:9,attachment:10,deform:11,event:12,drawOrder:13,ikConstraint:14,transformConstraint:15,pathConstraintPosition:16,pathConstraintSpacing:17,pathConstraintMix:18,sequence:19},mt=function(){function i(t,e){this.propertyIds=e,this.frames=Y.newFloatArray(t*this.getFrameEntries())}return i.prototype.getPropertyIds=function(){return this.propertyIds},i.prototype.getFrameEntries=function(){return 1},i.prototype.getFrameCount=function(){return this.frames.length/this.getFrameEntries()},i.prototype.getDuration=function(){return this.frames[this.frames.length-this.getFrameEntries()]},i.search1=function(t,e){for(var r=t.length,a=1;a<r;a++)if(t[a]>e)return a-1;return r-1},i.search=function(t,e,r){for(var a=t.length,n=r;n<a;n+=r)if(t[n]>e)return n-r;return a-r},i}(),Qt=function(i){at(t,i);function t(e,r,a){var n=i.call(this,e,a)||this;return n.curves=Y.newFloatArray(e+r*18),n.curves[e-1]=1,n}return t.prototype.setLinear=function(e){this.curves[e]=0},t.prototype.setStepped=function(e){this.curves[e]=1},t.prototype.shrink=function(e){var r=this.getFrameCount()+e*18;if(this.curves.length>r){var a=Y.newFloatArray(r);Y.arrayCopy(this.curves,0,a,0,r),this.curves=a}},t.prototype.setBezier=function(e,r,a,n,h,f,c,o,s,l,u){var d=this.curves,v=this.getFrameCount()+e*18;a==0&&(d[r]=2+v);for(var p=(n-f*2+o)*.03,y=(h-c*2+s)*.03,g=((f-o)*3-n+l)*.006,m=((c-s)*3-h+u)*.006,w=p*2+g,x=y*2+m,E=(f-n)*.3+p+g*.16666667,S=(c-h)*.3+y+m*.16666667,A=n+E,T=h+S,C=v+18;v<C;v+=2)d[v]=A,d[v+1]=T,E+=w,S+=x,w+=g,x+=m,A+=E,T+=S},t.prototype.getBezierValue=function(e,r,a,n){var h=this.curves;if(h[n]>e){var f=this.frames[r],c=this.frames[r+a];return c+(e-f)/(h[n]-f)*(h[n+1]-c)}var o=n+18;for(n+=2;n<o;n+=2)if(h[n]>=e){var s=h[n-2],l=h[n-1];return l+(e-s)/(h[n]-s)*(h[n+1]-l)}r+=this.getFrameEntries();var u=h[o-2],d=h[o-1];return d+(e-u)/(this.frames[r]-u)*(this.frames[r+a]-d)},t}(mt),te=function(i){at(t,i);function t(e,r,a){return i.call(this,e,r,[a])||this}return t.prototype.getFrameEntries=function(){return 2},t.prototype.setFrame=function(e,r,a){e<<=1,this.frames[e]=r,this.frames[e+1]=a},t.prototype.getCurveValue=function(e){for(var r=this.frames,a=r.length-2,n=2;n<=a;n+=2)if(r[n]>e){a=n-2;break}var h=this.curves[a>>1];switch(h){case 0:var f=r[a],c=r[a+1];return c+(e-f)/(r[a+2]-f)*(r[a+2+1]-c);case 1:return r[a+1]}return this.getBezierValue(e,a,1,h-2)},t}(Qt),lr=function(i){at(t,i);function t(e,r,a,n){return i.call(this,e,r,[a,n])||this}return t.prototype.getFrameEntries=function(){return 3},t.prototype.setFrame=function(e,r,a,n){e*=3,this.frames[e]=r,this.frames[e+1]=a,this.frames[e+2]=n},t}(Qt),He=function(i){at(t,i);function t(e,r,a){var n=i.call(this,e,r,lt.rotate+"|"+a)||this;return n.boneIndex=0,n.boneIndex=a,n}return t.prototype.apply=function(e,r,a,n,h,f,c){var o=e.bones[this.boneIndex];if(o.active){var s=this.frames;if(a<s[0]){switch(f){case b.setup:o.rotation=o.data.rotation;return;case b.first:o.rotation+=(o.data.rotation-o.rotation)*h}return}var l=this.getCurveValue(a);switch(f){case b.setup:o.rotation=o.data.rotation+l*h;break;case b.first:case b.replace:l+=o.data.rotation-o.rotation;case b.add:o.rotation+=l*h}}},t}(te),sa=function(i){at(t,i);function t(e,r,a){var n=i.call(this,e,r,lt.x+"|"+a,lt.y+"|"+a)||this;return n.boneIndex=0,n.boneIndex=a,n}return t.prototype.apply=function(e,r,a,n,h,f,c){var o=e.bones[this.boneIndex];if(o.active){var s=this.frames;if(a<s[0]){switch(f){case b.setup:o.x=o.data.x,o.y=o.data.y;return;case b.first:o.x+=(o.data.x-o.x)*h,o.y+=(o.data.y-o.y)*h}return}var l=0,u=0,d=mt.search(s,a,3),v=this.curves[d/3];switch(v){case 0:var p=s[d];l=s[d+1],u=s[d+2];var y=(a-p)/(s[d+3]-p);l+=(s[d+3+1]-l)*y,u+=(s[d+3+2]-u)*y;break;case 1:l=s[d+1],u=s[d+2];break;default:l=this.getBezierValue(a,d,1,v-2),u=this.getBezierValue(a,d,2,v+18-2)}switch(f){case b.setup:o.x=o.data.x+l*h,o.y=o.data.y+u*h;break;case b.first:case b.replace:o.x+=(o.data.x+l-o.x)*h,o.y+=(o.data.y+u-o.y)*h;break;case b.add:o.x+=l*h,o.y+=u*h}}},t}(lr),oa=function(i){at(t,i);function t(e,r,a){var n=i.call(this,e,r,lt.x+"|"+a)||this;return n.boneIndex=0,n.boneIndex=a,n}return t.prototype.apply=function(e,r,a,n,h,f,c){var o=e.bones[this.boneIndex];if(o.active){var s=this.frames;if(a<s[0]){switch(f){case b.setup:o.x=o.data.x;return;case b.first:o.x+=(o.data.x-o.x)*h}return}var l=this.getCurveValue(a);switch(f){case b.setup:o.x=o.data.x+l*h;break;case b.first:case b.replace:o.x+=(o.data.x+l-o.x)*h;break;case b.add:o.x+=l*h}}},t}(te),ha=function(i){at(t,i);function t(e,r,a){var n=i.call(this,e,r,lt.y+"|"+a)||this;return n.boneIndex=0,n.boneIndex=a,n}return t.prototype.apply=function(e,r,a,n,h,f,c){var o=e.bones[this.boneIndex];if(o.active){var s=this.frames;if(a<s[0]){switch(f){case b.setup:o.y=o.data.y;return;case b.first:o.y+=(o.data.y-o.y)*h}return}var l=this.getCurveValue(a);switch(f){case b.setup:o.y=o.data.y+l*h;break;case b.first:case b.replace:o.y+=(o.data.y+l-o.y)*h;break;case b.add:o.y+=l*h}}},t}(te),la=function(i){at(t,i);function t(e,r,a){var n=i.call(this,e,r,lt.scaleX+"|"+a,lt.scaleY+"|"+a)||this;return n.boneIndex=0,n.boneIndex=a,n}return t.prototype.apply=function(e,r,a,n,h,f,c){var o=e.bones[this.boneIndex];if(o.active){var s=this.frames;if(a<s[0]){switch(f){case b.setup:o.scaleX=o.data.scaleX,o.scaleY=o.data.scaleY;return;case b.first:o.scaleX+=(o.data.scaleX-o.scaleX)*h,o.scaleY+=(o.data.scaleY-o.scaleY)*h}return}var l,u,d=mt.search(s,a,3),v=this.curves[d/3];switch(v){case 0:var p=s[d];l=s[d+1],u=s[d+2];var y=(a-p)/(s[d+3]-p);l+=(s[d+3+1]-l)*y,u+=(s[d+3+2]-u)*y;break;case 1:l=s[d+1],u=s[d+2];break;default:l=this.getBezierValue(a,d,1,v-2),u=this.getBezierValue(a,d,2,v+18-2)}if(l*=o.data.scaleX,u*=o.data.scaleY,h==1)f==b.add?(o.scaleX+=l-o.data.scaleX,o.scaleY+=u-o.data.scaleY):(o.scaleX=l,o.scaleY=u);else{var g=0,m=0;if(c==rt.mixOut)switch(f){case b.setup:g=o.data.scaleX,m=o.data.scaleY,o.scaleX=g+(Math.abs(l)*M.signum(g)-g)*h,o.scaleY=m+(Math.abs(u)*M.signum(m)-m)*h;break;case b.first:case b.replace:g=o.scaleX,m=o.scaleY,o.scaleX=g+(Math.abs(l)*M.signum(g)-g)*h,o.scaleY=m+(Math.abs(u)*M.signum(m)-m)*h;break;case b.add:o.scaleX+=(l-o.data.scaleX)*h,o.scaleY+=(u-o.data.scaleY)*h}else switch(f){case b.setup:g=Math.abs(o.data.scaleX)*M.signum(l),m=Math.abs(o.data.scaleY)*M.signum(u),o.scaleX=g+(l-g)*h,o.scaleY=m+(u-m)*h;break;case b.first:case b.replace:g=Math.abs(o.scaleX)*M.signum(l),m=Math.abs(o.scaleY)*M.signum(u),o.scaleX=g+(l-g)*h,o.scaleY=m+(u-m)*h;break;case b.add:o.scaleX+=(l-o.data.scaleX)*h,o.scaleY+=(u-o.data.scaleY)*h}}}},t}(lr),fa=function(i){at(t,i);function t(e,r,a){var n=i.call(this,e,r,lt.scaleX+"|"+a)||this;return n.boneIndex=0,n.boneIndex=a,n}return t.prototype.apply=function(e,r,a,n,h,f,c){var o=e.bones[this.boneIndex];if(o.active){var s=this.frames;if(a<s[0]){switch(f){case b.setup:o.scaleX=o.data.scaleX;return;case b.first:o.scaleX+=(o.data.scaleX-o.scaleX)*h}return}var l=this.getCurveValue(a)*o.data.scaleX;if(h==1)f==b.add?o.scaleX+=l-o.data.scaleX:o.scaleX=l;else{var u=0;if(c==rt.mixOut)switch(f){case b.setup:u=o.data.scaleX,o.scaleX=u+(Math.abs(l)*M.signum(u)-u)*h;break;case b.first:case b.replace:u=o.scaleX,o.scaleX=u+(Math.abs(l)*M.signum(u)-u)*h;break;case b.add:o.scaleX+=(l-o.data.scaleX)*h}else switch(f){case b.setup:u=Math.abs(o.data.scaleX)*M.signum(l),o.scaleX=u+(l-u)*h;break;case b.first:case b.replace:u=Math.abs(o.scaleX)*M.signum(l),o.scaleX=u+(l-u)*h;break;case b.add:o.scaleX+=(l-o.data.scaleX)*h}}}},t}(te),ua=function(i){at(t,i);function t(e,r,a){var n=i.call(this,e,r,lt.scaleY+"|"+a)||this;return n.boneIndex=0,n.boneIndex=a,n}return t.prototype.apply=function(e,r,a,n,h,f,c){var o=e.bones[this.boneIndex];if(o.active){var s=this.frames;if(a<s[0]){switch(f){case b.setup:o.scaleY=o.data.scaleY;return;case b.first:o.scaleY+=(o.data.scaleY-o.scaleY)*h}return}var l=this.getCurveValue(a)*o.data.scaleY;if(h==1)f==b.add?o.scaleY+=l-o.data.scaleY:o.scaleY=l;else{var u=0;if(c==rt.mixOut)switch(f){case b.setup:u=o.data.scaleY,o.scaleY=u+(Math.abs(l)*M.signum(u)-u)*h;break;case b.first:case b.replace:u=o.scaleY,o.scaleY=u+(Math.abs(l)*M.signum(u)-u)*h;break;case b.add:o.scaleY+=(l-o.data.scaleY)*h}else switch(f){case b.setup:u=Math.abs(o.data.scaleY)*M.signum(l),o.scaleY=u+(l-u)*h;break;case b.first:case b.replace:u=Math.abs(o.scaleY)*M.signum(l),o.scaleY=u+(l-u)*h;break;case b.add:o.scaleY+=(l-o.data.scaleY)*h}}}},t}(te),ca=function(i){at(t,i);function t(e,r,a){var n=i.call(this,e,r,lt.shearX+"|"+a,lt.shearY+"|"+a)||this;return n.boneIndex=0,n.boneIndex=a,n}return t.prototype.apply=function(e,r,a,n,h,f,c){var o=e.bones[this.boneIndex];if(o.active){var s=this.frames;if(a<s[0]){switch(f){case b.setup:o.shearX=o.data.shearX,o.shearY=o.data.shearY;return;case b.first:o.shearX+=(o.data.shearX-o.shearX)*h,o.shearY+=(o.data.shearY-o.shearY)*h}return}var l=0,u=0,d=mt.search(s,a,3),v=this.curves[d/3];switch(v){case 0:var p=s[d];l=s[d+1],u=s[d+2];var y=(a-p)/(s[d+3]-p);l+=(s[d+3+1]-l)*y,u+=(s[d+3+2]-u)*y;break;case 1:l=s[d+1],u=s[d+2];break;default:l=this.getBezierValue(a,d,1,v-2),u=this.getBezierValue(a,d,2,v+18-2)}switch(f){case b.setup:o.shearX=o.data.shearX+l*h,o.shearY=o.data.shearY+u*h;break;case b.first:case b.replace:o.shearX+=(o.data.shearX+l-o.shearX)*h,o.shearY+=(o.data.shearY+u-o.shearY)*h;break;case b.add:o.shearX+=l*h,o.shearY+=u*h}}},t}(lr),va=function(i){at(t,i);function t(e,r,a){var n=i.call(this,e,r,lt.shearX+"|"+a)||this;return n.boneIndex=0,n.boneIndex=a,n}return t.prototype.apply=function(e,r,a,n,h,f,c){var o=e.bones[this.boneIndex];if(o.active){var s=this.frames;if(a<s[0]){switch(f){case b.setup:o.shearX=o.data.shearX;return;case b.first:o.shearX+=(o.data.shearX-o.shearX)*h}return}var l=this.getCurveValue(a);switch(f){case b.setup:o.shearX=o.data.shearX+l*h;break;case b.first:case b.replace:o.shearX+=(o.data.shearX+l-o.shearX)*h;break;case b.add:o.shearX+=l*h}}},t}(te),da=function(i){at(t,i);function t(e,r,a){var n=i.call(this,e,r,lt.shearY+"|"+a)||this;return n.boneIndex=0,n.boneIndex=a,n}return t.prototype.apply=function(e,r,a,n,h,f,c){var o=e.bones[this.boneIndex];if(o.active){var s=this.frames;if(a<s[0]){switch(f){case b.setup:o.shearY=o.data.shearY;return;case b.first:o.shearY+=(o.data.shearY-o.shearY)*h}return}var l=this.getCurveValue(a);switch(f){case b.setup:o.shearY=o.data.shearY+l*h;break;case b.first:case b.replace:o.shearY+=(o.data.shearY+l-o.shearY)*h;break;case b.add:o.shearY+=l*h}}},t}(te),pa=function(i){at(t,i);function t(e,r,a){var n=i.call(this,e,r,[lt.rgb+"|"+a,lt.alpha+"|"+a])||this;return n.slotIndex=0,n.slotIndex=a,n}return t.prototype.getFrameEntries=function(){return 5},t.prototype.setFrame=function(e,r,a,n,h,f){e*=5,this.frames[e]=r,this.frames[e+1]=a,this.frames[e+2]=n,this.frames[e+3]=h,this.frames[e+4]=f},t.prototype.apply=function(e,r,a,n,h,f,c){var o=e.slots[this.slotIndex];if(o.bone.active){var s=this.frames,l=o.color;if(a<s[0]){var u=o.data.color;switch(f){case b.setup:l.setFromColor(u);return;case b.first:l.add((u.r-l.r)*h,(u.g-l.g)*h,(u.b-l.b)*h,(u.a-l.a)*h)}return}var d=0,v=0,p=0,y=0,g=mt.search(s,a,5),m=this.curves[g/5];switch(m){case 0:var w=s[g];d=s[g+1],v=s[g+2],p=s[g+3],y=s[g+4];var x=(a-w)/(s[g+5]-w);d+=(s[g+5+1]-d)*x,v+=(s[g+5+2]-v)*x,p+=(s[g+5+3]-p)*x,y+=(s[g+5+4]-y)*x;break;case 1:d=s[g+1],v=s[g+2],p=s[g+3],y=s[g+4];break;default:d=this.getBezierValue(a,g,1,m-2),v=this.getBezierValue(a,g,2,m+18-2),p=this.getBezierValue(a,g,3,m+18*2-2),y=this.getBezierValue(a,g,4,m+18*3-2)}h==1?l.set(d,v,p,y):(f==b.setup&&l.setFromColor(o.data.color),l.add((d-l.r)*h,(v-l.g)*h,(p-l.b)*h,(y-l.a)*h))}},t}(Qt),ga=function(i){at(t,i);function t(e,r,a){var n=i.call(this,e,r,[lt.rgb+"|"+a])||this;return n.slotIndex=0,n.slotIndex=a,n}return t.prototype.getFrameEntries=function(){return 4},t.prototype.setFrame=function(e,r,a,n,h){e<<=2,this.frames[e]=r,this.frames[e+1]=a,this.frames[e+2]=n,this.frames[e+3]=h},t.prototype.apply=function(e,r,a,n,h,f,c){var o=e.slots[this.slotIndex];if(o.bone.active){var s=this.frames,l=o.color;if(a<s[0]){var u=o.data.color;switch(f){case b.setup:l.r=u.r,l.g=u.g,l.b=u.b;return;case b.first:l.r+=(u.r-l.r)*h,l.g+=(u.g-l.g)*h,l.b+=(u.b-l.b)*h}return}var d=0,v=0,p=0,y=mt.search(s,a,4),g=this.curves[y>>2];switch(g){case 0:var m=s[y];d=s[y+1],v=s[y+2],p=s[y+3];var w=(a-m)/(s[y+4]-m);d+=(s[y+4+1]-d)*w,v+=(s[y+4+2]-v)*w,p+=(s[y+4+3]-p)*w;break;case 1:d=s[y+1],v=s[y+2],p=s[y+3];break;default:d=this.getBezierValue(a,y,1,g-2),v=this.getBezierValue(a,y,2,g+18-2),p=this.getBezierValue(a,y,3,g+18*2-2)}if(h==1)l.r=d,l.g=v,l.b=p;else{if(f==b.setup){var u=o.data.color;l.r=u.r,l.g=u.g,l.b=u.b}l.r+=(d-l.r)*h,l.g+=(v-l.g)*h,l.b+=(p-l.b)*h}}},t}(Qt),ma=function(i){at(t,i);function t(e,r,a){var n=i.call(this,e,r,lt.alpha+"|"+a)||this;return n.slotIndex=0,n.slotIndex=a,n}return t.prototype.apply=function(e,r,a,n,h,f,c){var o=e.slots[this.slotIndex];if(o.bone.active){var s=o.color;if(a<this.frames[0]){var l=o.data.color;switch(f){case b.setup:s.a=l.a;return;case b.first:s.a+=(l.a-s.a)*h}return}var u=this.getCurveValue(a);h==1?s.a=u:(f==b.setup&&(s.a=o.data.color.a),s.a+=(u-s.a)*h)}},t}(te),ya=function(i){at(t,i);function t(e,r,a){var n=i.call(this,e,r,[lt.rgb+"|"+a,lt.alpha+"|"+a,lt.rgb2+"|"+a])||this;return n.slotIndex=0,n.slotIndex=a,n}return t.prototype.getFrameEntries=function(){return 8},t.prototype.setFrame=function(e,r,a,n,h,f,c,o,s){e<<=3,this.frames[e]=r,this.frames[e+1]=a,this.frames[e+2]=n,this.frames[e+3]=h,this.frames[e+4]=f,this.frames[e+5]=c,this.frames[e+6]=o,this.frames[e+7]=s},t.prototype.apply=function(e,r,a,n,h,f,c){var o=e.slots[this.slotIndex];if(o.bone.active){var s=this.frames,l=o.color,u=o.darkColor;if(a<s[0]){var d=o.data.color,v=o.data.darkColor;switch(f){case b.setup:l.setFromColor(d),u.r=v.r,u.g=v.g,u.b=v.b;return;case b.first:l.add((d.r-l.r)*h,(d.g-l.g)*h,(d.b-l.b)*h,(d.a-l.a)*h),u.r+=(v.r-u.r)*h,u.g+=(v.g-u.g)*h,u.b+=(v.b-u.b)*h}return}var p=0,y=0,g=0,m=0,w=0,x=0,E=0,S=mt.search(s,a,8),A=this.curves[S>>3];switch(A){case 0:var T=s[S];p=s[S+1],y=s[S+2],g=s[S+3],m=s[S+4],w=s[S+5],x=s[S+6],E=s[S+7];var C=(a-T)/(s[S+8]-T);p+=(s[S+8+1]-p)*C,y+=(s[S+8+2]-y)*C,g+=(s[S+8+3]-g)*C,m+=(s[S+8+4]-m)*C,w+=(s[S+8+5]-w)*C,x+=(s[S+8+6]-x)*C,E+=(s[S+8+7]-E)*C;break;case 1:p=s[S+1],y=s[S+2],g=s[S+3],m=s[S+4],w=s[S+5],x=s[S+6],E=s[S+7];break;default:p=this.getBezierValue(a,S,1,A-2),y=this.getBezierValue(a,S,2,A+18-2),g=this.getBezierValue(a,S,3,A+18*2-2),m=this.getBezierValue(a,S,4,A+18*3-2),w=this.getBezierValue(a,S,5,A+18*4-2),x=this.getBezierValue(a,S,6,A+18*5-2),E=this.getBezierValue(a,S,7,A+18*6-2)}if(h==1)l.set(p,y,g,m),u.r=w,u.g=x,u.b=E;else{if(f==b.setup){l.setFromColor(o.data.color);var v=o.data.darkColor;u.r=v.r,u.g=v.g,u.b=v.b}l.add((p-l.r)*h,(y-l.g)*h,(g-l.b)*h,(m-l.a)*h),u.r+=(w-u.r)*h,u.g+=(x-u.g)*h,u.b+=(E-u.b)*h}}},t}(Qt),wa=function(i){at(t,i);function t(e,r,a){var n=i.call(this,e,r,[lt.rgb+"|"+a,lt.rgb2+"|"+a])||this;return n.slotIndex=0,n.slotIndex=a,n}return t.prototype.getFrameEntries=function(){return 7},t.prototype.setFrame=function(e,r,a,n,h,f,c,o){e*=7,this.frames[e]=r,this.frames[e+1]=a,this.frames[e+2]=n,this.frames[e+3]=h,this.frames[e+4]=f,this.frames[e+5]=c,this.frames[e+6]=o},t.prototype.apply=function(e,r,a,n,h,f,c){var o=e.slots[this.slotIndex];if(o.bone.active){var s=this.frames,l=o.color,u=o.darkColor;if(a<s[0]){var d=o.data.color,v=o.data.darkColor;switch(f){case b.setup:l.r=d.r,l.g=d.g,l.b=d.b,u.r=v.r,u.g=v.g,u.b=v.b;return;case b.first:l.r+=(d.r-l.r)*h,l.g+=(d.g-l.g)*h,l.b+=(d.b-l.b)*h,u.r+=(v.r-u.r)*h,u.g+=(v.g-u.g)*h,u.b+=(v.b-u.b)*h}return}var p=0,y=0,g=0,m=0,w=0,x=0,E=mt.search(s,a,7),S=this.curves[E/7];switch(S){case 0:var A=s[E];p=s[E+1],y=s[E+2],g=s[E+3],m=s[E+4],w=s[E+5],x=s[E+6];var T=(a-A)/(s[E+7]-A);p+=(s[E+7+1]-p)*T,y+=(s[E+7+2]-y)*T,g+=(s[E+7+3]-g)*T,m+=(s[E+7+4]-m)*T,w+=(s[E+7+5]-w)*T,x+=(s[E+7+6]-x)*T;break;case 1:p=s[E+1],y=s[E+2],g=s[E+3],m=s[E+4],w=s[E+5],x=s[E+6];break;default:p=this.getBezierValue(a,E,1,S-2),y=this.getBezierValue(a,E,2,S+18-2),g=this.getBezierValue(a,E,3,S+18*2-2),m=this.getBezierValue(a,E,4,S+18*3-2),w=this.getBezierValue(a,E,5,S+18*4-2),x=this.getBezierValue(a,E,6,S+18*5-2)}if(h==1)l.r=p,l.g=y,l.b=g,u.r=m,u.g=w,u.b=x;else{if(f==b.setup){var d=o.data.color,v=o.data.darkColor;l.r=d.r,l.g=d.g,l.b=d.b,u.r=v.r,u.g=v.g,u.b=v.b}l.r+=(p-l.r)*h,l.g+=(y-l.g)*h,l.b+=(g-l.b)*h,u.r+=(m-u.r)*h,u.g+=(w-u.g)*h,u.b+=(x-u.b)*h}}},t}(Qt),ye=function(i){at(t,i);function t(e,r){var a=i.call(this,e,[lt.attachment+"|"+r])||this;return a.slotIndex=0,a.slotIndex=r,a.attachmentNames=new Array(e),a}return t.prototype.getFrameCount=function(){return this.frames.length},t.prototype.setFrame=function(e,r,a){this.frames[e]=r,this.attachmentNames[e]=a},t.prototype.apply=function(e,r,a,n,h,f,c){var o=e.slots[this.slotIndex];if(o.bone.active){if(c==rt.mixOut){f==b.setup&&this.setAttachment(e,o,o.data.attachmentName);return}if(a<this.frames[0]){(f==b.setup||f==b.first)&&this.setAttachment(e,o,o.data.attachmentName);return}this.setAttachment(e,o,this.attachmentNames[mt.search1(this.frames,a)])}},t.prototype.setAttachment=function(e,r,a){r.setAttachment(a?e.getAttachment(this.slotIndex,a):null)},t}(mt),xa=function(i){at(t,i);function t(e,r,a,n){var h=i.call(this,e,r,[lt.deform+"|"+a+"|"+n.id])||this;return h.slotIndex=0,h.slotIndex=a,h.attachment=n,h.vertices=new Array(e),h}return t.prototype.getFrameCount=function(){return this.frames.length},t.prototype.setFrame=function(e,r,a){this.frames[e]=r,this.vertices[e]=a},t.prototype.setBezier=function(e,r,a,n,h,f,c,o,s,l,u){var d=this.curves,v=this.getFrameCount()+e*18;a==0&&(d[r]=2+v);for(var p=(n-f*2+o)*.03,y=s*.03-c*.06,g=((f-o)*3-n+l)*.006,m=(c-s+.33333333)*.018,w=p*2+g,x=y*2+m,E=(f-n)*.3+p+g*.16666667,S=c*.3+y+m*.16666667,A=n+E,T=S,C=v+18;v<C;v+=2)d[v]=A,d[v+1]=T,E+=w,S+=x,w+=g,x+=m,A+=E,T+=S},t.prototype.getCurvePercent=function(e,r){var a=this.curves,n=a[r];switch(n){case 0:var h=this.frames[r];return(e-h)/(this.frames[r+this.getFrameEntries()]-h);case 1:return 0}if(n-=2,a[n]>e){var f=this.frames[r];return a[n+1]*(e-f)/(a[n]-f)}var c=n+18;for(n+=2;n<c;n+=2)if(a[n]>=e){var o=a[n-2],s=a[n-1];return s+(e-o)/(a[n]-o)*(a[n+1]-s)}var l=a[c-2],u=a[c-1];return u+(1-u)*(e-l)/(this.frames[r+this.getFrameEntries()]-l)},t.prototype.apply=function(e,r,a,n,h,f,c){var o=e.slots[this.slotIndex];if(o.bone.active){var s=o.getAttachment();if(s&&!(!(s instanceof re)||s.timelineAttachment!=this.attachment)){var l=o.deform;l.length==0&&(f=b.setup);var u=this.vertices,d=u[0].length,v=this.frames;if(a<v[0]){switch(f){case b.setup:l.length=0;return;case b.first:if(h==1){l.length=0;return}l.length=d;var p=s;if(p.bones){h=1-h;for(var g=0;g<d;g++)l[g]*=h}else for(var y=p.vertices,g=0;g<d;g++)l[g]+=(y[g]-l[g])*h}return}if(l.length=d,a>=v[v.length-1]){var m=u[v.length-1];if(h==1)if(f==b.add){var p=s;if(p.bones)for(var x=0;x<d;x++)l[x]+=m[x];else for(var y=p.vertices,w=0;w<d;w++)l[w]+=m[w]-y[w]}else Y.arrayCopy(m,0,l,0,d);else switch(f){case b.setup:{var E=s;if(E.bones)for(var T=0;T<d;T++)l[T]=m[T]*h;else for(var y=E.vertices,S=0;S<d;S++){var A=y[S];l[S]=A+(m[S]-A)*h}break}case b.first:case b.replace:for(var C=0;C<d;C++)l[C]+=(m[C]-l[C])*h;break;case b.add:var p=s;if(p.bones)for(var P=0;P<d;P++)l[P]+=m[P]*h;else for(var y=p.vertices,I=0;I<d;I++)l[I]+=(m[I]-y[I])*h}return}var R=mt.search1(v,a),V=this.getCurvePercent(a,R),k=u[R],B=u[R+1];if(h==1)if(f==b.add){var p=s;if(p.bones)for(var H=0;H<d;H++){var L=k[H];l[H]+=L+(B[H]-L)*V}else for(var y=p.vertices,D=0;D<d;D++){var L=k[D];l[D]+=L+(B[D]-L)*V-y[D]}}else for(var _=0;_<d;_++){var L=k[_];l[_]=L+(B[_]-L)*V}else switch(f){case b.setup:{var O=s;if(O.bones)for(var W=0;W<d;W++){var L=k[W];l[W]=(L+(B[W]-L)*V)*h}else for(var y=O.vertices,U=0;U<d;U++){var L=k[U],A=y[U];l[U]=A+(L+(B[U]-L)*V-A)*h}break}case b.first:case b.replace:for(var N=0;N<d;N++){var L=k[N];l[N]+=(L+(B[N]-L)*V-l[N])*h}break;case b.add:var p=s;if(p.bones)for(var q=0;q<d;q++){var L=k[q];l[q]+=(L+(B[q]-L)*V)*h}else for(var y=p.vertices,F=0;F<d;F++){var L=k[F];l[F]+=(L+(B[F]-L)*V-y[F])*h}}}}},t}(Qt),fr=function(i){at(t,i);function t(e){var r=i.call(this,e,t.propertyIds)||this;return r.events=new Array(e),r}return t.prototype.getFrameCount=function(){return this.frames.length},t.prototype.setFrame=function(e,r){this.frames[e]=r.time,this.events[e]=r},t.prototype.apply=function(e,r,a,n,h,f,c){if(n){var o=this.frames,s=this.frames.length;if(r>a)this.apply(e,r,Number.MAX_VALUE,n,h,f,c),r=-1;else if(r>=o[s-1])return;if(!(a<o[0])){var l=0;if(r<o[0])l=0;else{l=mt.search1(o,r)+1;for(var u=o[l];l>0&&o[l-1]==u;)l--}for(;l<s&&a>=o[l];l++)n.push(this.events[l])}}},t.propertyIds=[""+lt.event],t}(mt),Re=function(i){at(t,i);function t(e){var r=i.call(this,e,t.propertyIds)||this;return r.drawOrders=new Array(e),r}return t.prototype.getFrameCount=function(){return this.frames.length},t.prototype.setFrame=function(e,r,a){this.frames[e]=r,this.drawOrders[e]=a},t.prototype.apply=function(e,r,a,n,h,f,c){if(c==rt.mixOut){f==b.setup&&Y.arrayCopy(e.slots,0,e.drawOrder,0,e.slots.length);return}if(a<this.frames[0]){(f==b.setup||f==b.first)&&Y.arrayCopy(e.slots,0,e.drawOrder,0,e.slots.length);return}var o=mt.search1(this.frames,a),s=this.drawOrders[o];if(!s)Y.arrayCopy(e.slots,0,e.drawOrder,0,e.slots.length);else for(var l=e.drawOrder,u=e.slots,d=0,v=s.length;d<v;d++)l[d]=u[s[d]]},t.propertyIds=[""+lt.drawOrder],t}(mt),Ea=function(i){at(t,i);function t(e,r,a){var n=i.call(this,e,r,[lt.ikConstraint+"|"+a])||this;return n.ikConstraintIndex=0,n.ikConstraintIndex=a,n}return t.prototype.getFrameEntries=function(){return 6},t.prototype.setFrame=function(e,r,a,n,h,f,c){e*=6,this.frames[e]=r,this.frames[e+1]=a,this.frames[e+2]=n,this.frames[e+3]=h,this.frames[e+4]=f?1:0,this.frames[e+5]=c?1:0},t.prototype.apply=function(e,r,a,n,h,f,c){var o=e.ikConstraints[this.ikConstraintIndex];if(o.active){var s=this.frames;if(a<s[0]){switch(f){case b.setup:o.mix=o.data.mix,o.softness=o.data.softness,o.bendDirection=o.data.bendDirection,o.compress=o.data.compress,o.stretch=o.data.stretch;return;case b.first:o.mix+=(o.data.mix-o.mix)*h,o.softness+=(o.data.softness-o.softness)*h,o.bendDirection=o.data.bendDirection,o.compress=o.data.compress,o.stretch=o.data.stretch}return}var l=0,u=0,d=mt.search(s,a,6),v=this.curves[d/6];switch(v){case 0:var p=s[d];l=s[d+1],u=s[d+2];var y=(a-p)/(s[d+6]-p);l+=(s[d+6+1]-l)*y,u+=(s[d+6+2]-u)*y;break;case 1:l=s[d+1],u=s[d+2];break;default:l=this.getBezierValue(a,d,1,v-2),u=this.getBezierValue(a,d,2,v+18-2)}f==b.setup?(o.mix=o.data.mix+(l-o.data.mix)*h,o.softness=o.data.softness+(u-o.data.softness)*h,c==rt.mixOut?(o.bendDirection=o.data.bendDirection,o.compress=o.data.compress,o.stretch=o.data.stretch):(o.bendDirection=s[d+3],o.compress=s[d+4]!=0,o.stretch=s[d+5]!=0)):(o.mix+=(l-o.mix)*h,o.softness+=(u-o.softness)*h,c==rt.mixIn&&(o.bendDirection=s[d+3],o.compress=s[d+4]!=0,o.stretch=s[d+5]!=0))}},t}(Qt),Sa=function(i){at(t,i);function t(e,r,a){var n=i.call(this,e,r,[lt.transformConstraint+"|"+a])||this;return n.transformConstraintIndex=0,n.transformConstraintIndex=a,n}return t.prototype.getFrameEntries=function(){return 7},t.prototype.setFrame=function(e,r,a,n,h,f,c,o){var s=this.frames;e*=7,s[e]=r,s[e+1]=a,s[e+2]=n,s[e+3]=h,s[e+4]=f,s[e+5]=c,s[e+6]=o},t.prototype.apply=function(e,r,a,n,h,f,c){var o=e.transformConstraints[this.transformConstraintIndex];if(o.active){var s=this.frames;if(a<s[0]){var l=o.data;switch(f){case b.setup:o.mixRotate=l.mixRotate,o.mixX=l.mixX,o.mixY=l.mixY,o.mixScaleX=l.mixScaleX,o.mixScaleY=l.mixScaleY,o.mixShearY=l.mixShearY;return;case b.first:o.mixRotate+=(l.mixRotate-o.mixRotate)*h,o.mixX+=(l.mixX-o.mixX)*h,o.mixY+=(l.mixY-o.mixY)*h,o.mixScaleX+=(l.mixScaleX-o.mixScaleX)*h,o.mixScaleY+=(l.mixScaleY-o.mixScaleY)*h,o.mixShearY+=(l.mixShearY-o.mixShearY)*h}return}var u,d,v,p,y,g,m=mt.search(s,a,7),w=this.curves[m/7];switch(w){case 0:var x=s[m];u=s[m+1],d=s[m+2],v=s[m+3],p=s[m+4],y=s[m+5],g=s[m+6];var E=(a-x)/(s[m+7]-x);u+=(s[m+7+1]-u)*E,d+=(s[m+7+2]-d)*E,v+=(s[m+7+3]-v)*E,p+=(s[m+7+4]-p)*E,y+=(s[m+7+5]-y)*E,g+=(s[m+7+6]-g)*E;break;case 1:u=s[m+1],d=s[m+2],v=s[m+3],p=s[m+4],y=s[m+5],g=s[m+6];break;default:u=this.getBezierValue(a,m,1,w-2),d=this.getBezierValue(a,m,2,w+18-2),v=this.getBezierValue(a,m,3,w+18*2-2),p=this.getBezierValue(a,m,4,w+18*3-2),y=this.getBezierValue(a,m,5,w+18*4-2),g=this.getBezierValue(a,m,6,w+18*5-2)}if(f==b.setup){var l=o.data;o.mixRotate=l.mixRotate+(u-l.mixRotate)*h,o.mixX=l.mixX+(d-l.mixX)*h,o.mixY=l.mixY+(v-l.mixY)*h,o.mixScaleX=l.mixScaleX+(p-l.mixScaleX)*h,o.mixScaleY=l.mixScaleY+(y-l.mixScaleY)*h,o.mixShearY=l.mixShearY+(g-l.mixShearY)*h}else o.mixRotate+=(u-o.mixRotate)*h,o.mixX+=(d-o.mixX)*h,o.mixY+=(v-o.mixY)*h,o.mixScaleX+=(p-o.mixScaleX)*h,o.mixScaleY+=(y-o.mixScaleY)*h,o.mixShearY+=(g-o.mixShearY)*h}},t}(Qt),Aa=function(i){at(t,i);function t(e,r,a){var n=i.call(this,e,r,lt.pathConstraintPosition+"|"+a)||this;return n.pathConstraintIndex=0,n.pathConstraintIndex=a,n}return t.prototype.apply=function(e,r,a,n,h,f,c){var o=e.pathConstraints[this.pathConstraintIndex];if(o.active){var s=this.frames;if(a<s[0]){switch(f){case b.setup:o.position=o.data.position;return;case b.first:o.position+=(o.data.position-o.position)*h}return}var l=this.getCurveValue(a);f==b.setup?o.position=o.data.position+(l-o.data.position)*h:o.position+=(l-o.position)*h}},t}(te),ba=function(i){at(t,i);function t(e,r,a){var n=i.call(this,e,r,lt.pathConstraintSpacing+"|"+a)||this;return n.pathConstraintIndex=0,n.pathConstraintIndex=a,n}return t.prototype.apply=function(e,r,a,n,h,f,c){var o=e.pathConstraints[this.pathConstraintIndex];if(o.active){var s=this.frames;if(a<s[0]){switch(f){case b.setup:o.spacing=o.data.spacing;return;case b.first:o.spacing+=(o.data.spacing-o.spacing)*h}return}var l=this.getCurveValue(a);f==b.setup?o.spacing=o.data.spacing+(l-o.data.spacing)*h:o.spacing+=(l-o.spacing)*h}},t}(te),Ta=function(i){at(t,i);function t(e,r,a){var n=i.call(this,e,r,[lt.pathConstraintMix+"|"+a])||this;return n.pathConstraintIndex=0,n.pathConstraintIndex=a,n}return t.prototype.getFrameEntries=function(){return 4},t.prototype.setFrame=function(e,r,a,n,h){var f=this.frames;e<<=2,f[e]=r,f[e+1]=a,f[e+2]=n,f[e+3]=h},t.prototype.apply=function(e,r,a,n,h,f,c){var o=e.pathConstraints[this.pathConstraintIndex];if(o.active){var s=this.frames;if(a<s[0]){switch(f){case b.setup:o.mixRotate=o.data.mixRotate,o.mixX=o.data.mixX,o.mixY=o.data.mixY;return;case b.first:o.mixRotate+=(o.data.mixRotate-o.mixRotate)*h,o.mixX+=(o.data.mixX-o.mixX)*h,o.mixY+=(o.data.mixY-o.mixY)*h}return}var l,u,d,v=mt.search(s,a,4),p=this.curves[v>>2];switch(p){case 0:var y=s[v];l=s[v+1],u=s[v+2],d=s[v+3];var g=(a-y)/(s[v+4]-y);l+=(s[v+4+1]-l)*g,u+=(s[v+4+2]-u)*g,d+=(s[v+4+3]-d)*g;break;case 1:l=s[v+1],u=s[v+2],d=s[v+3];break;default:l=this.getBezierValue(a,v,1,p-2),u=this.getBezierValue(a,v,2,p+18-2),d=this.getBezierValue(a,v,3,p+18*2-2)}if(f==b.setup){var m=o.data;o.mixRotate=m.mixRotate+(l-m.mixRotate)*h,o.mixX=m.mixX+(u-m.mixX)*h,o.mixY=m.mixY+(d-m.mixY)*h}else o.mixRotate+=(l-o.mixRotate)*h,o.mixX+=(u-o.mixX)*h,o.mixY+=(d-o.mixY)*h}},t}(Qt),Ca=function(i){at(t,i);function t(e,r,a){var n=i.call(this,e,[lt.sequence+"|"+r+"|"+a.sequence.id])||this;return n.slotIndex=r,n.attachment=a,n}return t.prototype.getFrameEntries=function(){return t.ENTRIES},t.prototype.getSlotIndex=function(){return this.slotIndex},t.prototype.getAttachment=function(){return this.attachment},t.prototype.setFrame=function(e,r,a,n,h){var f=this.frames;e*=t.ENTRIES,f[e]=r,f[e+t.MODE]=a|n<<4,f[e+t.DELAY]=h},t.prototype.apply=function(e,r,a,n,h,f,c){var o=e.slots[this.slotIndex];if(o.bone.active){var s=o.attachment,l=this.attachment;if(!(s!=l&&(!(s instanceof re)||s.timelineAttachment!=l))){var u=this.frames;if(a<u[0]){(f==b.setup||f==b.first)&&(o.sequenceIndex=-1);return}var d=mt.search(u,a,t.ENTRIES),v=u[d],p=u[d+t.MODE],y=u[d+t.DELAY];if(this.attachment.sequence){var g=p>>4,m=this.attachment.sequence.regions.length,w=ia[p&15];if(w!=Mt.hold)switch(g+=(a-v)/y+1e-5|0,w){case Mt.once:g=Math.min(m-1,g);break;case Mt.loop:g%=m;break;case Mt.pingpong:{var x=(m<<1)-2;g=x==0?0:g%x,g>=m&&(g=x-g);break}case Mt.onceReverse:g=Math.max(m-1-g,0);break;case Mt.loopReverse:g=m-1-g%m;break;case Mt.pingpongReverse:{var x=(m<<1)-2;g=x==0?0:(g+m-1)%x,g>=m&&(g=x-g)}}o.sequenceIndex=g}}}},t.ENTRIES=3,t.MODE=1,t.DELAY=2,t}(mt),Wn=function(){function i(t){this.tracks=new Array,this.timeScale=1,this.unkeyedState=0,this.events=new Array,this.listeners=new Array,this.queue=new Un(this),this.propertyIDs=new za,this.animationsChanged=!1,this.trackEntryPool=new rr(function(){return new qn}),this.data=t}return i.emptyAnimation=function(){return i._emptyAnimation},i.prototype.update=function(t){t*=this.timeScale;for(var e=this.tracks,r=0,a=e.length;r<a;r++){var n=e[r];if(n){n.animationLast=n.nextAnimationLast,n.trackLast=n.nextTrackLast;var h=t*n.timeScale;if(n.delay>0){if(n.delay-=h,n.delay>0)continue;h=-n.delay,n.delay=0}var f=n.next;if(f){var c=n.trackLast-f.delay;if(c>=0){for(f.delay=0,f.trackTime+=n.timeScale==0?0:(c/n.timeScale+t)*f.timeScale,n.trackTime+=h,this.setCurrent(r,f,!0);f.mixingFrom;)f.mixTime+=t,f=f.mixingFrom;continue}}else if(n.trackLast>=n.trackEnd&&!n.mixingFrom){e[r]=null,this.queue.end(n),this.clearNext(n);continue}if(n.mixingFrom&&this.updateMixingFrom(n,t)){var o=n.mixingFrom;for(n.mixingFrom=null,o&&(o.mixingTo=null);o;)this.queue.end(o),o=o.mixingFrom}n.trackTime+=h}}this.queue.drain()},i.prototype.updateMixingFrom=function(t,e){var r=t.mixingFrom;if(!r)return!0;var a=this.updateMixingFrom(r,e);return r.animationLast=r.nextAnimationLast,r.trackLast=r.nextTrackLast,t.mixTime>0&&t.mixTime>=t.mixDuration?((r.totalAlpha==0||t.mixDuration==0)&&(t.mixingFrom=r.mixingFrom,r.mixingFrom&&(r.mixingFrom.mixingTo=t),t.interruptAlpha=r.interruptAlpha,this.queue.end(r)),a):(r.trackTime+=e*r.timeScale,t.mixTime+=e,!1)},i.prototype.apply=function(t){if(!t)throw new Error("skeleton cannot be null.");this.animationsChanged&&this._animationsChanged();for(var e=this.events,r=this.tracks,a=!1,n=0,h=r.length;n<h;n++){var f=r[n];if(!(!f||f.delay>0)){a=!0;var c=n==0?b.first:f.mixBlend,o=f.alpha;f.mixingFrom?o*=this.applyMixingFrom(f,t,c):f.trackTime>=f.trackEnd&&!f.next&&(o=0);var s=f.animationLast,l=f.getAnimationTime(),u=l,d=e;f.reverse&&(u=f.animation.duration-u,d=null);var v=f.animation.timelines,p=v.length;if(n==0&&o==1||c==b.add)for(var y=0;y<p;y++){Y.webkit602BugfixHelper(o,c);var g=v[y];g instanceof ye?this.applyAttachmentTimeline(g,t,u,c,!0):g.apply(t,s,u,d,o,c,rt.mixIn)}else{var m=f.timelineMode,w=f.shortestRotation,x=!w&&f.timelinesRotation.length!=p<<1;x&&(f.timelinesRotation.length=p<<1);for(var y=0;y<p;y++){var E=v[y],S=m[y]==pr?c:b.setup;!w&&E instanceof He?this.applyRotateTimeline(E,t,u,o,S,f.timelinesRotation,y<<1,x):E instanceof ye?this.applyAttachmentTimeline(E,t,u,c,!0):(Y.webkit602BugfixHelper(o,c),E.apply(t,s,u,d,o,S,rt.mixIn))}}this.queueEvents(f,l),e.length=0,f.nextAnimationLast=l,f.nextTrackLast=f.trackTime}}for(var A=this.unkeyedState+Ha,T=t.slots,C=0,I=t.slots.length;C<I;C++){var P=T[C];if(P.attachmentState==A){var R=P.data.attachmentName;P.setAttachment(R?t.getAttachment(P.data.index,R):null)}}return this.unkeyedState+=2,this.queue.drain(),a},i.prototype.applyMixingFrom=function(t,e,r){var a=t.mixingFrom;a.mixingFrom&&this.applyMixingFrom(a,e,r);var n=0;t.mixDuration==0?(n=1,r==b.first&&(r=b.setup)):(n=t.mixTime/t.mixDuration,n>1&&(n=1),r!=b.first&&(r=a.mixBlend));var h=n<a.attachmentThreshold,f=n<a.drawOrderThreshold,c=a.animation.timelines,o=c.length,s=a.alpha*t.interruptAlpha,l=s*(1-n),u=a.animationLast,d=a.getAnimationTime(),v=d,p=null;if(a.reverse?v=a.animation.duration-v:n<a.eventThreshold&&(p=this.events),r==b.add)for(var y=0;y<o;y++)c[y].apply(e,u,v,p,l,r,rt.mixOut);else{var g=a.timelineMode,m=a.timelineHoldMix,w=a.shortestRotation,x=!w&&a.timelinesRotation.length!=o<<1;x&&(a.timelinesRotation.length=o<<1),a.totalAlpha=0;for(var y=0;y<o;y++){var E=c[y],S=rt.mixOut,A=void 0,T=0;switch(g[y]){case pr:if(!f&&E instanceof Re)continue;A=r,T=l;break;case Ua:A=b.setup,T=l;break;case _a:A=r,T=s;break;case gr:A=b.setup,T=s;break;default:A=b.setup;var C=m[y];T=s*Math.max(0,1-C.mixTime/C.mixDuration);break}a.totalAlpha+=T,!w&&E instanceof He?this.applyRotateTimeline(E,e,v,T,A,a.timelinesRotation,y<<1,x):E instanceof ye?this.applyAttachmentTimeline(E,e,v,A,h):(Y.webkit602BugfixHelper(T,r),f&&E instanceof Re&&A==b.setup&&(S=rt.mixIn),E.apply(e,u,v,p,T,A,S))}}return t.mixDuration>0&&this.queueEvents(a,d),this.events.length=0,a.nextAnimationLast=d,a.nextTrackLast=a.trackTime,n},i.prototype.applyAttachmentTimeline=function(t,e,r,a,n){var h=e.slots[t.slotIndex];h.bone.active&&(r<t.frames[0]?(a==b.setup||a==b.first)&&this.setAttachment(e,h,h.data.attachmentName,n):this.setAttachment(e,h,t.attachmentNames[mt.search1(t.frames,r)],n),h.attachmentState<=this.unkeyedState&&(h.attachmentState=this.unkeyedState+Ha))},i.prototype.setAttachment=function(t,e,r,a){e.setAttachment(r?t.getAttachment(e.data.index,r):null),a&&(e.attachmentState=this.unkeyedState+Di)},i.prototype.applyRotateTimeline=function(t,e,r,a,n,h,f,c){if(c&&(h[f]=0),a==1){t.apply(e,0,r,null,1,n,rt.mixIn);return}var o=e.bones[t.boneIndex];if(o.active){var s=t.frames,l=0,u=0;if(r<s[0])switch(n){case b.setup:o.rotation=o.data.rotation;default:return;case b.first:l=o.rotation,u=o.data.rotation}else l=n==b.setup?o.data.rotation:o.rotation,u=o.data.rotation+t.getCurveValue(r);var d=0,v=u-l;if(v-=(16384-(16384.499999999996-v/360|0))*360,v==0)d=h[f];else{var p=0,y=0;c?(p=0,y=v):(p=h[f],y=h[f+1]);var g=v>0,m=p>=0;M.signum(y)!=M.signum(v)&&Math.abs(y)<=90&&(Math.abs(p)>180&&(p+=360*M.signum(p)),m=g),d=v+p-p%360,m!=g&&(d+=360*M.signum(p)),h[f]=d}h[f+1]=v,o.rotation=l+d*a}},i.prototype.queueEvents=function(t,e){for(var r=t.animationStart,a=t.animationEnd,n=a-r,h=t.trackLast%n,f=this.events,c=0,o=f.length;c<o;c++){var s=f[c];if(s.time<h)break;s.time>a||this.queue.event(t,s)}var l=!1;for(t.loop?l=n==0||h>t.trackTime%n:l=e>=a&&t.animationLast<a,l&&this.queue.complete(t);c<o;c++){var u=f[c];u.time<r||this.queue.event(t,u)}},i.prototype.clearTracks=function(){var t=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(var e=0,r=this.tracks.length;e<r;e++)this.clearTrack(e);this.tracks.length=0,this.queue.drainDisabled=t,this.queue.drain()},i.prototype.clearTrack=function(t){if(!(t>=this.tracks.length)){var e=this.tracks[t];if(e){this.queue.end(e),this.clearNext(e);for(var r=e;;){var a=r.mixingFrom;if(!a)break;this.queue.end(a),r.mixingFrom=null,r.mixingTo=null,r=a}this.tracks[e.trackIndex]=null,this.queue.drain()}}},i.prototype.setCurrent=function(t,e,r){var a=this.expandToIndex(t);this.tracks[t]=e,e.previous=null,a&&(r&&this.queue.interrupt(a),e.mixingFrom=a,a.mixingTo=e,e.mixTime=0,a.mixingFrom&&a.mixDuration>0&&(e.interruptAlpha*=Math.min(1,a.mixTime/a.mixDuration)),a.timelinesRotation.length=0),this.queue.start(e)},i.prototype.setAnimation=function(t,e,r){r===void 0&&(r=!1);var a=this.data.skeletonData.findAnimation(e);if(!a)throw new Error("Animation not found: "+e);return this.setAnimationWith(t,a,r)},i.prototype.setAnimationWith=function(t,e,r){if(r===void 0&&(r=!1),!e)throw new Error("animation cannot be null.");var a=!0,n=this.expandToIndex(t);n&&(n.nextTrackLast==-1?(this.tracks[t]=n.mixingFrom,this.queue.interrupt(n),this.queue.end(n),this.clearNext(n),n=n.mixingFrom,a=!1):this.clearNext(n));var h=this.trackEntry(t,e,r,n);return this.setCurrent(t,h,a),this.queue.drain(),h},i.prototype.addAnimation=function(t,e,r,a){r===void 0&&(r=!1),a===void 0&&(a=0);var n=this.data.skeletonData.findAnimation(e);if(!n)throw new Error("Animation not found: "+e);return this.addAnimationWith(t,n,r,a)},i.prototype.addAnimationWith=function(t,e,r,a){if(r===void 0&&(r=!1),a===void 0&&(a=0),!e)throw new Error("animation cannot be null.");var n=this.expandToIndex(t);if(n)for(;n.next;)n=n.next;var h=this.trackEntry(t,e,r,n);return n?(n.next=h,h.previous=n,a<=0&&(a+=n.getTrackComplete()-h.mixDuration)):(this.setCurrent(t,h,!0),this.queue.drain()),h.delay=a,h},i.prototype.setEmptyAnimation=function(t,e){e===void 0&&(e=0);var r=this.setAnimationWith(t,i.emptyAnimation(),!1);return r.mixDuration=e,r.trackEnd=e,r},i.prototype.addEmptyAnimation=function(t,e,r){e===void 0&&(e=0),r===void 0&&(r=0);var a=this.addAnimationWith(t,i.emptyAnimation(),!1,r);return r<=0&&(a.delay+=a.mixDuration-e),a.mixDuration=e,a.trackEnd=e,a},i.prototype.setEmptyAnimations=function(t){t===void 0&&(t=0);var e=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(var r=0,a=this.tracks.length;r<a;r++){var n=this.tracks[r];n&&this.setEmptyAnimation(n.trackIndex,t)}this.queue.drainDisabled=e,this.queue.drain()},i.prototype.expandToIndex=function(t){return t<this.tracks.length?this.tracks[t]:(Y.ensureArrayCapacity(this.tracks,t+1,null),this.tracks.length=t+1,null)},i.prototype.trackEntry=function(t,e,r,a){var n=this.trackEntryPool.obtain();return n.reset(),n.trackIndex=t,n.animation=e,n.loop=r,n.holdPrevious=!1,n.reverse=!1,n.shortestRotation=!1,n.eventThreshold=0,n.attachmentThreshold=0,n.drawOrderThreshold=0,n.animationStart=0,n.animationEnd=e.duration,n.animationLast=-1,n.nextAnimationLast=-1,n.delay=0,n.trackTime=0,n.trackLast=-1,n.nextTrackLast=-1,n.trackEnd=Number.MAX_VALUE,n.timeScale=1,n.alpha=1,n.mixTime=0,n.mixDuration=a?this.data.getMix(a.animation,e):0,n.interruptAlpha=1,n.totalAlpha=0,n.mixBlend=b.replace,n},i.prototype.clearNext=function(t){for(var e=t.next;e;)this.queue.dispose(e),e=e.next;t.next=null},i.prototype._animationsChanged=function(){this.animationsChanged=!1,this.propertyIDs.clear();for(var t=this.tracks,e=0,r=t.length;e<r;e++){var a=t[e];if(a){for(;a.mixingFrom;)a=a.mixingFrom;do(!a.mixingTo||a.mixBlend!=b.add)&&this.computeHold(a),a=a.mixingTo;while(a)}}},i.prototype.computeHold=function(t){var e=t.mixingTo,r=t.animation.timelines,a=t.animation.timelines.length,n=t.timelineMode;n.length=a;var h=t.timelineHoldMix;h.length=0;var f=this.propertyIDs;if(e&&e.holdPrevious){for(var c=0;c<a;c++)n[c]=f.addAll(r[c].getPropertyIds())?gr:_a;return}t:for(var c=0;c<a;c++){var o=r[c],s=o.getPropertyIds();if(!f.addAll(s))n[c]=pr;else if(!e||o instanceof ye||o instanceof Re||o instanceof fr||!e.animation.hasTimeline(s))n[c]=Ua;else{for(var l=e.mixingTo;l;l=l.mixingTo)if(!l.animation.hasTimeline(s)){if(t.mixDuration>0){n[c]=Oi,h[c]=l;continue t}break}n[c]=gr}}},i.prototype.getCurrent=function(t){return t>=this.tracks.length?null:this.tracks[t]},i.prototype.addListener=function(t){if(!t)throw new Error("listener cannot be null.");this.listeners.push(t)},i.prototype.removeListener=function(t){var e=this.listeners.indexOf(t);e>=0&&this.listeners.splice(e,1)},i.prototype.clearListeners=function(){this.listeners.length=0},i.prototype.clearListenerNotifications=function(){this.queue.clear()},i.prototype.setAnimationByName=function(t,e,r){i.deprecatedWarning1||(i.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: AnimationState.setAnimationByName is deprecated, please use setAnimation from now on.")),this.setAnimation(t,e,r)},i.prototype.addAnimationByName=function(t,e,r,a){i.deprecatedWarning2||(i.deprecatedWarning2=!0,console.warn("Spine Deprecation Warning: AnimationState.addAnimationByName is deprecated, please use addAnimation from now on.")),this.addAnimation(t,e,r,a)},i.prototype.hasAnimation=function(t){var e=this.data.skeletonData.findAnimation(t);return e!==null},i.prototype.hasAnimationByName=function(t){return i.deprecatedWarning3||(i.deprecatedWarning3=!0,console.warn("Spine Deprecation Warning: AnimationState.hasAnimationByName is deprecated, please use hasAnimation from now on.")),this.hasAnimation(t)},i._emptyAnimation=new hr("<empty>",[],0),i.deprecatedWarning1=!1,i.deprecatedWarning2=!1,i.deprecatedWarning3=!1,i}(),qn=function(){function i(){this.animation=null,this.previous=null,this.next=null,this.mixingFrom=null,this.mixingTo=null,this.listener=null,this.trackIndex=0,this.loop=!1,this.holdPrevious=!1,this.reverse=!1,this.shortestRotation=!1,this.eventThreshold=0,this.attachmentThreshold=0,this.drawOrderThreshold=0,this.animationStart=0,this.animationEnd=0,this.animationLast=0,this.nextAnimationLast=0,this.delay=0,this.trackTime=0,this.trackLast=0,this.nextTrackLast=0,this.trackEnd=0,this.timeScale=0,this.alpha=0,this.mixTime=0,this.mixDuration=0,this.interruptAlpha=0,this.totalAlpha=0,this.mixBlend=b.replace,this.timelineMode=new Array,this.timelineHoldMix=new Array,this.timelinesRotation=new Array}return i.prototype.reset=function(){this.next=null,this.previous=null,this.mixingFrom=null,this.mixingTo=null,this.animation=null,this.listener=null,this.timelineMode.length=0,this.timelineHoldMix.length=0,this.timelinesRotation.length=0},i.prototype.getAnimationTime=function(){if(this.loop){var t=this.animationEnd-this.animationStart;return t==0?this.animationStart:this.trackTime%t+this.animationStart}return Math.min(this.trackTime+this.animationStart,this.animationEnd)},i.prototype.setAnimationLast=function(t){this.animationLast=t,this.nextAnimationLast=t},i.prototype.isComplete=function(){return this.trackTime>=this.animationEnd-this.animationStart},i.prototype.resetRotationDirections=function(){this.timelinesRotation.length=0},i.prototype.getTrackComplete=function(){var t=this.animationEnd-this.animationStart;if(t!=0){if(this.loop)return t*(1+(this.trackTime/t|0));if(this.trackTime<t)return t}return this.trackTime},Object.defineProperty(i.prototype,"time",{get:function(){return i.deprecatedWarning1||(i.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: TrackEntry.time is deprecated, please use trackTime from now on.")),this.trackTime},set:function(t){i.deprecatedWarning1||(i.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: TrackEntry.time is deprecated, please use trackTime from now on.")),this.trackTime=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"endTime",{get:function(){return i.deprecatedWarning2||(i.deprecatedWarning2=!0,console.warn("Spine Deprecation Warning: TrackEntry.endTime is deprecated, please use trackEnd from now on.")),this.trackTime},set:function(t){i.deprecatedWarning2||(i.deprecatedWarning2=!0,console.warn("Spine Deprecation Warning: TrackEntry.endTime is deprecated, please use trackEnd from now on.")),this.trackTime=t},enumerable:!1,configurable:!0}),i.prototype.loopsCount=function(){return Math.floor(this.trackTime/this.trackEnd)},i.deprecatedWarning1=!1,i.deprecatedWarning2=!1,i}(),Un=function(){function i(t){this.objects=[],this.drainDisabled=!1,this.animState=t}return i.prototype.start=function(t){this.objects.push(Dt.start),this.objects.push(t),this.animState.animationsChanged=!0},i.prototype.interrupt=function(t){this.objects.push(Dt.interrupt),this.objects.push(t)},i.prototype.end=function(t){this.objects.push(Dt.end),this.objects.push(t),this.animState.animationsChanged=!0},i.prototype.dispose=function(t){this.objects.push(Dt.dispose),this.objects.push(t)},i.prototype.complete=function(t){this.objects.push(Dt.complete),this.objects.push(t)},i.prototype.event=function(t,e){this.objects.push(Dt.event),this.objects.push(t),this.objects.push(e)},i.prototype.drain=function(){if(!this.drainDisabled){this.drainDisabled=!0;for(var t=this.objects,e=this.animState.listeners,r=0;r<t.length;r+=2){var a=t[r],n=t[r+1];switch(a){case Dt.start:n.listener&&n.listener.start&&n.listener.start(n);for(var h=0;h<e.length;h++){var f=e[h];f.start&&f.start(n)}break;case Dt.interrupt:n.listener&&n.listener.interrupt&&n.listener.interrupt(n);for(var h=0;h<e.length;h++){var f=e[h];f.interrupt&&f.interrupt(n)}break;case Dt.end:n.listener&&n.listener.end&&n.listener.end(n);for(var h=0;h<e.length;h++){var f=e[h];f.end&&f.end(n)}case Dt.dispose:n.listener&&n.listener.dispose&&n.listener.dispose(n);for(var h=0;h<e.length;h++){var f=e[h];f.dispose&&f.dispose(n)}this.animState.trackEntryPool.free(n);break;case Dt.complete:n.listener&&n.listener.complete&&n.listener.complete(n);for(var h=0;h<e.length;h++){var f=e[h];f.complete&&f.complete(n)}break;case Dt.event:var c=t[r+++2];n.listener&&n.listener.event&&n.listener.event(n,c);for(var h=0;h<e.length;h++){var f=e[h];f.event&&f.event(n,c)}break}}this.clear(),this.drainDisabled=!1}},i.prototype.clear=function(){this.objects.length=0},i}(),Dt;(function(i){i[i.start=0]="start",i[i.interrupt=1]="interrupt",i[i.end=2]="end",i[i.dispose=3]="dispose",i[i.complete=4]="complete",i[i.event=5]="event"})(Dt||(Dt={}));var Ni=function(){function i(){}return i.prototype.start=function(t){},i.prototype.interrupt=function(t){},i.prototype.end=function(t){},i.prototype.dispose=function(t){},i.prototype.complete=function(t){},i.prototype.event=function(t,e){},i}(),pr=0,Ua=1,_a=2,gr=3,Oi=4,Ha=1,Di=2,_n=function(){function i(t){if(this.animationToMixTime={},this.defaultMix=0,!t)throw new Error("skeletonData cannot be null.");this.skeletonData=t}return i.prototype.setMix=function(t,e,r){var a=this.skeletonData.findAnimation(t);if(!a)throw new Error("Animation not found: "+t);var n=this.skeletonData.findAnimation(e);if(!n)throw new Error("Animation not found: "+e);this.setMixWith(a,n,r)},i.prototype.setMixWith=function(t,e,r){if(!t)throw new Error("from cannot be null.");if(!e)throw new Error("to cannot be null.");var a=t.name+"."+e.name;this.animationToMixTime[a]=r},i.prototype.getMix=function(t,e){var r=t.name+"."+e.name,a=this.animationToMixTime[r];return a===void 0?this.defaultMix:a},i}(),Ra=function(){function i(t){this.atlas=t}return i.prototype.loadSequence=function(t,e,r){for(var a=r.regions,n=0,h=a.length;n<h;n++){var f=r.getPath(e,n),c=this.atlas.findRegion(f);if(c==null)throw new Error("Region not found in atlas: "+f+" (sequence: "+t+")");a[n]=c,a[n].renderObject=a[n]}},i.prototype.newRegionAttachment=function(t,e,r,a){var n=new aa(e,r);if(a!=null)this.loadSequence(e,r,a);else{var h=this.atlas.findRegion(r);if(!h)throw new Error("Region not found in atlas: "+r+" (region attachment: "+e+")");h.renderObject=h,n.region=h}return n},i.prototype.newMeshAttachment=function(t,e,r,a){var n=new or(e,r);if(a!=null)this.loadSequence(e,r,a);else{var h=this.atlas.findRegion(r);if(!h)throw new Error("Region not found in atlas: "+r+" (mesh attachment: "+e+")");h.renderObject=h,n.region=h}return n},i.prototype.newBoundingBoxAttachment=function(t,e){return new On(e)},i.prototype.newPathAttachment=function(t,e){return new _e(e)},i.prototype.newPointAttachment=function(t,e){return new Ln(e)},i.prototype.newClippingAttachment=function(t,e){return new Dn(e)},i}(),Vr=function(){function i(t,e,r){if(this.matrix=new Br,this.parent=null,this.children=new Array,this.x=0,this.y=0,this.rotation=0,this.scaleX=0,this.scaleY=0,this.shearX=0,this.shearY=0,this.ax=0,this.ay=0,this.arotation=0,this.ascaleX=0,this.ascaleY=0,this.ashearX=0,this.ashearY=0,this.sorted=!1,this.active=!1,!t)throw new Error("data cannot be null.");if(!e)throw new Error("skeleton cannot be null.");this.data=t,this.skeleton=e,this.parent=r,this.setToSetupPose()}return Object.defineProperty(i.prototype,"worldX",{get:function(){return this.matrix.tx},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"worldY",{get:function(){return this.matrix.ty},enumerable:!1,configurable:!0}),i.prototype.isActive=function(){return this.active},i.prototype.update=function(){this.updateWorldTransformWith(this.ax,this.ay,this.arotation,this.ascaleX,this.ascaleY,this.ashearX,this.ashearY)},i.prototype.updateWorldTransform=function(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)},i.prototype.updateWorldTransformWith=function(t,e,r,a,n,h,f){this.ax=t,this.ay=e,this.arotation=r,this.ascaleX=a,this.ascaleY=n,this.ashearX=h,this.ashearY=f;var c=this.parent,o=this.matrix,s=this.skeleton.scaleX,l=Ht.yDown?-this.skeleton.scaleY:this.skeleton.scaleY;if(!c){var u=this.skeleton,d=r+90+f;o.a=M.cosDeg(r+h)*a*s,o.c=M.cosDeg(d)*n*s,o.b=M.sinDeg(r+h)*a*l,o.d=M.sinDeg(d)*n*l,o.tx=t*s+u.x,o.ty=e*l+u.y;return}var v=c.matrix.a,p=c.matrix.c,y=c.matrix.b,g=c.matrix.d;switch(o.tx=v*t+p*e+c.matrix.tx,o.ty=y*t+g*e+c.matrix.ty,this.data.transformMode){case Q.Normal:{var d=r+90+f,m=M.cosDeg(r+h)*a,w=M.cosDeg(d)*n,x=M.sinDeg(r+h)*a,E=M.sinDeg(d)*n;o.a=v*m+p*x,o.c=v*w+p*E,o.b=y*m+g*x,o.d=y*w+g*E;return}case Q.OnlyTranslation:{var d=r+90+f;o.a=M.cosDeg(r+h)*a,o.c=M.cosDeg(d)*n,o.b=M.sinDeg(r+h)*a,o.d=M.sinDeg(d)*n;break}case Q.NoRotationOrReflection:{var S=v*v+y*y,A=0;S>1e-4?(S=Math.abs(v*g-p*y)/S,v/=s,y/=l,p=y*S,g=v*S,A=Math.atan2(y,v)*M.radDeg):(v=0,y=0,A=90-Math.atan2(g,p)*M.radDeg);var T=r+h-A,C=r+f-A+90,m=M.cosDeg(T)*a,w=M.cosDeg(C)*n,x=M.sinDeg(T)*a,E=M.sinDeg(C)*n;o.a=v*m-p*x,o.c=v*w-p*E,o.b=y*m+g*x,o.d=y*w+g*E;break}case Q.NoScale:case Q.NoScaleOrReflection:{var I=M.cosDeg(r),P=M.sinDeg(r),R=(v*I+p*P)/s,V=(y*I+g*P)/l,S=Math.sqrt(R*R+V*V);S>1e-5&&(S=1/S),R*=S,V*=S,S=Math.sqrt(R*R+V*V),this.data.transformMode==Q.NoScale&&v*g-p*y<0!=(s<0!=l<0)&&(S=-S);var k=Math.PI/2+Math.atan2(V,R),B=Math.cos(k)*S,D=Math.sin(k)*S,m=M.cosDeg(h)*a,w=M.cosDeg(90+f)*n,x=M.sinDeg(h)*a,E=M.sinDeg(90+f)*n;o.a=R*m+B*x,o.c=R*w+B*E,o.b=V*m+D*x,o.d=V*w+D*E;break}}o.a*=s,o.c*=s,o.b*=l,o.d*=l},i.prototype.setToSetupPose=function(){var t=this.data;this.x=t.x,this.y=t.y,this.rotation=t.rotation,this.scaleX=t.scaleX,this.scaleY=t.scaleY,this.shearX=t.shearX,this.shearY=t.shearY},i.prototype.getWorldRotationX=function(){return Math.atan2(this.matrix.b,this.matrix.a)*M.radDeg},i.prototype.getWorldRotationY=function(){return Math.atan2(this.matrix.d,this.matrix.c)*M.radDeg},i.prototype.getWorldScaleX=function(){var t=this.matrix;return Math.sqrt(t.a*t.a+t.b*t.b)},i.prototype.getWorldScaleY=function(){var t=this.matrix;return Math.sqrt(t.c*t.c+t.d*t.d)},i.prototype.updateAppliedTransform=function(){var t=this.parent,e=this.matrix;if(!t){this.ax=e.tx-this.skeleton.x,this.ay=e.ty-this.skeleton.y,this.arotation=Math.atan2(e.b,e.a)*M.radDeg,this.ascaleX=Math.sqrt(e.a*e.a+e.b*e.b),this.ascaleY=Math.sqrt(e.c*e.c+e.d*e.d),this.ashearX=0,this.ashearY=Math.atan2(e.a*e.c+e.b*e.d,e.a*e.d-e.b*e.c)*M.radDeg;return}var r=t.matrix,a=1/(r.a*r.d-r.b*r.c),n=e.tx-r.tx,h=e.ty-r.ty;this.ax=n*r.d*a-h*r.c*a,this.ay=h*r.a*a-n*r.b*a;var f=a*r.d,c=a*r.a,o=a*r.c,s=a*r.b,l=f*e.a-o*e.b,u=f*e.c-o*e.d,d=c*e.b-s*e.a,v=c*e.d-s*e.c;if(this.ashearX=0,this.ascaleX=Math.sqrt(l*l+d*d),this.ascaleX>1e-4){var p=l*v-u*d;this.ascaleY=p/this.ascaleX,this.ashearY=Math.atan2(l*u+d*v,p)*M.radDeg,this.arotation=Math.atan2(d,l)*M.radDeg}else this.ascaleX=0,this.ascaleY=Math.sqrt(u*u+v*v),this.ashearY=0,this.arotation=90-Math.atan2(v,u)*M.radDeg},i.prototype.worldToLocal=function(t){var e=this.matrix,r=e.a,a=e.c,n=e.b,h=e.d,f=1/(r*h-a*n),c=t.x-e.tx,o=t.y-e.ty;return t.x=c*h*f-o*a*f,t.y=o*r*f-c*n*f,t},i.prototype.localToWorld=function(t){var e=this.matrix,r=t.x,a=t.y;return t.x=r*e.a+a*e.c+e.tx,t.y=r*e.b+a*e.d+e.ty,t},i.prototype.worldToLocalRotation=function(t){var e=M.sinDeg(t),r=M.cosDeg(t),a=this.matrix;return Math.atan2(a.a*e-a.b*r,a.d*r-a.c*e)*M.radDeg},i.prototype.localToWorldRotation=function(t){t-=this.rotation-this.shearX;var e=M.sinDeg(t),r=M.cosDeg(t),a=this.matrix;return Math.atan2(r*a.b+e*a.d,r*a.a+e*a.c)*M.radDeg},i.prototype.rotateWorld=function(t){var e=this.matrix,r=e.a,a=e.c,n=e.b,h=e.d,f=M.cosDeg(t),c=M.sinDeg(t);e.a=f*r-c*n,e.c=f*a-c*h,e.b=c*r+f*n,e.d=c*a+f*h},i}(),Ma=function(){function i(t,e,r){if(this.index=0,this.parent=null,this.length=0,this.x=0,this.y=0,this.rotation=0,this.scaleX=1,this.scaleY=1,this.shearX=0,this.shearY=0,this.transformMode=Q.Normal,this.skinRequired=!1,this.color=new G,t<0)throw new Error("index must be >= 0.");if(!e)throw new Error("name cannot be null.");this.index=t,this.name=e,this.parent=r}return i}(),ur=function(){function i(t,e,r){this.name=t,this.order=e,this.skinRequired=r}return i}(),Ia=function(){function i(t,e){if(this.intValue=0,this.floatValue=0,this.stringValue=null,this.time=0,this.volume=0,this.balance=0,!e)throw new Error("data cannot be null.");this.time=t,this.data=e}return i}(),ka=function(){function i(t){this.intValue=0,this.floatValue=0,this.stringValue=null,this.audioPath=null,this.volume=0,this.balance=0,this.name=t}return i}(),Hn=function(){function i(t,e){if(this.bendDirection=0,this.compress=!1,this.stretch=!1,this.mix=1,this.softness=0,this.active=!1,!t)throw new Error("data cannot be null.");if(!e)throw new Error("skeleton cannot be null.");this.data=t,this.mix=t.mix,this.softness=t.softness,this.bendDirection=t.bendDirection,this.compress=t.compress,this.stretch=t.stretch,this.bones=new Array;for(var r=0;r<t.bones.length;r++){var a=e.findBone(t.bones[r].name);if(!a)throw new Error("Couldn't find bone "+t.bones[r].name);this.bones.push(a)}var n=e.findBone(t.target.name);if(!n)throw new Error("Couldn't find bone "+t.target.name);this.target=n}return i.prototype.isActive=function(){return this.active},i.prototype.update=function(){if(this.mix!=0){var t=this.target,e=this.bones;switch(e.length){case 1:this.apply1(e[0],t.worldX,t.worldY,this.compress,this.stretch,this.data.uniform,this.mix);break;case 2:this.apply2(e[0],e[1],t.worldX,t.worldY,this.bendDirection,this.stretch,this.data.uniform,this.softness,this.mix);break}}},i.prototype.apply1=function(t,e,r,a,n,h,f){var c=t.parent.matrix;if(!c)throw new Error("IK bone must have parent.");var o=c.a,s=c.c,l=c.b,u=c.d,d=-t.ashearX-t.arotation,v=0,p=0,y=t.skeleton.scaleX,g=Ht.yDown?-t.skeleton.scaleY:t.skeleton.scaleY;switch(t.data.transformMode){case Q.OnlyTranslation:v=e-t.worldX,p=r-t.worldY,Ht.yDown&&(p=-p);break;case Q.NoRotationOrReflection:var m=Math.abs(o*u-s*l)/(o*o+l*l),w=o/y,x=l/g;s=-x*m*y,u=w*m*g,d+=Math.atan2(x,w)*M.radDeg;default:var E=e-c.tx,S=r-c.ty,A=o*u-s*l;v=(E*u-S*s)/A-t.ax,p=(S*o-E*l)/A-t.ay}d+=Math.atan2(p,v)*M.radDeg,t.ascaleX<0&&(d+=180),d>180?d-=360:d<-180&&(d+=360);var T=t.ascaleX,C=t.ascaleY;if(a||n){switch(t.data.transformMode){case Q.NoScale:case Q.NoScaleOrReflection:v=e-t.worldX,p=r-t.worldY}var I=t.data.length*T,P=Math.sqrt(v*v+p*p);if(a&&P<I||n&&P>I&&I>1e-4){var m=(P/I-1)*f+1;T*=m,h&&(C*=m)}}t.updateWorldTransformWith(t.ax,t.ay,t.arotation+d*f,T,C,t.ashearX,t.ashearY)},i.prototype.apply2=function(t,e,r,a,n,h,f,c,o){var s=t.ax,l=t.ay,u=t.ascaleX,d=t.ascaleY,v=u,p=d,y=e.ascaleX,g=t.matrix,m=0,w=0,x=0;u<0?(u=-u,m=180,x=-1):(m=0,x=1),d<0&&(d=-d,x=-x),y<0?(y=-y,w=180):w=0;var E=e.ax,S=0,A=0,T=0,C=g.a,I=g.c,P=g.b,R=g.d,V=Math.abs(u-d)<=1e-4;!V||h?(S=0,A=C*E+g.tx,T=P*E+g.ty):(S=e.ay,A=C*E+I*S+g.tx,T=P*E+R*S+g.ty);var k=t.parent.matrix;if(!k)throw new Error("IK parent must itself have a parent.");C=k.a,I=k.c,P=k.b,R=k.d;var B=1/(C*R-I*P),D=A-k.tx,L=T-k.ty,H=(D*R-L*I)*B-s,_=(L*C-D*P)*B-l,O=Math.sqrt(H*H+_*_),U=e.data.length*y,W,N;if(O<1e-4){this.apply1(t,r,a,!1,h,!1,o),e.updateWorldTransformWith(E,S,0,e.ascaleX,e.ascaleY,e.ashearX,e.ashearY);return}D=r-k.tx,L=a-k.ty;var F=(D*R-L*I)*B-s,q=(L*C-D*P)*B-l,$=F*F+q*q;if(c!=0){c*=u*(y+1)*.5;var z=Math.sqrt($),j=z-O-U*u+c;if(j>0){var J=Math.min(1,j/(c*2))-1;J=(j-c*(1-J*J))/z,F-=J*F,q-=J*q,$=F*F+q*q}}t:if(V){U*=u;var K=($-O*O-U*U)/(2*O*U);K<-1?(K=-1,N=Math.PI*n):K>1?(K=1,N=0,h&&(C=(Math.sqrt($)/(O+U)-1)*o+1,v*=C,f&&(p*=C))):N=Math.acos(K)*n,C=O+U*K,I=U*Math.sin(N),W=Math.atan2(q*C-F*I,F*C+q*I)}else{C=u*U,I=d*U;var Z=C*C,tt=I*I,ht=Math.atan2(q,F);P=tt*O*O+Z*$-Z*tt;var it=-2*tt*O,ut=tt-Z;if(R=it*it-4*ut*P,R>=0){var ot=Math.sqrt(R);it<0&&(ot=-ot),ot=-(it+ot)*.5;var ft=ot/ut,pt=P/ot,yt=Math.abs(ft)<Math.abs(pt)?ft:pt;if(yt*yt<=$){L=Math.sqrt($-yt*yt)*n,W=ht-Math.atan2(L,yt),N=Math.atan2(L/d,(yt-O)/u);break t}}var Pt=M.PI,Ft=O-C,Yt=Ft*Ft,St=0,Ut=0,Wt=O+C,Vt=Wt*Wt,Bt=0;P=-C*O/(Z-tt),P>=-1&&P<=1&&(P=Math.acos(P),D=C*Math.cos(P)+O,L=I*Math.sin(P),R=D*D+L*L,R<Yt&&(Pt=P,Yt=R,Ft=D,St=L),R>Vt&&(Ut=P,Vt=R,Wt=D,Bt=L)),$<=(Yt+Vt)*.5?(W=ht-Math.atan2(St*n,Ft),N=Pt*n):(W=ht-Math.atan2(Bt*n,Wt),N=Ut*n)}var qt=Math.atan2(S,E)*x,Xt=t.arotation;W=(W-qt)*M.radDeg+m-Xt,W>180?W-=360:W<-180&&(W+=360),t.updateWorldTransformWith(s,l,Xt+W*o,v,p,0,0),Xt=e.arotation,N=((N+qt)*M.radDeg-e.ashearX)*x+w-Xt,N>180?N-=360:N<-180&&(N+=360),e.updateWorldTransformWith(E,S,Xt+N*o,e.ascaleX,e.ascaleY,e.ashearX,e.ashearY)},i}(),Pa=function(i){at(t,i);function t(e){var r=i.call(this,e,0,!1)||this;return r.bones=new Array,r._target=null,r.bendDirection=1,r.compress=!1,r.stretch=!1,r.uniform=!1,r.mix=1,r.softness=0,r}return Object.defineProperty(t.prototype,"target",{get:function(){if(this._target)return this._target;throw new Error("BoneData not set.")},set:function(e){this._target=e},enumerable:!1,configurable:!0}),t}(ur),Va=function(i){at(t,i);function t(e){var r=i.call(this,e,0,!1)||this;return r.bones=new Array,r._target=null,r.positionMode=vt.Fixed,r.spacingMode=At.Fixed,r.rotateMode=gt.Chain,r.offsetRotation=0,r.position=0,r.spacing=0,r.mixRotate=0,r.mixX=0,r.mixY=0,r}return Object.defineProperty(t.prototype,"target",{get:function(){if(this._target)return this._target;throw new Error("SlotData not set.")},set:function(e){this._target=e},enumerable:!1,configurable:!0}),t}(ur),At;(function(i){i[i.Length=0]="Length",i[i.Fixed=1]="Fixed",i[i.Percent=2]="Percent",i[i.Proportional=3]="Proportional"})(At||(At={}));var $n=function(){function i(t,e){if(this.position=0,this.spacing=0,this.mixRotate=0,this.mixX=0,this.mixY=0,this.spaces=new Array,this.positions=new Array,this.world=new Array,this.curves=new Array,this.lengths=new Array,this.segments=new Array,this.active=!1,!t)throw new Error("data cannot be null.");if(!e)throw new Error("skeleton cannot be null.");this.data=t,this.bones=new Array;for(var r=0,a=t.bones.length;r<a;r++){var n=e.findBone(t.bones[r].name);if(!n)throw new Error("Couldn't find bone "+t.bones[r].name+".");this.bones.push(n)}var h=e.findSlot(t.target.name);if(!h)throw new Error("Couldn't find target bone "+t.target.name);this.target=h,this.position=t.position,this.spacing=t.spacing,this.mixRotate=t.mixRotate,this.mixX=t.mixX,this.mixY=t.mixY}return i.prototype.isActive=function(){return this.active},i.prototype.update=function(){var t=this.target.getAttachment();if(t instanceof _e){var e=this.mixRotate,r=this.mixX,a=this.mixY;if(!(e==0&&r==0&&a==0)){var n=this.data,h=n.rotateMode==gt.Tangent,f=n.rotateMode==gt.ChainScale,c=this.bones,o=c.length,s=h?o:o+1,l=Y.setArraySize(this.spaces,s),u=f?this.lengths=Y.setArraySize(this.lengths,o):[],d=this.spacing;switch(n.spacingMode){case At.Percent:if(f)for(var v=0,p=s-1;v<p;v++){var y=c[v],g=y.data.length;if(g<i.epsilon)u[v]=0;else{var m=g*y.matrix.a,w=g*y.matrix.b;u[v]=Math.sqrt(m*m+w*w)}}Y.arrayFill(l,1,s,d);break;case At.Proportional:for(var x=0,v=0,p=s-1;v<p;){var y=c[v],g=y.data.length;if(g<i.epsilon)f&&(u[v]=0),l[++v]=d;else{var m=g*y.matrix.a,w=g*y.matrix.b,E=Math.sqrt(m*m+w*w);f&&(u[v]=E),l[++v]=E,x+=E}}if(x>0){x=s/x*d;for(var v=1;v<s;v++)l[v]*=x}break;default:for(var S=n.spacingMode==At.Length,v=0,p=s-1;v<p;){var y=c[v],g=y.data.length;if(g<i.epsilon)f&&(u[v]=0),l[++v]=d;else{var m=g*y.matrix.a,w=g*y.matrix.b,A=Math.sqrt(m*m+w*w);f&&(u[v]=A),l[++v]=(S?g+d:d)*A/g}}}var T=this.computeWorldPositions(t,s,h),C=T[0],I=T[1],P=n.offsetRotation,R=!1;if(P==0)R=n.rotateMode==gt.Chain;else{R=!1;var V=this.target.bone.matrix;P*=V.a*V.d-V.b*V.c>0?M.degRad:-M.degRad}for(var v=0,V=3;v<o;v++,V+=3){var y=c[v],k=y.matrix;k.tx+=(C-k.tx)*r,k.ty+=(I-k.ty)*a;var m=T[V],w=T[V+1],B=m-C,D=w-I;if(f){var L=u[v];if(L!=0){var H=(Math.sqrt(B*B+D*D)/L-1)*e+1;k.a*=H,k.b*=H}}if(C=m,I=w,e>0){var _=k.a,O=k.c,U=k.b,W=k.d,N=0,F=0,q=0;if(h?N=T[V-1]:l[v+1]==0?N=T[V+2]:N=Math.atan2(D,B),N-=Math.atan2(U,_),R){F=Math.cos(N),q=Math.sin(N);var $=y.data.length;C+=($*(F*_-q*U)-B)*e,I+=($*(q*_+F*U)-D)*e}else N+=P;N>M.PI?N-=M.PI2:N<-M.PI&&(N+=M.PI2),N*=e,F=Math.cos(N),q=Math.sin(N),k.a=F*_-q*U,k.c=F*O-q*W,k.b=q*_+F*U,k.d=q*O+F*W}y.updateAppliedTransform()}}}},i.prototype.computeWorldPositions=function(t,e,r){var a=this.target,n=this.position,h=this.spaces,f=Y.setArraySize(this.positions,e*3+2),c=this.world,o=t.closed,s=t.worldVerticesLength,l=s/6,u=i.NONE;if(!t.constantSpeed){var d=t.lengths;l-=o?1:2;var v=d[l];this.data.positionMode==vt.Percent&&(n*=v);var p;switch(this.data.spacingMode){case At.Percent:p=v;break;case At.Proportional:p=v/e;break;default:p=1}c=Y.setArraySize(this.world,8);for(var y=0,g=0,m=0;y<e;y++,g+=3){var w=h[y]*p;n+=w;var x=n;if(o)x%=v,x<0&&(x+=v),m=0;else if(x<0){u!=i.BEFORE&&(u=i.BEFORE,t.computeWorldVertices(a,2,4,c,0,2)),this.addBeforePosition(x,c,0,f,g);continue}else if(x>v){u!=i.AFTER&&(u=i.AFTER,t.computeWorldVertices(a,s-6,4,c,0,2)),this.addAfterPosition(x-v,c,0,f,g);continue}for(;;m++){var E=d[m];if(!(x>E)){if(m==0)x/=E;else{var S=d[m-1];x=(x-S)/(E-S)}break}}m!=u&&(u=m,o&&m==l?(t.computeWorldVertices(a,s-4,4,c,0,2),t.computeWorldVertices(a,0,4,c,4,2)):t.computeWorldVertices(a,m*6+2,8,c,0,2)),this.addCurvePosition(x,c[0],c[1],c[2],c[3],c[4],c[5],c[6],c[7],f,g,r||y>0&&w==0)}return f}o?(s+=2,c=Y.setArraySize(this.world,s),t.computeWorldVertices(a,2,s-4,c,0,2),t.computeWorldVertices(a,0,2,c,s-4,2),c[s-2]=c[0],c[s-1]=c[1]):(l--,s-=4,c=Y.setArraySize(this.world,s),t.computeWorldVertices(a,2,s,c,0,2));for(var A=Y.setArraySize(this.curves,l),T=0,C=c[0],I=c[1],P=0,R=0,V=0,k=0,B=0,D=0,L=0,H=0,_=0,O=0,U=0,W=0,N=0,F=0,y=0,q=2;y<l;y++,q+=6)P=c[q],R=c[q+1],V=c[q+2],k=c[q+3],B=c[q+4],D=c[q+5],L=(C-P*2+V)*.1875,H=(I-R*2+k)*.1875,_=((P-V)*3-C+B)*.09375,O=((R-k)*3-I+D)*.09375,U=L*2+_,W=H*2+O,N=(P-C)*.75+L+_*.16666667,F=(R-I)*.75+H+O*.16666667,T+=Math.sqrt(N*N+F*F),N+=U,F+=W,U+=_,W+=O,T+=Math.sqrt(N*N+F*F),N+=U,F+=W,T+=Math.sqrt(N*N+F*F),N+=U+_,F+=W+O,T+=Math.sqrt(N*N+F*F),A[y]=T,C=B,I=D;this.data.positionMode==vt.Percent&&(n*=T);var $;switch(this.data.spacingMode){case At.Percent:$=T;break;case At.Proportional:$=T/e;break;default:$=1}for(var z=this.segments,j=0,y=0,g=0,m=0,J=0;y<e;y++,g+=3){var w=h[y]*$;n+=w;var x=n;if(o)x%=T,x<0&&(x+=T),m=0;else if(x<0){this.addBeforePosition(x,c,0,f,g);continue}else if(x>T){this.addAfterPosition(x-T,c,s-4,f,g);continue}for(;;m++){var K=A[m];if(!(x>K)){if(m==0)x/=K;else{var S=A[m-1];x=(x-S)/(K-S)}break}}if(m!=u){u=m;var Z=m*6;for(C=c[Z],I=c[Z+1],P=c[Z+2],R=c[Z+3],V=c[Z+4],k=c[Z+5],B=c[Z+6],D=c[Z+7],L=(C-P*2+V)*.03,H=(I-R*2+k)*.03,_=((P-V)*3-C+B)*.006,O=((R-k)*3-I+D)*.006,U=L*2+_,W=H*2+O,N=(P-C)*.3+L+_*.16666667,F=(R-I)*.3+H+O*.16666667,j=Math.sqrt(N*N+F*F),z[0]=j,Z=1;Z<8;Z++)N+=U,F+=W,U+=_,W+=O,j+=Math.sqrt(N*N+F*F),z[Z]=j;N+=U,F+=W,j+=Math.sqrt(N*N+F*F),z[8]=j,N+=U+_,F+=W+O,j+=Math.sqrt(N*N+F*F),z[9]=j,J=0}for(x*=j;;J++){var tt=z[J];if(!(x>tt)){if(J==0)x/=tt;else{var S=z[J-1];x=J+(x-S)/(tt-S)}break}}this.addCurvePosition(x*.1,C,I,P,R,V,k,B,D,f,g,r||y>0&&w==0)}return f},i.prototype.addBeforePosition=function(t,e,r,a,n){var h=e[r],f=e[r+1],c=e[r+2]-h,o=e[r+3]-f,s=Math.atan2(o,c);a[n]=h+t*Math.cos(s),a[n+1]=f+t*Math.sin(s),a[n+2]=s},i.prototype.addAfterPosition=function(t,e,r,a,n){var h=e[r+2],f=e[r+3],c=h-e[r],o=f-e[r+1],s=Math.atan2(o,c);a[n]=h+t*Math.cos(s),a[n+1]=f+t*Math.sin(s),a[n+2]=s},i.prototype.addCurvePosition=function(t,e,r,a,n,h,f,c,o,s,l,u){if(t==0||isNaN(t)){s[l]=e,s[l+1]=r,s[l+2]=Math.atan2(n-r,a-e);return}var d=t*t,v=d*t,p=1-t,y=p*p,g=y*p,m=p*t,w=m*3,x=p*w,E=w*t,S=e*g+a*x+h*E+c*v,A=r*g+n*x+f*E+o*v;s[l]=S,s[l+1]=A,u&&(t<.001?s[l+2]=Math.atan2(n-r,a-e):s[l+2]=Math.atan2(A-(r*y+n*m*2+f*d),S-(e*y+a*m*2+h*d)))},i.NONE=-1,i.BEFORE=-2,i.AFTER=-3,i.epsilon=1e-5,i}(),Gn=function(){function i(t,e){if(this.darkColor=null,this.attachment=null,this.attachmentState=0,this.sequenceIndex=-1,this.deform=new Array,!t)throw new Error("data cannot be null.");if(!e)throw new Error("bone cannot be null.");this.data=t,this.bone=e,this.color=new G,this.darkColor=t.darkColor?new G:null,this.setToSetupPose(),this.blendMode=this.data.blendMode}return i.prototype.getSkeleton=function(){return this.bone.skeleton},i.prototype.getAttachment=function(){return this.attachment},i.prototype.setAttachment=function(t){this.attachment!=t&&((!(t instanceof re)||!(this.attachment instanceof re)||t.timelineAttachment!=this.attachment.timelineAttachment)&&(this.deform.length=0),this.attachment=t,this.sequenceIndex=-1)},i.prototype.setToSetupPose=function(){this.color.setFromColor(this.data.color),this.darkColor&&this.darkColor.setFromColor(this.data.darkColor),this.data.attachmentName?(this.attachment=null,this.setAttachment(this.bone.skeleton.getAttachment(this.data.index,this.data.attachmentName))):this.attachment=null},i}(),jn=function(){function i(t,e){if(this.mixRotate=0,this.mixX=0,this.mixY=0,this.mixScaleX=0,this.mixScaleY=0,this.mixShearY=0,this.temp=new Be,this.active=!1,!t)throw new Error("data cannot be null.");if(!e)throw new Error("skeleton cannot be null.");this.data=t,this.mixRotate=t.mixRotate,this.mixX=t.mixX,this.mixY=t.mixY,this.mixScaleX=t.mixScaleX,this.mixScaleY=t.mixScaleY,this.mixShearY=t.mixShearY,this.bones=new Array;for(var r=0;r<t.bones.length;r++){var a=e.findBone(t.bones[r].name);if(!a)throw new Error("Couldn't find bone "+t.bones[r].name+".");this.bones.push(a)}var n=e.findBone(t.target.name);if(!n)throw new Error("Couldn't find target bone "+t.target.name+".");this.target=n}return i.prototype.isActive=function(){return this.active},i.prototype.update=function(){this.mixRotate==0&&this.mixX==0&&this.mixY==0&&this.mixScaleX==0&&this.mixScaleX==0&&this.mixShearY==0||(this.data.local?this.data.relative?this.applyRelativeLocal():this.applyAbsoluteLocal():this.data.relative?this.applyRelativeWorld():this.applyAbsoluteWorld())},i.prototype.applyAbsoluteWorld=function(){for(var t=this.mixRotate,e=this.mixX,r=this.mixY,a=this.mixScaleX,n=this.mixScaleY,h=this.mixShearY,f=e!=0||r!=0,c=this.target,o=c.matrix,s=o.a,l=o.c,u=o.b,d=o.d,v=s*d-l*u>0?M.degRad:-M.degRad,p=this.data.offsetRotation*v,y=this.data.offsetShearY*v,g=this.bones,m=0,w=g.length;m<w;m++){var x=g[m],E=x.matrix;if(t!=0){var S=E.a,A=E.c,T=E.b,C=E.d,I=Math.atan2(u,s)-Math.atan2(T,S)+p;I>M.PI?I-=M.PI2:I<-M.PI&&(I+=M.PI2),I*=t;var P=Math.cos(I),R=Math.sin(I);E.a=P*S-R*T,E.c=P*A-R*C,E.b=R*S+P*T,E.d=R*A+P*C}if(f){var V=this.temp;c.localToWorld(V.set(this.data.offsetX,this.data.offsetY)),E.tx+=(V.x-E.tx)*e,E.ty+=(V.y-E.ty)*r}if(a!=0){var k=Math.sqrt(E.a*E.a+E.b*E.b);k!=0&&(k=(k+(Math.sqrt(s*s+u*u)-k+this.data.offsetScaleX)*a)/k),E.a*=k,E.b*=k}if(n!=0){var k=Math.sqrt(E.c*E.c+E.d*E.d);k!=0&&(k=(k+(Math.sqrt(l*l+d*d)-k+this.data.offsetScaleY)*n)/k),E.c*=k,E.d*=k}if(h>0){var A=E.c,C=E.d,B=Math.atan2(C,A),I=Math.atan2(d,l)-Math.atan2(u,s)-(B-Math.atan2(E.b,E.a));I>M.PI?I-=M.PI2:I<-M.PI&&(I+=M.PI2),I=B+(I+y)*h;var k=Math.sqrt(A*A+C*C);E.c=Math.cos(I)*k,E.d=Math.sin(I)*k}x.updateAppliedTransform()}},i.prototype.applyRelativeWorld=function(){for(var t=this.mixRotate,e=this.mixX,r=this.mixY,a=this.mixScaleX,n=this.mixScaleY,h=this.mixShearY,f=e!=0||r!=0,c=this.target,o=c.matrix,s=o.a,l=o.c,u=o.b,d=o.d,v=s*d-l*u>0?M.degRad:-M.degRad,p=this.data.offsetRotation*v,y=this.data.offsetShearY*v,g=this.bones,m=0,w=g.length;m<w;m++){var x=g[m],E=x.matrix;if(t!=0){var S=E.a,A=E.c,T=E.b,C=E.d,I=Math.atan2(u,s)+p;I>M.PI?I-=M.PI2:I<-M.PI&&(I+=M.PI2),I*=t;var P=Math.cos(I),R=Math.sin(I);E.a=P*S-R*T,E.c=P*A-R*C,E.b=R*S+P*T,E.d=R*A+P*C}if(f){var V=this.temp;c.localToWorld(V.set(this.data.offsetX,this.data.offsetY)),E.tx+=V.x*e,E.ty+=V.y*r}if(a!=0){var k=(Math.sqrt(s*s+u*u)-1+this.data.offsetScaleX)*a+1;E.a*=k,E.b*=k}if(n!=0){var k=(Math.sqrt(l*l+d*d)-1+this.data.offsetScaleY)*n+1;E.c*=k,E.d*=k}if(h>0){var I=Math.atan2(d,l)-Math.atan2(u,s);I>M.PI?I-=M.PI2:I<-M.PI&&(I+=M.PI2);var A=E.c,C=E.d;I=Math.atan2(C,A)+(I-M.PI/2+y)*h;var k=Math.sqrt(A*A+C*C);E.c=Math.cos(I)*k,E.d=Math.sin(I)*k}x.updateAppliedTransform()}},i.prototype.applyAbsoluteLocal=function(){for(var t=this.mixRotate,e=this.mixX,r=this.mixY,a=this.mixScaleX,n=this.mixScaleY,h=this.mixShearY,f=this.target,c=this.bones,o=0,s=c.length;o<s;o++){var l=c[o],u=l.arotation;if(t!=0){var d=f.arotation-u+this.data.offsetRotation;d-=(16384-(16384.499999999996-d/360|0))*360,u+=d*t}var v=l.ax,p=l.ay;v+=(f.ax-v+this.data.offsetX)*e,p+=(f.ay-p+this.data.offsetY)*r;var y=l.ascaleX,g=l.ascaleY;a!=0&&y!=0&&(y=(y+(f.ascaleX-y+this.data.offsetScaleX)*a)/y),n!=0&&g!=0&&(g=(g+(f.ascaleY-g+this.data.offsetScaleY)*n)/g);var m=l.ashearY;if(h!=0){var d=f.ashearY-m+this.data.offsetShearY;d-=(16384-(16384.499999999996-d/360|0))*360,m+=d*h}l.updateWorldTransformWith(v,p,u,y,g,l.ashearX,m)}},i.prototype.applyRelativeLocal=function(){for(var t=this.mixRotate,e=this.mixX,r=this.mixY,a=this.mixScaleX,n=this.mixScaleY,h=this.mixShearY,f=this.target,c=this.bones,o=0,s=c.length;o<s;o++){var l=c[o],u=l.arotation+(f.arotation+this.data.offsetRotation)*t,d=l.ax+(f.ax+this.data.offsetX)*e,v=l.ay+(f.ay+this.data.offsetY)*r,p=l.ascaleX*((f.ascaleX-1+this.data.offsetScaleX)*a+1),y=l.ascaleY*((f.ascaleY-1+this.data.offsetScaleY)*n+1),g=l.ashearY+(f.ashearY+this.data.offsetShearY)*h;l.updateWorldTransformWith(d,v,u,p,y,l.ashearX,g)}},i}(),zn=function(){function i(t){if(this._updateCache=new Array,this.skin=null,this.scaleX=1,this.scaleY=1,this.x=0,this.y=0,!t)throw new Error("data cannot be null.");this.data=t,this.bones=new Array;for(var e=0;e<t.bones.length;e++){var r=t.bones[e],a=void 0;if(!r.parent)a=new Vr(r,this,null);else{var n=this.bones[r.parent.index];a=new Vr(r,this,n),n.children.push(a)}this.bones.push(a)}this.slots=new Array,this.drawOrder=new Array;for(var e=0;e<t.slots.length;e++){var h=t.slots[e],a=this.bones[h.boneData.index],f=new Gn(h,a);this.slots.push(f),this.drawOrder.push(f)}this.ikConstraints=new Array;for(var e=0;e<t.ikConstraints.length;e++){var c=t.ikConstraints[e];this.ikConstraints.push(new Hn(c,this))}this.transformConstraints=new Array;for(var e=0;e<t.transformConstraints.length;e++){var o=t.transformConstraints[e];this.transformConstraints.push(new jn(o,this))}this.pathConstraints=new Array;for(var e=0;e<t.pathConstraints.length;e++){var s=t.pathConstraints[e];this.pathConstraints.push(new $n(s,this))}this.color=new G(1,1,1,1),this.updateCache()}return i.prototype.updateCache=function(){var t=this._updateCache;t.length=0;for(var e=this.bones,r=0,a=e.length;r<a;r++){var n=e[r];n.sorted=n.data.skinRequired,n.active=!n.sorted}if(this.skin)for(var h=this.skin.bones,r=0,a=this.skin.bones.length;r<a;r++){var n=this.bones[h[r].index];do n.sorted=!1,n.active=!0,n=n.parent;while(n)}var f=this.ikConstraints,c=this.transformConstraints,o=this.pathConstraints,s=f.length,l=c.length,u=o.length,d=s+l+u;t:for(var r=0;r<d;r++){for(var v=0;v<s;v++){var p=f[v];if(p.data.order==r){this.sortIkConstraint(p);continue t}}for(var v=0;v<l;v++){var p=c[v];if(p.data.order==r){this.sortTransformConstraint(p);continue t}}for(var v=0;v<u;v++){var p=o[v];if(p.data.order==r){this.sortPathConstraint(p);continue t}}}for(var r=0,a=e.length;r<a;r++)this.sortBone(e[r])},i.prototype.sortIkConstraint=function(t){if(t.active=t.target.isActive()&&(!t.data.skinRequired||this.skin&&Y.contains(this.skin.constraints,t.data,!0)),!!t.active){var e=t.target;this.sortBone(e);var r=t.bones,a=r[0];if(this.sortBone(a),r.length==1)this._updateCache.push(t),this.sortReset(a.children);else{var n=r[r.length-1];this.sortBone(n),this._updateCache.push(t),this.sortReset(a.children),n.sorted=!0}}},i.prototype.sortPathConstraint=function(t){if(t.active=t.target.bone.isActive()&&(!t.data.skinRequired||this.skin&&Y.contains(this.skin.constraints,t.data,!0)),!!t.active){var e=t.target,r=e.data.index,a=e.bone;this.skin&&this.sortPathConstraintAttachment(this.skin,r,a),this.data.defaultSkin&&this.data.defaultSkin!=this.skin&&this.sortPathConstraintAttachment(this.data.defaultSkin,r,a);for(var n=0,h=this.data.skins.length;n<h;n++)this.sortPathConstraintAttachment(this.data.skins[n],r,a);var f=e.getAttachment();f instanceof _e&&this.sortPathConstraintAttachmentWith(f,a);for(var c=t.bones,o=c.length,n=0;n<o;n++)this.sortBone(c[n]);this._updateCache.push(t);for(var n=0;n<o;n++)this.sortReset(c[n].children);for(var n=0;n<o;n++)c[n].sorted=!0}},i.prototype.sortTransformConstraint=function(t){if(t.active=t.target.isActive()&&(!t.data.skinRequired||this.skin&&Y.contains(this.skin.constraints,t.data,!0)),!!t.active){this.sortBone(t.target);var e=t.bones,r=e.length;if(t.data.local)for(var a=0;a<r;a++){var n=e[a];this.sortBone(n.parent),this.sortBone(n)}else for(var a=0;a<r;a++)this.sortBone(e[a]);this._updateCache.push(t);for(var a=0;a<r;a++)this.sortReset(e[a].children);for(var a=0;a<r;a++)e[a].sorted=!0}},i.prototype.sortPathConstraintAttachment=function(t,e,r){var a=t.attachments[e];if(a)for(var n in a)this.sortPathConstraintAttachmentWith(a[n],r)},i.prototype.sortPathConstraintAttachmentWith=function(t,e){if(t instanceof _e){var r=t.bones;if(!r)this.sortBone(e);else for(var a=this.bones,n=0,h=r.length;n<h;){var f=r[n++];for(f+=n;n<f;)this.sortBone(a[r[n++]])}}},i.prototype.sortBone=function(t){if(t&&!t.sorted){var e=t.parent;e&&this.sortBone(e),t.sorted=!0,this._updateCache.push(t)}},i.prototype.sortReset=function(t){for(var e=0,r=t.length;e<r;e++){var a=t[e];a.active&&(a.sorted&&this.sortReset(a.children),a.sorted=!1)}},i.prototype.updateWorldTransform=function(){for(var t=this.bones,e=0,r=t.length;e<r;e++){var a=t[e];a.ax=a.x,a.ay=a.y,a.arotation=a.rotation,a.ascaleX=a.scaleX,a.ascaleY=a.scaleY,a.ashearX=a.shearX,a.ashearY=a.shearY}for(var n=this._updateCache,e=0,r=n.length;e<r;e++)n[e].update()},i.prototype.updateWorldTransformWith=function(t){var e=this.getRootBone(),r=t.matrix.a,a=t.matrix.c,n=t.matrix.b,h=t.matrix.d;e.matrix.tx=r*this.x+a*this.y+t.worldX,e.matrix.ty=n*this.x+h*this.y+t.worldY;var f=e.rotation+90+e.shearY,c=M.cosDeg(e.rotation+e.shearX)*e.scaleX,o=M.cosDeg(f)*e.scaleY,s=M.sinDeg(e.rotation+e.shearX)*e.scaleX,l=M.sinDeg(f)*e.scaleY,u=this.scaleX,d=Ht.yDown?-this.scaleY:this.scaleY;e.matrix.a=(r*c+a*s)*u,e.matrix.c=(r*o+a*l)*u,e.matrix.b=(n*c+h*s)*d,e.matrix.d=(n*o+h*l)*d;for(var v=this._updateCache,p=0,y=v.length;p<y;p++){var g=v[p];g!=e&&g.update()}},i.prototype.setToSetupPose=function(){this.setBonesToSetupPose(),this.setSlotsToSetupPose()},i.prototype.setBonesToSetupPose=function(){for(var t=this.bones,e=0,r=t.length;e<r;e++)t[e].setToSetupPose();for(var a=this.ikConstraints,e=0,r=a.length;e<r;e++){var n=a[e];n.mix=n.data.mix,n.softness=n.data.softness,n.bendDirection=n.data.bendDirection,n.compress=n.data.compress,n.stretch=n.data.stretch}for(var h=this.transformConstraints,e=0,r=h.length;e<r;e++){var n=h[e],f=n.data;n.mixRotate=f.mixRotate,n.mixX=f.mixX,n.mixY=f.mixY,n.mixScaleX=f.mixScaleX,n.mixScaleY=f.mixScaleY,n.mixShearY=f.mixShearY}for(var c=this.pathConstraints,e=0,r=c.length;e<r;e++){var n=c[e],f=n.data;n.position=f.position,n.spacing=f.spacing,n.mixRotate=f.mixRotate,n.mixX=f.mixX,n.mixY=f.mixY}},i.prototype.setSlotsToSetupPose=function(){var t=this.slots;Y.arrayCopy(t,0,this.drawOrder,0,t.length);for(var e=0,r=t.length;e<r;e++)t[e].setToSetupPose()},i.prototype.getRootBone=function(){return this.bones.length==0?null:this.bones[0]},i.prototype.findBone=function(t){if(!t)throw new Error("boneName cannot be null.");for(var e=this.bones,r=0,a=e.length;r<a;r++){var n=e[r];if(n.data.name==t)return n}return null},i.prototype.findBoneIndex=function(t){if(!t)throw new Error("boneName cannot be null.");for(var e=this.bones,r=0,a=e.length;r<a;r++)if(e[r].data.name==t)return r;return-1},i.prototype.findSlot=function(t){if(!t)throw new Error("slotName cannot be null.");for(var e=this.slots,r=0,a=e.length;r<a;r++){var n=e[r];if(n.data.name==t)return n}return null},i.prototype.findSlotIndex=function(t){if(!t)throw new Error("slotName cannot be null.");for(var e=this.slots,r=0,a=e.length;r<a;r++)if(e[r].data.name==t)return r;return-1},i.prototype.setSkinByName=function(t){var e=this.data.findSkin(t);if(!e)throw new Error("Skin not found: "+t);this.setSkin(e)},i.prototype.setSkin=function(t){if(t!=this.skin){if(t)if(this.skin)t.attachAll(this,this.skin);else for(var e=this.slots,r=0,a=e.length;r<a;r++){var n=e[r],h=n.data.attachmentName;if(h){var f=t.getAttachment(r,h);f&&n.setAttachment(f)}}this.skin=t,this.updateCache()}},i.prototype.getAttachmentByName=function(t,e){var r=this.data.findSlot(t);if(!r)throw new Error("Can't find slot with name "+t);return this.getAttachment(r.index,e)},i.prototype.getAttachment=function(t,e){if(!e)throw new Error("attachmentName cannot be null.");if(this.skin){var r=this.skin.getAttachment(t,e);if(r)return r}return this.data.defaultSkin?this.data.defaultSkin.getAttachment(t,e):null},i.prototype.setAttachment=function(t,e){if(!t)throw new Error("slotName cannot be null.");for(var r=this.slots,a=0,n=r.length;a<n;a++){var h=r[a];if(h.data.name==t){var f=null;if(e&&(f=this.getAttachment(a,e),!f))throw new Error("Attachment not found: "+e+", for slot: "+t);h.setAttachment(f);return}}throw new Error("Slot not found: "+t)},i.prototype.findIkConstraint=function(t){if(!t)throw new Error("constraintName cannot be null.");for(var e=this.ikConstraints,r=0,a=e.length;r<a;r++){var n=e[r];if(n.data.name==t)return n}return null},i.prototype.findTransformConstraint=function(t){if(!t)throw new Error("constraintName cannot be null.");for(var e=this.transformConstraints,r=0,a=e.length;r<a;r++){var n=e[r];if(n.data.name==t)return n}return null},i.prototype.findPathConstraint=function(t){if(!t)throw new Error("constraintName cannot be null.");for(var e=this.pathConstraints,r=0,a=e.length;r<a;r++){var n=e[r];if(n.data.name==t)return n}return null},i.prototype.getBoundsRect=function(){var t=new Be,e=new Be;return this.getBounds(t,e),{x:t.x,y:t.y,width:e.x,height:e.y}},i.prototype.getBounds=function(t,e,r){if(r===void 0&&(r=new Array(2)),!t)throw new Error("offset cannot be null.");if(!e)throw new Error("size cannot be null.");for(var a=this.drawOrder,n=Number.POSITIVE_INFINITY,h=Number.POSITIVE_INFINITY,f=Number.NEGATIVE_INFINITY,c=Number.NEGATIVE_INFINITY,o=0,s=a.length;o<s;o++){var l=a[o];if(l.bone.active){var u=0,d=null,v=l.getAttachment();if(v instanceof aa)u=8,d=Y.setArraySize(r,u,0),v.computeWorldVertices(l,d,0,2);else if(v instanceof or){var p=v;u=p.worldVerticesLength,d=Y.setArraySize(r,u,0),p.computeWorldVertices(l,0,u,d,0,2)}if(d)for(var y=0,g=d.length;y<g;y+=2){var m=d[y],w=d[y+1];n=Math.min(n,m),h=Math.min(h,w),f=Math.max(f,m),c=Math.max(c,w)}}}t.set(n,h),e.set(f-n,c-h)},Object.defineProperty(i.prototype,"flipX",{get:function(){return this.scaleX==-1},set:function(t){i.deprecatedWarning1||(i.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: `Skeleton.flipX/flipY` was deprecated, please use scaleX/scaleY")),this.scaleX=t?1:-1},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"flipY",{get:function(){return this.scaleY==-1},set:function(t){i.deprecatedWarning1||(i.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: `Skeleton.flipX/flipY` was deprecated, please use scaleX/scaleY")),this.scaleY=t?1:-1},enumerable:!1,configurable:!0}),i.deprecatedWarning1=!1,i}(),Fa=function(){function i(){this.name=null,this.bones=new Array,this.slots=new Array,this.skins=new Array,this.defaultSkin=null,this.events=new Array,this.animations=new Array,this.ikConstraints=new Array,this.transformConstraints=new Array,this.pathConstraints=new Array,this.x=0,this.y=0,this.width=0,this.height=0,this.version=null,this.hash=null,this.fps=0,this.imagesPath=null,this.audioPath=null}return i.prototype.findBone=function(t){if(!t)throw new Error("boneName cannot be null.");for(var e=this.bones,r=0,a=e.length;r<a;r++){var n=e[r];if(n.name==t)return n}return null},i.prototype.findBoneIndex=function(t){if(!t)throw new Error("boneName cannot be null.");for(var e=this.bones,r=0,a=e.length;r<a;r++)if(e[r].name==t)return r;return-1},i.prototype.findSlot=function(t){if(!t)throw new Error("slotName cannot be null.");for(var e=this.slots,r=0,a=e.length;r<a;r++){var n=e[r];if(n.name==t)return n}return null},i.prototype.findSlotIndex=function(t){if(!t)throw new Error("slotName cannot be null.");for(var e=this.slots,r=0,a=e.length;r<a;r++)if(e[r].name==t)return r;return-1},i.prototype.findSkin=function(t){if(!t)throw new Error("skinName cannot be null.");for(var e=this.skins,r=0,a=e.length;r<a;r++){var n=e[r];if(n.name==t)return n}return null},i.prototype.findEvent=function(t){if(!t)throw new Error("eventDataName cannot be null.");for(var e=this.events,r=0,a=e.length;r<a;r++){var n=e[r];if(n.name==t)return n}return null},i.prototype.findAnimation=function(t){if(!t)throw new Error("animationName cannot be null.");for(var e=this.animations,r=0,a=e.length;r<a;r++){var n=e[r];if(n.name==t)return n}return null},i.prototype.findIkConstraint=function(t){if(!t)throw new Error("constraintName cannot be null.");for(var e=this.ikConstraints,r=0,a=e.length;r<a;r++){var n=e[r];if(n.name==t)return n}return null},i.prototype.findTransformConstraint=function(t){if(!t)throw new Error("constraintName cannot be null.");for(var e=this.transformConstraints,r=0,a=e.length;r<a;r++){var n=e[r];if(n.name==t)return n}return null},i.prototype.findPathConstraint=function(t){if(!t)throw new Error("constraintName cannot be null.");for(var e=this.pathConstraints,r=0,a=e.length;r<a;r++){var n=e[r];if(n.name==t)return n}return null},i.prototype.findPathConstraintIndex=function(t){if(t==null)throw new Error("pathConstraintName cannot be null.");for(var e=this.pathConstraints,r=0,a=e.length;r<a;r++)if(e[r].name==t)return r;return-1},i}(),Ya=function(){function i(t,e,r){if(this.index=0,this.color=new G(1,1,1,1),this.darkColor=null,this.attachmentName=null,this.blendMode=wt.NORMAL,t<0)throw new Error("index must be >= 0.");if(!e)throw new Error("name cannot be null.");if(!r)throw new Error("boneData cannot be null.");this.index=t,this.name=e,this.boneData=r}return i}(),Ba=function(i){at(t,i);function t(e){var r=i.call(this,e,0,!1)||this;return r.bones=new Array,r._target=null,r.mixRotate=0,r.mixX=0,r.mixY=0,r.mixScaleX=0,r.mixScaleY=0,r.mixShearY=0,r.offsetRotation=0,r.offsetX=0,r.offsetY=0,r.offsetScaleX=0,r.offsetScaleY=0,r.offsetShearY=0,r.relative=!1,r.local=!1,r}return Object.defineProperty(t.prototype,"target",{get:function(){if(this._target)return this._target;throw new Error("BoneData not set.")},set:function(e){this._target=e},enumerable:!1,configurable:!0}),t}(ur),Fr=function(){function i(t,e,r){this.slotIndex=t,this.name=e,this.attachment=r}return i}(),tr=function(){function i(t){if(this.attachments=new Array,this.bones=Array(),this.constraints=new Array,!t)throw new Error("name cannot be null.");this.name=t}return i.prototype.setAttachment=function(t,e,r){if(!r)throw new Error("attachment cannot be null.");var a=this.attachments;t>=a.length&&(a.length=t+1),a[t]||(a[t]={}),a[t][e]=r},i.prototype.addSkin=function(t){for(var e=0;e<t.bones.length;e++){for(var r=t.bones[e],a=!1,n=0;n<this.bones.length;n++)if(this.bones[n]==r){a=!0;break}a||this.bones.push(r)}for(var e=0;e<t.constraints.length;e++){for(var h=t.constraints[e],a=!1,n=0;n<this.constraints.length;n++)if(this.constraints[n]==h){a=!0;break}a||this.constraints.push(h)}for(var f=t.getAttachments(),e=0;e<f.length;e++){var c=f[e];this.setAttachment(c.slotIndex,c.name,c.attachment)}},i.prototype.copySkin=function(t){for(var e=0;e<t.bones.length;e++){for(var r=t.bones[e],a=!1,n=0;n<this.bones.length;n++)if(this.bones[n]==r){a=!0;break}a||this.bones.push(r)}for(var e=0;e<t.constraints.length;e++){for(var h=t.constraints[e],a=!1,n=0;n<this.constraints.length;n++)if(this.constraints[n]==h){a=!0;break}a||this.constraints.push(h)}for(var f=t.getAttachments(),e=0;e<f.length;e++){var c=f[e];c.attachment&&(c.attachment instanceof or?(c.attachment=c.attachment.newLinkedMesh(),this.setAttachment(c.slotIndex,c.name,c.attachment)):(c.attachment=c.attachment.copy(),this.setAttachment(c.slotIndex,c.name,c.attachment)))}},i.prototype.getAttachment=function(t,e){var r=this.attachments[t];return r?r[e]:null},i.prototype.removeAttachment=function(t,e){var r=this.attachments[t];r&&delete r[e]},i.prototype.getAttachments=function(){for(var t=new Array,e=0;e<this.attachments.length;e++){var r=this.attachments[e];if(r)for(var a in r){var n=r[a];n&&t.push(new Fr(e,a,n))}}return t},i.prototype.getAttachmentsForSlot=function(t,e){var r=this.attachments[t];if(r)for(var a in r){var n=r[a];n&&e.push(new Fr(t,a,n))}},i.prototype.clear=function(){this.attachments.length=0,this.bones.length=0,this.constraints.length=0},i.prototype.attachAll=function(t,e){for(var r=0,a=0;a<t.slots.length;a++){var n=t.slots[a],h=n.getAttachment();if(h&&r<e.attachments.length){var f=e.attachments[r];for(var c in f){var o=f[c];if(h==o){var s=this.getAttachment(r,c);s&&n.setAttachment(s);break}}}r++}},i}(),Zn=function(){function i(t){this.ver40=!1,this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=t}return i.prototype.readSkeletonData=function(t){var e=this.scale,r=new Fa;r.name="";var a=new ze(t),n=a.readInt32(),h=a.readInt32();r.hash=h==0&&n==0?null:h.toString(16)+n.toString(16),r.version=a.readString();var f=r.version.substr(0,3);if(f!=="4.0"&&f!=="4.1"){var c="Spine 4.1 loader cant load version "+r.version+". Please configure your pixi-spine bundle";console.error(c)}this.ver40=f==="4.0",r.x=a.readFloat(),r.y=a.readFloat(),r.width=a.readFloat(),r.height=a.readFloat();var o=a.readBoolean();o&&(r.fps=a.readFloat(),r.imagesPath=a.readString(),r.audioPath=a.readString());var s=0;s=a.readInt(!0);for(var l=0;l<s;l++){var u=a.readString();if(!u)throw new Error("String in string table must not be null.");a.strings.push(u)}s=a.readInt(!0);for(var l=0;l<s;l++){var d=a.readString();if(!d)throw new Error("Bone name must not be null.");var v=l==0?null:r.bones[a.readInt(!0)],p=new Ma(l,d,v);p.rotation=a.readFloat(),p.x=a.readFloat()*e,p.y=a.readFloat()*e,p.scaleX=a.readFloat(),p.scaleY=a.readFloat(),p.shearX=a.readFloat(),p.shearY=a.readFloat(),p.length=a.readFloat()*e,p.transformMode=a.readInt(!0),p.skinRequired=a.readBoolean(),o&&G.rgba8888ToColor(p.color,a.readInt32()),r.bones.push(p)}s=a.readInt(!0);for(var l=0;l<s;l++){var y=a.readString();if(!y)throw new Error("Slot name must not be null.");var g=r.bones[a.readInt(!0)],p=new Ya(l,y,g);G.rgba8888ToColor(p.color,a.readInt32());var m=a.readInt32();m!=-1&&G.rgb888ToColor(p.darkColor=new G,m),p.attachmentName=a.readStringRef(),p.blendMode=a.readInt(!0),r.slots.push(p)}s=a.readInt(!0);for(var l=0,w=void 0;l<s;l++){var x=a.readString();if(!x)throw new Error("IK constraint data name must not be null.");var p=new Pa(x);p.order=a.readInt(!0),p.skinRequired=a.readBoolean(),w=a.readInt(!0);for(var E=0;E<w;E++)p.bones.push(r.bones[a.readInt(!0)]);p.target=r.bones[a.readInt(!0)],p.mix=a.readFloat(),p.softness=a.readFloat()*e,p.bendDirection=a.readByte(),p.compress=a.readBoolean(),p.stretch=a.readBoolean(),p.uniform=a.readBoolean(),r.ikConstraints.push(p)}s=a.readInt(!0);for(var l=0,w=void 0;l<s;l++){var S=a.readString();if(!S)throw new Error("Transform constraint data name must not be null.");var p=new Ba(S);p.order=a.readInt(!0),p.skinRequired=a.readBoolean(),w=a.readInt(!0);for(var E=0;E<w;E++)p.bones.push(r.bones[a.readInt(!0)]);p.target=r.bones[a.readInt(!0)],p.local=a.readBoolean(),p.relative=a.readBoolean(),p.offsetRotation=a.readFloat(),p.offsetX=a.readFloat()*e,p.offsetY=a.readFloat()*e,p.offsetScaleX=a.readFloat(),p.offsetScaleY=a.readFloat(),p.offsetShearY=a.readFloat(),p.mixRotate=a.readFloat(),p.mixX=a.readFloat(),p.mixY=a.readFloat(),p.mixScaleX=a.readFloat(),p.mixScaleY=a.readFloat(),p.mixShearY=a.readFloat(),r.transformConstraints.push(p)}s=a.readInt(!0);for(var l=0,w=void 0;l<s;l++){var A=a.readString();if(!A)throw new Error("Path constraint data name must not be null.");var p=new Va(A);p.order=a.readInt(!0),p.skinRequired=a.readBoolean(),w=a.readInt(!0);for(var E=0;E<w;E++)p.bones.push(r.bones[a.readInt(!0)]);p.target=r.slots[a.readInt(!0)],p.positionMode=a.readInt(!0),p.spacingMode=a.readInt(!0),p.rotateMode=a.readInt(!0),p.offsetRotation=a.readFloat(),p.position=a.readFloat(),p.positionMode==vt.Fixed&&(p.position*=e),p.spacing=a.readFloat(),(p.spacingMode==At.Length||p.spacingMode==At.Fixed)&&(p.spacing*=e),p.mixRotate=a.readFloat(),p.mixX=a.readFloat(),p.mixY=a.readFloat(),r.pathConstraints.push(p)}var T=this.readSkin(a,r,!0,o);T&&(r.defaultSkin=T,r.skins.push(T));{var l=r.skins.length;for(Y.setArraySize(r.skins,s=l+a.readInt(!0));l<s;l++){var C=this.readSkin(a,r,!1,o);if(!C)throw new Error("readSkin() should not have returned null.");r.skins[l]=C}}s=this.linkedMeshes.length;for(var l=0;l<s;l++){var I=this.linkedMeshes[l],C=I.skin?r.findSkin(I.skin):r.defaultSkin;if(!C)throw new Error("Not skin found for linked mesh.");if(!I.parent)throw new Error("Linked mesh parent must not be null");var P=C.getAttachment(I.slotIndex,I.parent);if(!P)throw new Error("Parent mesh not found: "+I.parent);I.mesh.timelineAttachment=I.inheritTimeline?P:I.mesh,I.mesh.setParentMesh(P)}this.linkedMeshes.length=0,s=a.readInt(!0);for(var l=0;l<s;l++){var R=a.readStringRef();if(!R)throw new Error;var p=new ka(R);p.intValue=a.readInt(!1),p.floatValue=a.readFloat(),p.stringValue=a.readString(),p.audioPath=a.readString(),p.audioPath&&(p.volume=a.readFloat(),p.balance=a.readFloat()),r.events.push(p)}s=a.readInt(!0);for(var l=0;l<s;l++){var V=a.readString();if(!V)throw new Error("Animatio name must not be null.");r.animations.push(this.readAnimation(a,V,r))}return r},i.prototype.readSkin=function(t,e,r,a){var n=null,h=0;if(r){if(h=t.readInt(!0),h==0)return null;n=new tr("default")}else{var f=t.readStringRef();if(!f)throw new Error("Skin name must not be null.");n=new tr(f),n.bones.length=t.readInt(!0);for(var c=0,o=n.bones.length;c<o;c++)n.bones[c]=e.bones[t.readInt(!0)];for(var c=0,o=t.readInt(!0);c<o;c++)n.constraints.push(e.ikConstraints[t.readInt(!0)]);for(var c=0,o=t.readInt(!0);c<o;c++)n.constraints.push(e.transformConstraints[t.readInt(!0)]);for(var c=0,o=t.readInt(!0);c<o;c++)n.constraints.push(e.pathConstraints[t.readInt(!0)]);h=t.readInt(!0)}for(var c=0;c<h;c++)for(var s=t.readInt(!0),l=0,u=t.readInt(!0);l<u;l++){var d=t.readStringRef();if(!d)throw new Error("Attachment name must not be null");var v=this.readAttachment(t,e,n,s,d,a);v&&n.setAttachment(s,d,v)}return n},i.prototype.readAttachment=function(t,e,r,a,n,h){var f=this.scale,c=t.readStringRef();switch(c||(c=n),t.readByte()){case et.Region:{var o=t.readStringRef(),s=t.readFloat(),l=t.readFloat(),u=t.readFloat(),d=t.readFloat(),v=t.readFloat(),p=t.readFloat(),y=t.readFloat(),g=t.readInt32(),m=this.readSequence(t);o||(o=c);var w=this.attachmentLoader.newRegionAttachment(r,c,o,m);return w?(w.path=o,w.x=l*f,w.y=u*f,w.scaleX=d,w.scaleY=v,w.rotation=s,w.width=p*f,w.height=y*f,G.rgba8888ToColor(w.color,g),w.sequence=m,m==null&&w.updateRegion(),w):null}case et.BoundingBox:{var x=t.readInt(!0),E=this.readVertices(t,x),g=h?t.readInt32():0,S=this.attachmentLoader.newBoundingBoxAttachment(r,c);return S?(S.worldVerticesLength=x<<1,S.vertices=E.vertices,S.bones=E.bones,h&&G.rgba8888ToColor(S.color,g),S):null}case et.Mesh:{var o=t.readStringRef(),g=t.readInt32(),x=t.readInt(!0),A=this.readFloatArray(t,x<<1,1),T=this.readShortArray(t),E=this.readVertices(t,x),C=t.readInt(!0),m=this.readSequence(t),I=[],p=0,y=0;h&&(I=this.readShortArray(t),p=t.readFloat(),y=t.readFloat()),o||(o=c);var P=this.attachmentLoader.newMeshAttachment(r,c,o,m);return P?(P.path=o,G.rgba8888ToColor(P.color,g),P.bones=E.bones,P.vertices=E.vertices,P.worldVerticesLength=x<<1,P.triangles=T,P.regionUVs=new Float32Array(A),P.hullLength=C<<1,P.sequence=m,h&&(P.edges=I,P.width=p*f,P.height=y*f),P):null}case et.LinkedMesh:{var o=t.readStringRef(),g=t.readInt32(),R=t.readStringRef(),V=t.readStringRef(),k=t.readBoolean(),m=this.readSequence(t),p=0,y=0;h&&(p=t.readFloat(),y=t.readFloat()),o||(o=c);var P=this.attachmentLoader.newMeshAttachment(r,c,o,m);return P?(P.path=o,G.rgba8888ToColor(P.color,g),P.sequence=m,h&&(P.width=p*f,P.height=y*f),this.linkedMeshes.push(new Li(P,R,a,V,k)),P):null}case et.Path:{for(var B=t.readBoolean(),D=t.readBoolean(),x=t.readInt(!0),E=this.readVertices(t,x),L=Y.newArray(x/3,0),H=0,_=L.length;H<_;H++)L[H]=t.readFloat()*f;var g=h?t.readInt32():0,o=this.attachmentLoader.newPathAttachment(r,c);return o?(o.closed=B,o.constantSpeed=D,o.worldVerticesLength=x<<1,o.vertices=E.vertices,o.bones=E.bones,o.lengths=L,h&&G.rgba8888ToColor(o.color,g),o):null}case et.Point:{var s=t.readFloat(),l=t.readFloat(),u=t.readFloat(),g=h?t.readInt32():0,O=this.attachmentLoader.newPointAttachment(r,c);return O?(O.x=l*f,O.y=u*f,O.rotation=s,h&&G.rgba8888ToColor(O.color,g),O):null}case et.Clipping:{var U=t.readInt(!0),x=t.readInt(!0),E=this.readVertices(t,x),g=h?t.readInt32():0,W=this.attachmentLoader.newClippingAttachment(r,c);return W?(W.endSlot=e.slots[U],W.worldVerticesLength=x<<1,W.vertices=E.vertices,W.bones=E.bones,h&&G.rgba8888ToColor(W.color,g),W):null}}return null},i.prototype.readSequence=function(t){if(this.ver40||!t.readBoolean())return null;var e=new na(t.readInt(!0));return e.start=t.readInt(!0),e.digits=t.readInt(!0),e.setupIndex=t.readInt(!0),e},i.prototype.readDeformTimelineType=function(t){return this.ver40?$a:t.readByte()},i.prototype.readVertices=function(t,e){var r=this.scale,a=e<<1,n=new Wi;if(!t.readBoolean())return n.vertices=this.readFloatArray(t,a,r),n;for(var h=new Array,f=new Array,c=0;c<e;c++){var o=t.readInt(!0);f.push(o);for(var s=0;s<o;s++)f.push(t.readInt(!0)),h.push(t.readFloat()*r),h.push(t.readFloat()*r),h.push(t.readFloat())}return n.vertices=Y.toFloatArray(h),n.bones=f,n},i.prototype.readFloatArray=function(t,e,r){var a=new Array(e);if(r==1)for(var n=0;n<e;n++)a[n]=t.readFloat();else for(var n=0;n<e;n++)a[n]=t.readFloat()*r;return a},i.prototype.readShortArray=function(t){for(var e=t.readInt(!0),r=new Array(e),a=0;a<e;a++)r[a]=t.readShort();return r},i.prototype.readAnimation=function(t,e,r){t.readInt(!0);for(var a=new Array,n=this.scale,h=0,f=t.readInt(!0);h<f;h++)for(var c=t.readInt(!0),o=0,s=t.readInt(!0);o<s;o++){var l=t.readByte(),u=t.readInt(!0),d=u-1;switch(l){case Ki:{for(var v=new ye(u,c),p=0;p<u;p++)v.setFrame(p,t.readFloat(),t.readStringRef());a.push(v);break}case Qi:{for(var y=t.readInt(!0),v=new pa(u,y,c),g=t.readFloat(),m=t.readUnsignedByte()/255,w=t.readUnsignedByte()/255,x=t.readUnsignedByte()/255,E=t.readUnsignedByte()/255,p=0,S=0;v.setFrame(p,g,m,w,x,E),p!=d;p++){var A=t.readFloat(),T=t.readUnsignedByte()/255,C=t.readUnsignedByte()/255,I=t.readUnsignedByte()/255,P=t.readUnsignedByte()/255;switch(t.readByte()){case zt:v.setStepped(p);break;case Zt:nt(t,v,S++,p,0,g,A,m,T,1),nt(t,v,S++,p,1,g,A,w,C,1),nt(t,v,S++,p,2,g,A,x,I,1),nt(t,v,S++,p,3,g,A,E,P,1)}g=A,m=T,w=C,x=I,E=P}a.push(v);break}case ts:{for(var y=t.readInt(!0),v=new ga(u,y,c),g=t.readFloat(),m=t.readUnsignedByte()/255,w=t.readUnsignedByte()/255,x=t.readUnsignedByte()/255,p=0,S=0;v.setFrame(p,g,m,w,x),p!=d;p++){var A=t.readFloat(),T=t.readUnsignedByte()/255,C=t.readUnsignedByte()/255,I=t.readUnsignedByte()/255;switch(t.readByte()){case zt:v.setStepped(p);break;case Zt:nt(t,v,S++,p,0,g,A,m,T,1),nt(t,v,S++,p,1,g,A,w,C,1),nt(t,v,S++,p,2,g,A,x,I,1)}g=A,m=T,w=C,x=I}a.push(v);break}case es:{for(var y=t.readInt(!0),v=new ya(u,y,c),g=t.readFloat(),m=t.readUnsignedByte()/255,w=t.readUnsignedByte()/255,x=t.readUnsignedByte()/255,E=t.readUnsignedByte()/255,T=t.readUnsignedByte()/255,C=t.readUnsignedByte()/255,I=t.readUnsignedByte()/255,p=0,S=0;v.setFrame(p,g,m,w,x,E,T,C,I),p!=d;p++){var A=t.readFloat(),R=t.readUnsignedByte()/255,V=t.readUnsignedByte()/255,k=t.readUnsignedByte()/255,B=t.readUnsignedByte()/255,D=t.readUnsignedByte()/255,L=t.readUnsignedByte()/255,H=t.readUnsignedByte()/255;switch(t.readByte()){case zt:v.setStepped(p);break;case Zt:nt(t,v,S++,p,0,g,A,m,R,1),nt(t,v,S++,p,1,g,A,w,V,1),nt(t,v,S++,p,2,g,A,x,k,1),nt(t,v,S++,p,3,g,A,E,B,1),nt(t,v,S++,p,4,g,A,T,D,1),nt(t,v,S++,p,5,g,A,C,L,1),nt(t,v,S++,p,6,g,A,I,H,1)}g=A,m=R,w=V,x=k,E=B,T=D,C=L,I=H}a.push(v);break}case rs:{for(var y=t.readInt(!0),v=new wa(u,y,c),g=t.readFloat(),m=t.readUnsignedByte()/255,w=t.readUnsignedByte()/255,x=t.readUnsignedByte()/255,T=t.readUnsignedByte()/255,C=t.readUnsignedByte()/255,I=t.readUnsignedByte()/255,p=0,S=0;v.setFrame(p,g,m,w,x,T,C,I),p!=d;p++){var A=t.readFloat(),R=t.readUnsignedByte()/255,V=t.readUnsignedByte()/255,k=t.readUnsignedByte()/255,D=t.readUnsignedByte()/255,L=t.readUnsignedByte()/255,H=t.readUnsignedByte()/255;switch(t.readByte()){case zt:v.setStepped(p);break;case Zt:nt(t,v,S++,p,0,g,A,m,R,1),nt(t,v,S++,p,1,g,A,w,V,1),nt(t,v,S++,p,2,g,A,x,k,1),nt(t,v,S++,p,3,g,A,T,D,1),nt(t,v,S++,p,4,g,A,C,L,1),nt(t,v,S++,p,5,g,A,I,H,1)}g=A,m=R,w=V,x=k,T=D,C=L,I=H}a.push(v);break}case as:{for(var v=new ma(u,t.readInt(!0),c),g=t.readFloat(),E=t.readUnsignedByte()/255,p=0,S=0;v.setFrame(p,g,E),p!=d;p++){var A=t.readFloat(),P=t.readUnsignedByte()/255;switch(t.readByte()){case zt:v.setStepped(p);break;case Zt:nt(t,v,S++,p,0,g,A,E,P,1)}g=A,E=P}a.push(v)}}}for(var h=0,f=t.readInt(!0);h<f;h++)for(var _=t.readInt(!0),o=0,s=t.readInt(!0);o<s;o++){var O=t.readByte(),u=t.readInt(!0),y=t.readInt(!0);switch(O){case qi:a.push(se(t,new He(u,y,_),1));break;case Ui:a.push(mr(t,new sa(u,y,_),n));break;case _i:a.push(se(t,new oa(u,y,_),n));break;case Hi:a.push(se(t,new ha(u,y,_),n));break;case $i:a.push(mr(t,new la(u,y,_),1));break;case Gi:a.push(se(t,new fa(u,y,_),1));break;case ji:a.push(se(t,new ua(u,y,_),1));break;case zi:a.push(mr(t,new ca(u,y,_),1));break;case Zi:a.push(se(t,new va(u,y,_),1));break;case Ji:a.push(se(t,new da(u,y,_),1))}}for(var h=0,f=t.readInt(!0);h<f;h++){for(var U=t.readInt(!0),u=t.readInt(!0),d=u-1,v=new Ea(u,t.readInt(!0),U),g=t.readFloat(),W=t.readFloat(),N=t.readFloat()*n,p=0,S=0;v.setFrame(p,g,W,N,t.readByte(),t.readBoolean(),t.readBoolean()),p!=d;p++){var A=t.readFloat(),F=t.readFloat(),q=t.readFloat()*n;switch(t.readByte()){case zt:v.setStepped(p);break;case Zt:nt(t,v,S++,p,0,g,A,W,F,1),nt(t,v,S++,p,1,g,A,N,q,n)}g=A,W=F,N=q}a.push(v)}for(var h=0,f=t.readInt(!0);h<f;h++){for(var U=t.readInt(!0),u=t.readInt(!0),d=u-1,v=new Sa(u,t.readInt(!0),U),g=t.readFloat(),$=t.readFloat(),z=t.readFloat(),j=t.readFloat(),J=t.readFloat(),K=t.readFloat(),Z=t.readFloat(),p=0,S=0;v.setFrame(p,g,$,z,j,J,K,Z),p!=d;p++){var A=t.readFloat(),tt=t.readFloat(),ht=t.readFloat(),it=t.readFloat(),ut=t.readFloat(),ot=t.readFloat(),ft=t.readFloat();switch(t.readByte()){case zt:v.setStepped(p);break;case Zt:nt(t,v,S++,p,0,g,A,$,tt,1),nt(t,v,S++,p,1,g,A,z,ht,1),nt(t,v,S++,p,2,g,A,j,it,1),nt(t,v,S++,p,3,g,A,J,ut,1),nt(t,v,S++,p,4,g,A,K,ot,1),nt(t,v,S++,p,5,g,A,Z,ft,1)}g=A,$=tt,z=ht,j=it,J=ut,K=ot,Z=ft}a.push(v)}for(var h=0,f=t.readInt(!0);h<f;h++)for(var U=t.readInt(!0),pt=r.pathConstraints[U],o=0,s=t.readInt(!0);o<s;o++)switch(t.readByte()){case is:a.push(se(t,new Aa(t.readInt(!0),t.readInt(!0),U),pt.positionMode==vt.Fixed?n:1));break;case ss:a.push(se(t,new ba(t.readInt(!0),t.readInt(!0),U),pt.spacingMode==At.Length||pt.spacingMode==At.Fixed?n:1));break;case os:for(var v=new Ta(t.readInt(!0),t.readInt(!0),U),g=t.readFloat(),$=t.readFloat(),z=t.readFloat(),j=t.readFloat(),p=0,S=0,d=v.getFrameCount()-1;v.setFrame(p,g,$,z,j),p!=d;p++){var A=t.readFloat(),tt=t.readFloat(),ht=t.readFloat(),it=t.readFloat();switch(t.readByte()){case zt:v.setStepped(p);break;case Zt:nt(t,v,S++,p,0,g,A,$,tt,1),nt(t,v,S++,p,1,g,A,z,ht,1),nt(t,v,S++,p,2,g,A,j,it,1)}g=A,$=tt,z=ht,j=it}a.push(v)}for(var h=0,f=t.readInt(!0);h<f;h++)for(var yt=r.skins[t.readInt(!0)],o=0,s=t.readInt(!0);o<s;o++)for(var c=t.readInt(!0),Pt=0,Ft=t.readInt(!0);Pt<Ft;Pt++){var Yt=t.readStringRef();if(!Yt)throw new Error("attachmentName must not be null.");var St=yt.getAttachment(c,Yt),l=this.readDeformTimelineType(t),u=t.readInt(!0),d=u-1;switch(l){case $a:{for(var Ut=St,Wt=Ut.bones,Vt=Ut.vertices,Bt=Wt?Vt.length/3*2:Vt.length,y=t.readInt(!0),v=new xa(u,y,c,Ut),g=t.readFloat(),p=0,S=0;;p++){var qt=void 0,Xt=t.readInt(!0);if(Xt==0)qt=Wt?Y.newFloatArray(Bt):Vt;else{qt=Y.newFloatArray(Bt);var de=t.readInt(!0);if(Xt+=de,n==1)for(var Tt=de;Tt<Xt;Tt++)qt[Tt]=t.readFloat();else for(var Tt=de;Tt<Xt;Tt++)qt[Tt]=t.readFloat()*n;if(!Wt)for(var Tt=0,Se=qt.length;Tt<Se;Tt++)qt[Tt]+=Vt[Tt]}if(v.setFrame(p,g,qt),p==d)break;var A=t.readFloat();switch(t.readByte()){case zt:v.setStepped(p);break;case Zt:nt(t,v,S++,p,0,g,A,0,1,1)}g=A}a.push(v);break}case ns:{for(var v=new Ca(u,c,St),p=0;p<u;p++){var g=t.readFloat(),ke=t.readInt32();v.setFrame(p,g,ia[ke&15],ke>>4,t.readFloat())}a.push(v);break}}}var ct=t.readInt(!0);if(ct>0){for(var v=new Re(ct),ie=r.slots.length,h=0;h<ct;h++){for(var g=t.readFloat(),Pe=t.readInt(!0),oe=Y.newArray(ie,0),o=ie-1;o>=0;o--)oe[o]=-1;for(var Ve=Y.newArray(ie-Pe,0),he=0,le=0,o=0;o<Pe;o++){for(var c=t.readInt(!0);he!=c;)Ve[le++]=he++;oe[he+t.readInt(!0)]=he++}for(;he<ie;)Ve[le++]=he++;for(var o=ie-1;o>=0;o--)oe[o]==-1&&(oe[o]=Ve[--le]);v.setFrame(h,g,oe)}a.push(v)}var Ae=t.readInt(!0);if(Ae>0){for(var v=new fr(Ae),h=0;h<Ae;h++){var g=t.readFloat(),fe=r.events[t.readInt(!0)],$t=new Ia(g,fe);$t.intValue=t.readInt(!1),$t.floatValue=t.readFloat(),$t.stringValue=t.readBoolean()?t.readString():fe.stringValue,$t.data.audioPath&&($t.volume=t.readFloat(),$t.balance=t.readFloat()),v.setFrame(h,$t)}a.push(v)}for(var pe=0,h=0,f=a.length;h<f;h++)pe=Math.max(pe,a[h].getDuration());return new hr(e,a,pe)},i.BlendModeValues=[wt.NORMAL,wt.ADD,wt.MULTIPLY,wt.SCREEN],i}(),Li=function(){function i(t,e,r,a,n){this.mesh=t,this.skin=e,this.slotIndex=r,this.parent=a,this.inheritTimeline=n}return i}(),Wi=function(){function i(t,e){t===void 0&&(t=null),e===void 0&&(e=null),this.bones=t,this.vertices=e}return i}();function se(i,t,e){for(var r=i.readFloat(),a=i.readFloat()*e,n=0,h=0,f=t.getFrameCount()-1;t.setFrame(n,r,a),n!=f;n++){var c=i.readFloat(),o=i.readFloat()*e;switch(i.readByte()){case zt:t.setStepped(n);break;case Zt:nt(i,t,h++,n,0,r,c,a,o,e)}r=c,a=o}return t}function mr(i,t,e){for(var r=i.readFloat(),a=i.readFloat()*e,n=i.readFloat()*e,h=0,f=0,c=t.getFrameCount()-1;t.setFrame(h,r,a,n),h!=c;h++){var o=i.readFloat(),s=i.readFloat()*e,l=i.readFloat()*e;switch(i.readByte()){case zt:t.setStepped(h);break;case Zt:nt(i,t,f++,h,0,r,o,a,s,e),nt(i,t,f++,h,1,r,o,n,l,e)}r=o,a=s,n=l}return t}function nt(i,t,e,r,a,n,h,f,c,o){t.setBezier(e,r,a,n,f,i.readFloat(),i.readFloat()*o,i.readFloat(),i.readFloat()*o,h,c)}var qi=0,Ui=1,_i=2,Hi=3,$i=4,Gi=5,ji=6,zi=7,Zi=8,Ji=9,Ki=0,Qi=1,ts=2,es=3,rs=4,as=5,$a=0,ns=1,is=0,ss=1,os=2,zt=1,Zt=2,hs=function(i){at(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}return t}(ar),Jn=function(){function i(t){this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=t}return i.prototype.readSkeletonData=function(t){var e=this.scale,r=new Fa,a=typeof t=="string"?JSON.parse(t):t,n=a.skeleton;if(n){r.hash=n.hash,r.version=n.spine;var h=r.version.substr(0,3);if(h!=="4.0"&&h!=="4.1"){var f="Spine 4.1 loader cant load version "+n.spine+". Please configure your pixi-spine bundle";console.error(f)}r.x=n.x,r.y=n.y,r.width=n.width,r.height=n.height,r.fps=n.fps,r.imagesPath=n.images}if(a.bones)for(var c=0;c<a.bones.length;c++){var o=a.bones[c],s=null,l=X(o,"parent",null);if(l!=null&&(s=r.findBone(l),s==null))throw new Error("Parent bone not found: "+l);var u=new Ma(r.bones.length,o.name,s);u.length=X(o,"length",0)*e,u.x=X(o,"x",0)*e,u.y=X(o,"y",0)*e,u.rotation=X(o,"rotation",0),u.scaleX=X(o,"scaleX",1),u.scaleY=X(o,"scaleY",1),u.shearX=X(o,"shearX",0),u.shearY=X(o,"shearY",0),u.transformMode=Y.enumValue(Q,X(o,"transform","Normal")),u.skinRequired=X(o,"skin",!1);var d=X(o,"color",null);d&&u.color.setFromString(d),r.bones.push(u)}if(a.slots)for(var c=0;c<a.slots.length;c++){var v=a.slots[c],p=r.findBone(v.bone);if(!p)throw new Error("Couldn't find bone "+v.bone+" for slot "+v.name);var u=new Ya(r.slots.length,v.name,p),d=X(v,"color",null);d&&u.color.setFromString(d);var y=X(v,"dark",null);y&&(u.darkColor=G.fromString(y)),u.attachmentName=X(v,"attachment",null),u.blendMode=i.blendModeFromString(X(v,"blend","normal")),r.slots.push(u)}if(a.ik)for(var c=0;c<a.ik.length;c++){var g=a.ik[c],u=new Pa(g.name);u.order=X(g,"order",0),u.skinRequired=X(g,"skin",!1);for(var m=0;m<g.bones.length;m++){var w=g.bones[m],x=r.findBone(w);if(x==null)throw new Error("IK bone not found: "+w);u.bones.push(x)}u.target=r.findBone(g.target),u.mix=X(g,"mix",1),u.softness=X(g,"softness",0)*e,u.bendDirection=X(g,"bendPositive",!0)?1:-1,u.compress=X(g,"compress",!1),u.stretch=X(g,"stretch",!1),u.uniform=X(g,"uniform",!1),r.ikConstraints.push(u)}if(a.transform)for(var c=0;c<a.transform.length;c++){var g=a.transform[c],u=new Ba(g.name);u.order=X(g,"order",0),u.skinRequired=X(g,"skin",!1);for(var m=0;m<g.bones.length;m++){var w=g.bones[m],x=r.findBone(w);if(!x)throw new Error("Couldn't find bone "+w+" for transform constraint "+g.name+".");u.bones.push(x)}var E=g.target,S=r.findBone(E);if(!S)throw new Error("Couldn't find target bone "+E+" for transform constraint "+g.name+".");u.target=S,u.local=X(g,"local",!1),u.relative=X(g,"relative",!1),u.offsetRotation=X(g,"rotation",0),u.offsetX=X(g,"x",0)*e,u.offsetY=X(g,"y",0)*e,u.offsetScaleX=X(g,"scaleX",0),u.offsetScaleY=X(g,"scaleY",0),u.offsetShearY=X(g,"shearY",0),u.mixRotate=X(g,"mixRotate",1),u.mixX=X(g,"mixX",1),u.mixY=X(g,"mixY",u.mixX),u.mixScaleX=X(g,"mixScaleX",1),u.mixScaleY=X(g,"mixScaleY",u.mixScaleX),u.mixShearY=X(g,"mixShearY",1),r.transformConstraints.push(u)}if(a.path)for(var c=0;c<a.path.length;c++){var g=a.path[c],u=new Va(g.name);u.order=X(g,"order",0),u.skinRequired=X(g,"skin",!1);for(var m=0;m<g.bones.length;m++){var w=g.bones[m],x=r.findBone(w);if(!x)throw new Error("Couldn't find bone "+w+" for path constraint "+g.name+".");u.bones.push(x)}var E=g.target,S=r.findSlot(E);if(!S)throw new Error("Couldn't find target slot "+E+" for path constraint "+g.name+".");u.target=S,u.positionMode=Y.enumValue(vt,X(g,"positionMode","Percent")),u.spacingMode=Y.enumValue(At,X(g,"spacingMode","Length")),u.rotateMode=Y.enumValue(gt,X(g,"rotateMode","Tangent")),u.offsetRotation=X(g,"rotation",0),u.position=X(g,"position",0),u.positionMode==vt.Fixed&&(u.position*=e),u.spacing=X(g,"spacing",0),(u.spacingMode==At.Length||u.spacingMode==At.Fixed)&&(u.spacing*=e),u.mixRotate=X(g,"mixRotate",1),u.mixX=X(g,"mixX",1),u.mixY=X(g,"mixY",u.mixX),r.pathConstraints.push(u)}if(a.skins)for(var c=0;c<a.skins.length;c++){var A=a.skins[c],T=new tr(A.name);if(A.bones)for(var m=0;m<A.bones.length;m++){var w=A.bones[m],x=r.findBone(w);if(!x)throw new Error("Couldn't find bone "+w+" for skin "+A.name+".");T.bones.push(x)}if(A.ik)for(var m=0;m<A.ik.length;m++){var C=A.ik[m],I=r.findIkConstraint(C);if(!I)throw new Error("Couldn't find IK constraint "+C+" for skin "+A.name+".");T.constraints.push(I)}if(A.transform)for(var m=0;m<A.transform.length;m++){var C=A.transform[m],I=r.findTransformConstraint(C);if(!I)throw new Error("Couldn't find transform constraint "+C+" for skin "+A.name+".");T.constraints.push(I)}if(A.path)for(var m=0;m<A.path.length;m++){var C=A.path[m],I=r.findPathConstraint(C);if(!I)throw new Error("Couldn't find path constraint "+C+" for skin "+A.name+".");T.constraints.push(I)}for(var P in A.attachments){var R=r.findSlot(P);if(!R)throw new Error("Couldn't find slot "+P+" for skin "+A.name+".");var v=A.attachments[P];for(var V in v){var k=this.readAttachment(v[V],T,R.index,V,r);k&&T.setAttachment(R.index,V,k)}}r.skins.push(T),T.name=="default"&&(r.defaultSkin=T)}for(var c=0,B=this.linkedMeshes.length;c<B;c++){var D=this.linkedMeshes[c],T=D.skin?r.findSkin(D.skin):r.defaultSkin;if(!T)throw new Error("Skin not found: "+D.skin);var L=T.getAttachment(D.slotIndex,D.parent);if(!L)throw new Error("Parent mesh not found: "+D.parent);D.mesh.timelineAttachment=D.inheritTimeline?L:D.mesh,D.mesh.setParentMesh(L)}if(this.linkedMeshes.length=0,a.events)for(var H in a.events){var _=a.events[H],u=new ka(H);u.intValue=X(_,"int",0),u.floatValue=X(_,"float",0),u.stringValue=X(_,"string",""),u.audioPath=X(_,"audio",null),u.audioPath&&(u.volume=X(_,"volume",1),u.balance=X(_,"balance",0)),r.events.push(u)}if(a.animations)for(var O in a.animations){var U=a.animations[O];this.readAnimation(U,O,r)}return r},i.prototype.readAttachment=function(t,e,r,a,n){var h=this.scale;switch(a=X(t,"name",a),X(t,"type","region")){case"region":{var f=X(t,"path",a),c=this.readSequence(X(t,"sequence",null)),o=this.attachmentLoader.newRegionAttachment(e,a,f,c);if(!o)return null;o.path=f,o.x=X(t,"x",0)*h,o.y=X(t,"y",0)*h,o.scaleX=X(t,"scaleX",1),o.scaleY=X(t,"scaleY",1),o.rotation=X(t,"rotation",0),o.width=t.width*h,o.height=t.height*h,o.sequence=c;var s=X(t,"color",null);return s&&o.color.setFromString(s),o}case"boundingbox":{var l=this.attachmentLoader.newBoundingBoxAttachment(e,a);if(!l)return null;this.readVertices(t,l,t.vertexCount<<1);var s=X(t,"color",null);return s&&l.color.setFromString(s),l}case"mesh":case"linkedmesh":{var f=X(t,"path",a),c=this.readSequence(X(t,"sequence",null)),u=this.attachmentLoader.newMeshAttachment(e,a,f,c);if(!u)return null;u.path=f;var s=X(t,"color",null);s&&u.color.setFromString(s),u.width=X(t,"width",0)*h,u.height=X(t,"height",0)*h,u.sequence=c;var d=X(t,"parent",null);if(d)return this.linkedMeshes.push(new ls(u,X(t,"skin",null),r,d,X(t,"timelines",!0))),u;var v=t.uvs;return this.readVertices(t,u,v.length),u.triangles=t.triangles,u.regionUVs=new Float32Array(v),u.edges=X(t,"edges",null),u.hullLength=X(t,"hull",0)*2,u}case"path":{var f=this.attachmentLoader.newPathAttachment(e,a);if(!f)return null;f.closed=X(t,"closed",!1),f.constantSpeed=X(t,"constantSpeed",!0);var p=t.vertexCount;this.readVertices(t,f,p<<1);for(var y=Y.newArray(p/3,0),g=0;g<t.lengths.length;g++)y[g]=t.lengths[g]*h;f.lengths=y;var s=X(t,"color",null);return s&&f.color.setFromString(s),f}case"point":{var m=this.attachmentLoader.newPointAttachment(e,a);if(!m)return null;m.x=X(t,"x",0)*h,m.y=X(t,"y",0)*h,m.rotation=X(t,"rotation",0);var s=X(t,"color",null);return s&&m.color.setFromString(s),m}case"clipping":{var w=this.attachmentLoader.newClippingAttachment(e,a);if(!w)return null;var x=X(t,"end",null);if(x!=null){var E=n.findSlot(x);if(E==null)throw new Error("Clipping end slot not found: "+x);w.endSlot=E}var p=t.vertexCount;this.readVertices(t,w,p<<1);var s=X(t,"color",null);return s&&w.color.setFromString(s),w}}return null},i.prototype.readSequence=function(t){if(t==null)return null;var e=new na(X(t,"count",0));return e.start=X(t,"start",1),e.digits=X(t,"digits",0),e.setupIndex=X(t,"setup",0),e},i.prototype.readVertices=function(t,e,r){var a=this.scale;e.worldVerticesLength=r;var n=t.vertices;if(r==n.length){var h=Y.toFloatArray(n);if(a!=1)for(var f=0,c=n.length;f<c;f++)h[f]*=a;e.vertices=h;return}for(var o=new Array,s=new Array,f=0,c=n.length;f<c;){var l=n[f++];s.push(l);for(var u=f+l*4;f<u;f+=4)s.push(n[f]),o.push(n[f+1]*a),o.push(n[f+2]*a),o.push(n[f+3])}e.bones=s,e.vertices=Y.toFloatArray(o)},i.prototype.readAnimation=function(t,e,r){var a=this.scale,n=new Array;if(t.slots)for(var h in t.slots){var f=t.slots[h],c=r.findSlot(h);if(!c)throw new Error("Slot not found: "+h);var o=c.index;for(var s in f){var l=f[s];if(l){var u=l.length;if(s=="attachment"){for(var d=new ye(u,o),v=0;v<u;v++){var p=l[v];d.setFrame(v,X(p,"time",0),X(p,"name",null))}n.push(d)}else if(s=="rgba"){for(var d=new pa(u,u<<2,o),p=l[0],y=X(p,"time",0),g=G.fromString(p.color),v=0,m=0;;v++){d.setFrame(v,y,g.r,g.g,g.b,g.a);var w=l[v+1];if(!w){d.shrink(m);break}var x=X(w,"time",0),E=G.fromString(w.color),S=p.curve;S&&(m=st(S,d,m,v,0,y,x,g.r,E.r,1),m=st(S,d,m,v,1,y,x,g.g,E.g,1),m=st(S,d,m,v,2,y,x,g.b,E.b,1),m=st(S,d,m,v,3,y,x,g.a,E.a,1)),y=x,g=E,p=w}n.push(d)}else if(s=="rgb"){for(var d=new ga(u,u*3,o),p=l[0],y=X(p,"time",0),g=G.fromString(p.color),v=0,m=0;;v++){d.setFrame(v,y,g.r,g.g,g.b);var w=l[v+1];if(!w){d.shrink(m);break}var x=X(w,"time",0),E=G.fromString(w.color),S=p.curve;S&&(m=st(S,d,m,v,0,y,x,g.r,E.r,1),m=st(S,d,m,v,1,y,x,g.g,E.g,1),m=st(S,d,m,v,2,y,x,g.b,E.b,1)),y=x,g=E,p=w}n.push(d)}else if(s=="alpha")n.push(ee(l,new ma(u,u,o),0,1));else if(s=="rgba2"){for(var d=new ya(u,u*7,o),p=l[0],y=X(p,"time",0),g=G.fromString(p.light),A=G.fromString(p.dark),v=0,m=0;;v++){d.setFrame(v,y,g.r,g.g,g.b,g.a,A.r,A.g,A.b);var w=l[v+1];if(!w){d.shrink(m);break}var x=X(w,"time",0),E=G.fromString(w.light),T=G.fromString(w.dark),S=p.curve;S&&(m=st(S,d,m,v,0,y,x,g.r,E.r,1),m=st(S,d,m,v,1,y,x,g.g,E.g,1),m=st(S,d,m,v,2,y,x,g.b,E.b,1),m=st(S,d,m,v,3,y,x,g.a,E.a,1),m=st(S,d,m,v,4,y,x,A.r,T.r,1),m=st(S,d,m,v,5,y,x,A.g,T.g,1),m=st(S,d,m,v,6,y,x,A.b,T.b,1)),y=x,g=E,A=T,p=w}n.push(d)}else if(s=="rgb2"){for(var d=new wa(u,u*6,o),p=l[0],y=X(p,"time",0),g=G.fromString(p.light),A=G.fromString(p.dark),v=0,m=0;;v++){d.setFrame(v,y,g.r,g.g,g.b,A.r,A.g,A.b);var w=l[v+1];if(!w){d.shrink(m);break}var x=X(w,"time",0),E=G.fromString(w.light),T=G.fromString(w.dark),S=p.curve;S&&(m=st(S,d,m,v,0,y,x,g.r,E.r,1),m=st(S,d,m,v,1,y,x,g.g,E.g,1),m=st(S,d,m,v,2,y,x,g.b,E.b,1),m=st(S,d,m,v,3,y,x,A.r,T.r,1),m=st(S,d,m,v,4,y,x,A.g,T.g,1),m=st(S,d,m,v,5,y,x,A.b,T.b,1)),y=x,g=E,A=T,p=w}n.push(d)}}}}if(t.bones)for(var C in t.bones){var I=t.bones[C],P=r.findBone(C);if(!P)throw new Error("Bone not found: "+C);var R=P.index;for(var s in I){var l=I[s],V=l.length;if(V!=0){if(s==="rotate")n.push(ee(l,new He(V,V,R),0,1));else if(s==="translate"){var d=new sa(V,V<<1,R);n.push(yr(l,d,"x","y",0,a))}else if(s==="translatex"){var d=new oa(V,V,R);n.push(ee(l,d,0,a))}else if(s==="translatey"){var d=new ha(V,V,R);n.push(ee(l,d,0,a))}else if(s==="scale"){var d=new la(V,V<<1,R);n.push(yr(l,d,"x","y",1,1))}else if(s==="scalex"){var d=new fa(V,V,R);n.push(ee(l,d,1,1))}else if(s==="scaley"){var d=new ua(V,V,R);n.push(ee(l,d,1,1))}else if(s==="shear"){var d=new ca(V,V<<1,R);n.push(yr(l,d,"x","y",0,1))}else if(s==="shearx"){var d=new va(V,V,R);n.push(ee(l,d,0,1))}else if(s==="sheary"){var d=new da(V,V,R);n.push(ee(l,d,0,1))}}}}if(t.ik)for(var k in t.ik){var B=t.ik[k],p=B[0];if(p){var D=r.findIkConstraint(k);if(!D)throw new Error("IK Constraint not found: "+k);for(var L=r.ikConstraints.indexOf(D),d=new Ea(B.length,B.length<<1,L),y=X(p,"time",0),H=X(p,"mix",1),_=X(p,"softness",0)*a,v=0,m=0;;v++){d.setFrame(v,y,H,_,X(p,"bendPositive",!0)?1:-1,X(p,"compress",!1),X(p,"stretch",!1));var w=B[v+1];if(!w){d.shrink(m);break}var x=X(w,"time",0),O=X(w,"mix",1),U=X(w,"softness",0)*a,S=p.curve;S&&(m=st(S,d,m,v,0,y,x,H,O,1),m=st(S,d,m,v,1,y,x,_,U,a)),y=x,H=O,_=U,p=w}n.push(d)}}if(t.transform)for(var k in t.transform){var l=t.transform[k],p=l[0];if(p){var D=r.findTransformConstraint(k);if(!D)throw new Error("Transform constraint not found: "+k);for(var L=r.transformConstraints.indexOf(D),d=new Sa(l.length,l.length*6,L),y=X(p,"time",0),W=X(p,"mixRotate",1),N=X(p,"mixX",1),F=X(p,"mixY",N),q=X(p,"mixScaleX",1),$=X(p,"mixScaleY",q),z=X(p,"mixShearY",1),v=0,m=0;;v++){d.setFrame(v,y,W,N,F,q,$,z);var w=l[v+1];if(!w){d.shrink(m);break}var x=X(w,"time",0),j=X(w,"mixRotate",1),J=X(w,"mixX",1),K=X(w,"mixY",J),Z=X(w,"mixScaleX",1),tt=X(w,"mixScaleY",Z),ht=X(w,"mixShearY",1),S=p.curve;S&&(m=st(S,d,m,v,0,y,x,W,j,1),m=st(S,d,m,v,1,y,x,N,J,1),m=st(S,d,m,v,2,y,x,F,K,1),m=st(S,d,m,v,3,y,x,q,Z,1),m=st(S,d,m,v,4,y,x,$,tt,1),m=st(S,d,m,v,5,y,x,z,ht,1)),y=x,W=j,N=J,F=K,q=Z,$=tt,q=Z,p=w}n.push(d)}}if(t.path)for(var k in t.path){var B=t.path[k],D=r.findPathConstraint(k);if(!D)throw new Error("Path constraint not found: "+k);var L=r.pathConstraints.indexOf(D);for(var s in B){var l=B[s],p=l[0];if(p){var it=l.length;if(s==="position"){var d=new Aa(it,it,L);n.push(ee(l,d,0,D.positionMode==vt.Fixed?a:1))}else if(s==="spacing"){var d=new ba(it,it,L);n.push(ee(l,d,0,D.spacingMode==At.Length||D.spacingMode==At.Fixed?a:1))}else if(s==="mix"){for(var d=new Ta(it,it*3,L),y=X(p,"time",0),W=X(p,"mixRotate",1),N=X(p,"mixX",1),F=X(p,"mixY",N),v=0,m=0;;v++){d.setFrame(v,y,W,N,F);var w=l[v+1];if(!w){d.shrink(m);break}var x=X(w,"time",0),j=X(w,"mixRotate",1),J=X(w,"mixX",1),K=X(w,"mixY",J),S=p.curve;S&&(m=st(S,d,m,v,0,y,x,W,j,1),m=st(S,d,m,v,1,y,x,N,J,1),m=st(S,d,m,v,2,y,x,F,K,1)),y=x,W=j,N=J,F=K,p=w}n.push(d)}}}}if(t.deform){t.attachments={};for(var ut in t.deform){var ot=t.deform[ut],ft=t.attachments[ut]={};for(var h in ot){var f=ot[h],pt=ft[h]={};for(var yt in f)pt[yt]={deform:f[yt]}}}}if(t.attachments)for(var Pt in t.attachments){var Ft=t.attachments[Pt],Yt=r.findSkin(Pt);if(Yt==null){if(Ht.FAIL_ON_NON_EXISTING_SKIN)throw new Error("Skin not found: "+Pt);continue}for(var St in Ft){var f=Ft[St],c=r.findSlot(St);if(!c)throw new Error("Slot not found: "+St);var o=c.index;for(var Ut in f){var Wt=f[Ut],Vt=Yt.getAttachment(o,Ut);for(var Bt in Wt){var l=Wt[Bt],p=l[0];if(p){if(Bt=="deform"){for(var qt=Vt.bones,Xt=Vt.vertices,de=qt?Xt.length/3*2:Xt.length,d=new xa(l.length,l.length,o,Vt),y=X(p,"time",0),v=0,m=0;;v++){var Tt=void 0,Se=X(p,"vertices",null);if(!Se)Tt=qt?Y.newFloatArray(de):Xt;else{Tt=Y.newFloatArray(de);var ke=X(p,"offset",0);if(Y.arrayCopy(Se,0,Tt,ke,Se.length),a!=1)for(var ct=ke,ie=ct+Se.length;ct<ie;ct++)Tt[ct]*=a;if(!qt)for(var ct=0;ct<de;ct++)Tt[ct]+=Xt[ct]}d.setFrame(v,y,Tt);var w=l[v+1];if(!w){d.shrink(m);break}var x=X(w,"time",0),S=p.curve;S&&(m=st(S,d,m,v,0,y,x,0,1,1)),y=x,p=w}n.push(d)}else if(Bt=="sequence"){for(var d=new Ca(l.length,o,Vt),Pe=0,v=0;v<l.length;v++){var oe=X(p,"delay",Pe),y=X(p,"time",0),Ve=Mt[X(p,"mode","hold")],he=X(p,"index",0);d.setFrame(v,y,Ve,he,oe),Pe=oe,p=l[v+1]}n.push(d)}}}}}}if(t.drawOrder){for(var d=new Re(t.drawOrder.length),le=r.slots.length,v=0,ct=0;ct<t.drawOrder.length;ct++,v++){var Ae=t.drawOrder[ct],fe=null,$t=X(Ae,"offsets",null);if($t){fe=Y.newArray(le,-1);for(var pe=Y.newArray(le-$t.length,0),be=0,cr=0,ue=0;ue<$t.length;ue++){var Xa=$t[ue],c=r.findSlot(Xa.slot);if(!c)throw new Error("Slot not found: "+c);for(var o=c.index;be!=o;)pe[cr++]=be++;fe[be+Xa.offset]=be++}for(;be<le;)pe[cr++]=be++;for(var ue=le-1;ue>=0;ue--)fe[ue]==-1&&(fe[ue]=pe[--cr])}d.setFrame(v,X(Ae,"time",0),fe)}n.push(d)}if(t.events){for(var d=new fr(t.events.length),v=0,ct=0;ct<t.events.length;ct++,v++){var ce=t.events[ct],Fe=r.findEvent(ce.name);if(!Fe)throw new Error("Event not found: "+ce.name);var ge=new Ia(Y.toSinglePrecision(X(ce,"time",0)),Fe);ge.intValue=X(ce,"int",Fe.intValue),ge.floatValue=X(ce,"float",Fe.floatValue),ge.stringValue=X(ce,"string",Fe.stringValue),ge.data.audioPath&&(ge.volume=X(ce,"volume",1),ge.balance=X(ce,"balance",0)),d.setFrame(v,ge)}n.push(d)}for(var Ge=0,ct=0,ie=n.length;ct<ie;ct++)Ge=Math.max(Ge,n[ct].getDuration());if(isNaN(Ge))throw new Error("Error while parsing animation, duration is NaN");r.animations.push(new hr(e,n,Ge))},i.blendModeFromString=function(t){if(t=t.toLowerCase(),t=="normal")return wt.NORMAL;if(t=="additive")return wt.ADD;if(t=="multiply")return wt.MULTIPLY;if(t=="screen")return wt.SCREEN;throw new Error("Unknown blend mode: "+t)},i}(),ls=function(){function i(t,e,r,a,n){this.mesh=t,this.skin=e,this.slotIndex=r,this.parent=a,this.inheritTimeline=n}return i}();function ee(i,t,e,r){for(var a=i[0],n=X(a,"time",0),h=X(a,"value",e)*r,f=0,c=0;;c++){t.setFrame(c,n,h);var o=i[c+1];if(!o)return t.shrink(f),t;var s=X(o,"time",0),l=X(o,"value",e)*r;a.curve&&(f=st(a.curve,t,f,c,0,n,s,h,l,r)),n=s,h=l,a=o}}function yr(i,t,e,r,a,n){for(var h=i[0],f=X(h,"time",0),c=X(h,e,a)*n,o=X(h,r,a)*n,s=0,l=0;;l++){t.setFrame(l,f,c,o);var u=i[l+1];if(!u)return t.shrink(s),t;var d=X(u,"time",0),v=X(u,e,a)*n,p=X(u,r,a)*n,y=h.curve;y&&(s=st(y,t,s,l,0,f,d,c,v,n),s=st(y,t,s,l,1,f,d,o,p,n)),f=d,c=v,o=p,h=u}}function st(i,t,e,r,a,n,h,f,c,o){if(i=="stepped")return t.setStepped(r),e;var s=a<<2,l=i[s],u=i[s+1]*o,d=i[s+2],v=i[s+3]*o;return t.setBezier(e,r,a,n,f,l,u,d,v,h,c),e+1}function X(i,t,e){return i[t]!==void 0?i[t]:e}var fs=function(i){at(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}return t.prototype.createSkeleton=function(e){this.skeleton=new zn(e),this.skeleton.updateWorldTransform(),this.stateData=new _n(e),this.state=new Wn(this.stateData)},t}($e);const us=Object.freeze(Object.defineProperty({__proto__:null,AlphaTimeline:ma,Animation:hr,AnimationState:Wn,AnimationStateAdapter:Ni,AnimationStateData:_n,AtlasAttachmentLoader:Ra,Attachment:ra,AttachmentTimeline:ye,Bone:Vr,BoneData:Ma,BoundingBoxAttachment:On,ClippingAttachment:Dn,ConstraintData:ur,CurveTimeline:Qt,CurveTimeline1:te,CurveTimeline2:lr,DeformTimeline:xa,DrawOrderTimeline:Re,Event:Ia,EventData:ka,EventQueue:Un,EventTimeline:fr,get EventType(){return Dt},IkConstraint:Hn,IkConstraintData:Pa,IkConstraintTimeline:Ea,MeshAttachment:or,PathAttachment:_e,PathConstraint:$n,PathConstraintData:Va,PathConstraintMixTimeline:Ta,PathConstraintPositionTimeline:Aa,PathConstraintSpacingTimeline:ba,PointAttachment:Ln,RGB2Timeline:wa,RGBA2Timeline:ya,RGBATimeline:pa,RGBTimeline:ga,RegionAttachment:aa,RotateTimeline:He,ScaleTimeline:la,ScaleXTimeline:fa,ScaleYTimeline:ua,Sequence:na,get SequenceMode(){return Mt},SequenceModeValues:ia,SequenceTimeline:Ca,ShearTimeline:ca,ShearXTimeline:va,ShearYTimeline:da,Skeleton:zn,SkeletonBinary:Zn,SkeletonBounds:hs,SkeletonData:Fa,SkeletonJson:Jn,Skin:tr,SkinEntry:Fr,Slot:Gn,SlotData:Ya,get SpacingMode(){return At},Spine:fs,Timeline:mt,TrackEntry:qn,TransformConstraint:jn,TransformConstraintData:Ba,TransformConstraintTimeline:Sa,TranslateTimeline:sa,TranslateXTimeline:oa,TranslateYTimeline:ha,VertexAttachment:re},Symbol.toStringTag,{value:"Module"}));/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Yr=function(i,t){return Yr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])},Yr(i,t)};function Kn(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Yr(i,t);function e(){this.constructor=i}i.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var bt;(function(i){i[i.UNKNOWN=0]="UNKNOWN",i[i.VER37=37]="VER37",i[i.VER38=38]="VER38",i[i.VER40=40]="VER40",i[i.VER41=41]="VER41"})(bt||(bt={}));function er(i){var t=i.substr(0,3),e=Math.floor(+t*10+.001);return t==="3.7"?bt.VER37:t==="3.8"?bt.VER38:t==="4.0"?bt.VER40:t==="4.1"?bt.VER41:e<bt.VER37?bt.VER37:bt.UNKNOWN}var cs=function(){function i(){this.scale=1}return i.prototype.readSkeletonData=function(t,e){var r=null,a=this.readVersionOldFormat(e),n=er(a);if(n===bt.VER38&&(r=new ln(new Ur(t))),a=this.readVersionNewFormat(e),n=er(a),(n===bt.VER40||n===bt.VER41)&&(r=new Zn(new Ra(t))),!r){var h="Unsupported version of spine model "+a+", please update pixi-spine";console.error(h)}return r.scale=this.scale,r.readSkeletonData(e)},i.prototype.readVersionOldFormat=function(t){var e=new ze(t),r;try{e.readString(),r=e.readString()}catch{r=""}return r||""},i.prototype.readVersionNewFormat=function(t){var e=new ze(t);e.readInt32(),e.readInt32();var r;try{r=e.readString()}catch{r=""}return r||""},i}(),vs=function(){function i(){this.scale=1}return i.prototype.readSkeletonData=function(t,e){var r=e.skeleton.spine,a=er(r),n=null;if(a===bt.VER37&&(n=new Nn(new An(t))),a===bt.VER38&&(n=new fn(new Ur(t))),(a===bt.VER40||a===bt.VER41)&&(n=new Jn(new Ra(t))),!n){var h="Unsupported version of spine model "+r+", please update pixi-spine";console.error(h)}return n.scale=this.scale,n.readSkeletonData(e)},i}(),ds=function(i){Kn(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}return t.prototype.createBinaryParser=function(){return new cs},t.prototype.createJsonParser=function(){return new vs},t.prototype.parseData=function(e,r,a,n){var h=r;e.spineData=h.readSkeletonData(a,n),e.spineAtlas=a},t.registerLoaderPlugin=function(){oi.registerPlugin(t)},t.use=new t().genMiddleware().use,t}(wi),Es=function(i){Kn(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}return t.prototype.createSkeleton=function(e){var r=er(e.version),a=null;if(r===bt.VER37&&(a=Xi),r===bt.VER38&&(a=Ii),(r===bt.VER40||r===bt.VER41)&&(a=us),!a){var n="Cant detect version of spine model "+e.version;console.error(n)}this.skeleton=new a.Skeleton(e),this.skeleton.updateWorldTransform(),this.stateData=new a.AnimationStateData(e),this.state=new a.AnimationState(this.stateData)},t}($e);ds.registerLoaderPlugin();export{et as AttachmentType,ze as BinaryInput,G as Color,ms as DebugUtils,ja as IntSet,vi as Interpolation,M as MathUtils,b as MixBlend,rt as MixDirection,rr as Pool,vt as PositionMode,di as Pow,Za as PowOut,gt as RotateMode,hs as SkeletonBounds,ar as SkeletonBoundsBase,Es as Spine,$e as SpineBase,xs as SpineDebugRenderer,gi as SpineMesh,ds as SpineParser,pi as SpineSprite,za as StringSet,li as TextureAtlas,Oa as TextureAtlasPage,Da as TextureAtlasRegion,Lt as TextureFilter,xr as TextureRegion,Kt as TextureWrap,ys as TimeKeeper,Q as TransformMode,Y as Utils,Be as Vector2,ws as WindowedMean,Na as filterFromString,Ht as settings,gs as wrapFromString};
